function config(e){e.when("/",{templateUrl:"app/landing/landing.htm",controller:"landingController",controllerAs:"vm",resolve:{loadData:loadData}}).when("/marketReciept",{templateUrl:"app/marketReciept/marketReciept.htm",controller:"marketRecieptController",controllerAs:"vm",resolve:{formData:["backendSrvc",function(e){return e.getFormData("marketReciept")}]}}).otherwise({redirectTo:"/"})}function loadData(e){e.loadAllForms()}function backendSrvc(e,t){function a(e){return new Promise(function(a,n){t({method:"GET",url:"assets/"+e}).then(function(e){a(e.data)},function(e){console.log("Error:",e)})})}function n(){}function o(e){var t=this;t.allForms={marketReciept:"marketReciept.json"};var a=t.allForms[e];return new Promise(function(n,o){"undefined"!=typeof t[e]?n(t[e]):t._get(a).then(function(a){t[e]=a,n(t[e])})})}function s(){var e=this;e.allForms={marketReciept:"marketReciept.json"},console.log(e.allForms),Object.keys(e.allForms).forEach(function(t){var a=e.allForms[t];e._get(a).then(function(a){e[t]=a.data})})}var r={_get:a,_post:n,getFormData:o,loadAllForms:s};return r}function recieptForm(){function e(e,t,a,n){}function t(e,t){function a(){t.info("Unlocking btn"),s.submitBtnClasses["btn-danger"]=!1,s.submitBtnClasses["btn-success"]=!0}function n(){t.info("Locking btn"),s.submitBtnClasses["btn-danger"]=!0,s.submitBtnClasses["btn-success"]=!1}function o(){var e=0;return Object.keys(s.data.questions).forEach(function(t){var a=s.data.questions[t].approvals.addressed;a&&e++}),t.info(e,r,e==r),e==r?a():n(),e}var s=this,r=0,i={};s.currentDate=new Date,s.inputs={},s.approvals={},s.submitBtnClasses={btn:!0,"btn-danger":!0,"btn-success":!1,"col-xs-12":!0,"col-sm-12":!0,"col-md-12":!0,"col-lg-12":!0},Object.keys(s.data.questions).forEach(function(e){var t=s.data.questions[e].name;s.approvals[t]={addressed:!1,value:null,text:"OK?"},s.inputs[t]={},s.inputs[t].value="",s.inputs[t].suggestion="415",i[t]=r,r++}),t.info(s.inputs),s.inputs.Market.suggestion="Surf City",s.inputs.Name.suggestion="Ahmed",s.inputs.Gross.suggestion=415,s.inputs.Fee.suggestion=42,s.inputs.Pay.suggestion=83,s.inputs.Reciepts.suggestion=10,s.inputs.Bank.suggestion=60,s.inputs.Due.suggestion=220,s.refreshApprovals=function(){Object.keys(s.data.questions).forEach(function(e){var t=s.data.questions[e].name;s.inputs[t].value="",s.data.questions[e].approvals.addressed=!1,s.data.questions[e].approvals.value=null,s.data.questions[e].approvals.text="OK?",s.data.questions[e].classes.approvalDiv["round-button-circle-free"]=!0,s.data.questions[e].classes.approvalDiv["round-button-circle-approved"]=!1,s.data.questions[e].classes.approvalDiv["round-button-circle-revised"]=!1,s.data.questions[e].classes.inputDiv["has-success"]=!1,s.data.questions[e].classes.inputDiv["has-warning"]=!1,s.data.questions[e].classes.inputDiv["has-danger"]=!1}),o()},s.changed=function(e){var a=i[e];t.info(e),s.data.questions[a].approvals.addressed=!0,s.data.questions[a].approvals.value=!0,s.data.questions[a].approvals.text="NO!",s.data.questions[a].classes.approvalDiv["round-button-circle-free"]=!1,s.data.questions[a].classes.approvalDiv["round-button-circle-revised"]=!0,s.data.questions[a].classes.inputDiv["has-danger"]=!0,o()},s.approveField=function(e){var a=i[e],n=s.data.questions[a].approvals.addressed;n||(s.inputs[e].value=s.inputs[e].suggestion,s.data.questions[a].approvals.addressed=!0,s.data.questions[a].approvals.value=!0,s.data.questions[a].approvals.text="YES!",s.data.questions[a].classes.approvalDiv["round-button-circle-free"]=!1,s.data.questions[a].classes.approvalDiv["round-button-circle-approved"]=!0,s.data.questions[a].classes.inputDiv["has-success"]=!0,o()),t.info(e)},s.submitForm=function(){o()==r?console.log("submitted!"):console.log("need to finish the fields")}}e.$inject=["scope","el","attr","ctrl"];var a={restrict:"AECM",templateUrl:"app/form/form.directive.htm",replace:!0,scope:{data:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$scope","$log"],a}function landingController(e,t){var a=this;a.redirectTo=function(a){e.info("clicked",a),t.path("/"+a)}}function marketRecieptController(e,t,a){var n=this;n.data=a}function navbar(){function e(e,t,a,n){}function t(e,t){}e.$inject=["scope","el","attr","ctrl"];var a={restrict:"AECM",templateUrl:"app/navbar/navbar.directive.htm",replace:!0,scope:{},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$scope","$log"],a}config.$inject=["$routeProvider"],loadData.$inject=["backendSrvc"],angular.module("marketReciept",["ngRoute"]),angular.module("marketReciept").config(config),angular.module("marketReciept").factory("backendSrvc",backendSrvc),backendSrvc.$inject=["$log","$http"],angular.module("marketReciept").directive("recieptForm",recieptForm),angular.module("marketReciept").controller("landingController",landingController),landingController.$inject=["$log","$location"],angular.module("marketReciept").controller("marketRecieptController",marketRecieptController),marketRecieptController.$inject=["$log","backendSrvc","formData"],angular.module("marketReciept").directive("navbar",navbar);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9yb3V0ZS1jb25maWcuanMiLCJhcHAvYmFja2VuZFNydmMvYmFja2VuZFNydmMuanMiLCJhcHAuanMiLCJhcHAvZm9ybS9mb3JtLmRpcmVjdGl2ZS5qcyIsImFwcC9sYW5kaW5nL2xhbmRpbmcuY29udHJvbGxlci5qcyIsImFwcC9tYXJrZXRSZWNpZXB0L21hcmtldFJlY2llcHQuY29udHJvbGxlci5qcyIsImFwcC9uYXZiYXIvbmF2YmFyLmRpcmVjdGl2ZS5qcyIsImFwcC5tb2R1bGUuanMiXSwibmFtZXMiOlsiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwicmVzb2x2ZSIsImxvYWREYXRhIiwiZm9ybURhdGEiLCJiYWNrZW5kU3J2YyIsImdldEZvcm1EYXRhIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImxvYWRBbGxGb3JtcyIsIiRsb2ciLCIkaHR0cCIsIl9nZXQiLCJmaWxlbmFtZSIsIlByb21pc2UiLCJyZWplY3QiLCJtZXRob2QiLCJ1cmwiLCJ0aGVuIiwicmVzcG9uc2UiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsIl9wb3N0IiwiZm9ybSIsInNlcnZpY2UiLCJ0aGlzIiwiYWxsRm9ybXMiLCJtYXJrZXRSZWNpZXB0IiwicmVqIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJyZWNpZXB0Rm9ybSIsImxpbmtGdW5jIiwic2NvcGUiLCJlbCIsImF0dHIiLCJjdHJsIiwiJHNjb3BlIiwidW5sb2NrU3VibWl0QnRuIiwiaW5mbyIsInZtIiwic3VibWl0QnRuQ2xhc3NlcyIsImxvY2tTdWJtaXRCdG4iLCJjb3VudEFwcHJvdmVkIiwibnVtYmVyT2YiLCJxdWVzdGlvbnMiLCJrZXkiLCJpc0FwcHJvdmVkIiwiYXBwcm92YWxzIiwiYWRkcmVzc2VkIiwidG90YWxGaWVsZHMiLCJmaWVsZHNIYXNoIiwiY3VycmVudERhdGUiLCJEYXRlIiwiYnRuIiwiYnRuLWRhbmdlciIsImJ0bi1zdWNjZXNzIiwiY29sLXhzLTEyIiwiY29sLXNtLTEyIiwiY29sLW1kLTEyIiwiY29sLWxnLTEyIiwibmFtZSIsInZhbHVlIiwidGV4dCIsImlucHV0cyIsInN1Z2dlc3Rpb24iLCJyZWZyZXNoQXBwcm92YWxzIiwicmVjb3JkTmFtZSIsImNsYXNzZXMiLCJhcHByb3ZhbERpdiIsImlucHV0RGl2IiwiY2hhbmdlZCIsImZpZWxkTmFtZSIsInJlY29yZE51bSIsImFwcHJvdmVGaWVsZCIsInN1Ym1pdEZvcm0iLCIkaW5qZWN0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwibGluayIsImJpbmRUb0NvbnRyb2xsZXIiLCJsYW5kaW5nQ29udHJvbGxlciIsIiRsb2NhdGlvbiIsImZvcm1OYW1lIiwicGF0aCIsIm1hcmtldFJlY2llcHRDb250cm9sbGVyIiwibmF2YmFyIiwibmF2YmFyQ29udHJvbGxlciIsImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5Il0sIm1hcHBpbmdzIjoiQUFJQSxRQUFBQSxRQUFBQyxHQUNBQSxFQUNBQyxLQUFBLEtBQ0FDLFlBQUEsMEJBQ0FDLFdBQUEsb0JBQ0FDLGFBQUEsS0FDQUMsU0FDQUMsU0FBQUEsWUFHQUwsS0FBQSxrQkFDQUMsWUFBQSxzQ0FDQUMsV0FBQSwwQkFDQUMsYUFBQSxLQUNBQyxTQUNBRSxVQUFBLGNBQUEsU0FBQUMsR0FFQSxNQUFBQSxHQUFBQyxZQUFBLHNCQUlBQyxXQUNBQyxXQUFBLE1BSUEsUUFBQUwsVUFBQUUsR0FDQUEsRUFBQUksZUN4QkEsUUFBQUosYUFBQUssRUFBQUMsR0FVQSxRQUFBQyxHQUFBQyxHQUdBLE1BQUEsSUFBQUMsU0FBQSxTQUFBWixFQUFBYSxHQUVBSixHQUNBSyxPQUFBLE1BQ0FDLElBQUEsVUFBQUosSUFDQUssS0FBQSxTQUFBQyxHQUVBakIsRUFBQWlCLEVBQUFDLE9BRUEsU0FBQUQsR0FDQUUsUUFBQUMsSUFBQSxTQUFBSCxPQU9BLFFBQUFJLE1BSUEsUUFBQWpCLEdBQUFrQixH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VyxRQUFTLEtBQU0sT0FBUSxPSW5YL0MsSUFBQUMsSUFDQUMsU0FBQSxPQUNBakYsWUFBQSxrQ0FDQWtGLFNBQUEsRUFDQTlDLFNBQ0ErQyxLQUFBaEQsRUFDQWxDLFdBQUEwRixFQUNBekYsYUFBQSxLQUNBa0Ysa0JBQUEsRUFjQSxPQVBBTyxHQUFBWixTQUFBLFNBQUEsUUFPQUMsRUozQkFuRixPQUFPa0YsU0FBVyxrQkFDbEIzRSxTQUFTMkUsU0FBVyxlS0ZwQmEsUUFDQUMsT0FBQSxpQkFDQSxZUEZBRCxRQUNBQyxPQUFBLGlCQUNBaEcsT0FBQUEsUUNGQStGLFFBQ0FDLE9BQUEsaUJBQ0FDLFFBQUEsY0FBQXhGLGFBRUFBLFlBQUF5RSxTQUFBLE9BQUEsU0VKQWEsUUFDQUMsT0FBQSxpQkFDQWIsVUFBQSxjQUFBOUMsYUNGQTBELFFBQ0FDLE9BQUEsaUJBQ0E1RixXQUFBLG9CQUFBb0YsbUJBRUFBLGtCQUFBTixTQUFBLE9BQUEsYUNKQWEsUUFDQUMsT0FBQSxpQkFDQTVGLFdBQUEsMEJBQUF3Rix5QkFFQUEsd0JBQUFWLFNBQUEsT0FBQSxjQUFBLFlDSkFhLFFBQ0FDLE9BQUEsaUJBQ0FiLFVBQUEsU0FBQVUiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhclxuXHQubW9kdWxlKCdtYXJrZXRSZWNpZXB0Jylcblx0LmNvbmZpZyhjb25maWcpO1xuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIpIHtcblx0JHJvdXRlUHJvdmlkZXJcbiAgICAud2hlbignLycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvbGFuZGluZy9sYW5kaW5nLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdsYW5kaW5nQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZToge1x0LyogQG5nSW5qZWN0ICovXG4gICAgICAgIFx0bG9hZERhdGE6bG9hZERhdGFcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy9tYXJrZXRSZWNpZXB0Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9tYXJrZXRSZWNpZXB0L21hcmtldFJlY2llcHQuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ21hcmtldFJlY2llcHRDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgIFx0Zm9ybURhdGE6IGZ1bmN0aW9uKGJhY2tlbmRTcnZjKSB7XG4gICAgICAgIFx0XHQvL3JldHVybiB7J3Jlc29sdmVUZXN0JzonZ29vZCB0ZXN0J307XG4gICAgICAgIFx0XHRyZXR1cm4gYmFja2VuZFNydmMuZ2V0Rm9ybURhdGEoJ21hcmtldFJlY2llcHQnKTtcbiAgICAgICAgXHR9XG4gICAgICAgIH1cbiAgICB9KVxuICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gbG9hZERhdGEoYmFja2VuZFNydmMpIHtcblx0YmFja2VuZFNydmMubG9hZEFsbEZvcm1zKCk7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuICAgIC5mYWN0b3J5KCdiYWNrZW5kU3J2YycsIGJhY2tlbmRTcnZjKTtcblxuYmFja2VuZFNydmMuJGluamVjdCA9IFsnJGxvZycsICckaHR0cCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGJhY2tlbmRTcnZjKCRsb2csICRodHRwKSB7XG5cdHZhciBzZXJ2aWNlID0gdGhpcztcblxuXHR2YXIgYmFja2VuZFNydmMgPSB7XG5cdFx0X2dldDpfZ2V0LFxuXHRcdF9wb3N0Ol9wb3N0LFxuXHRcdGdldEZvcm1EYXRhOmdldEZvcm1EYXRhLFxuXHRcdGxvYWRBbGxGb3Jtczpsb2FkQWxsRm9ybXNcblx0fTtcblxuXHRmdW5jdGlvbiBfZ2V0KGZpbGVuYW1lKSB7XG5cdFx0dmFyIHRoaXNSZXNwb25zZSA9IG51bGw7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdCRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdFx0dXJsOiAnYXNzZXRzLycgKyBmaWxlbmFtZVxuXHRcdFx0fSkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcblx0XHRcdFx0XG5cdFx0XHRcdHJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdFxuXHRcdFx0fSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnRXJyb3I6JyxyZXNwb25zZSk7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBfcG9zdCgpIHtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0Rm9ybURhdGEoZm9ybSkge1xuXHRcdHZhciBzZXJ2aWNlID0gdGhpcztcblxuXHRcdHNlcnZpY2UuYWxsRm9ybXMgPSB7XCJtYXJrZXRSZWNpZXB0XCI6J21hcmtldFJlY2llcHQuanNvbid9O1xuXG5cdFx0dmFyIHVybCA9IHNlcnZpY2UuYWxsRm9ybXNbZm9ybV07XG5cdFx0XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlaikge1xuXHRcdFx0Ly9jaGVjayBmb3IgZXhpc3RpbmcgdmFsdWVzXG5cdFx0XHRpZih0eXBlb2Ygc2VydmljZVtmb3JtXSAhPT0gJ3VuZGVmaW5lZCcpXG5cdFx0XHRcdHJlc29sdmUoc2VydmljZVtmb3JtXSk7XG5cdFx0XHRlbHNlIHsgXG5cdFx0XHRcdHNlcnZpY2UuX2dldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRzZXJ2aWNlW2Zvcm1dID0gcmVzcG9uc2U7XG5cdFx0XHRcdFx0cmVzb2x2ZShzZXJ2aWNlW2Zvcm1dKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHR9KTtcblx0XG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkQWxsRm9ybXMoKSB7XG5cdFx0dmFyIHNlcnZpY2UgPSB0aGlzO1xuXG5cdFx0c2VydmljZS5hbGxGb3JtcyA9IHtcIm1hcmtldFJlY2llcHRcIjonbWFya2V0UmVjaWVwdC5qc29uJ307XG5cdFxuXHRcdGNvbnNvbGUubG9nKHNlcnZpY2UuYWxsRm9ybXMpO1xuXG5cdFx0Ly9ydW4gdGhyb3VnaCBlYWNoIGZvcm1cblx0XHRPYmplY3Qua2V5cyhzZXJ2aWNlLmFsbEZvcm1zKS5mb3JFYWNoKGZ1bmN0aW9uKGZvcm0pIHtcblx0XHRcdHZhciB1cmwgPSBzZXJ2aWNlLmFsbEZvcm1zW2Zvcm1dO1xuXG5cdFx0XHRzZXJ2aWNlLl9nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdHNlcnZpY2VbZm9ybV0gPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0cmV0dXJuIGJhY2tlbmRTcnZjO1xufSIsIlxuY29uZmlnLiRpbmplY3QgPSBbXCIkcm91dGVQcm92aWRlclwiXTtcbmxvYWREYXRhLiRpbmplY3QgPSBbXCJiYWNrZW5kU3J2Y1wiXTthbmd1bGFyXG5cdC5tb2R1bGUoJ21hcmtldFJlY2llcHQnLCBbXG5cdFx0J25nUm91dGUnXG5cdF0pO1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuXHQuY29uZmlnKGNvbmZpZyk7XG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGNvbmZpZygkcm91dGVQcm92aWRlcikge1xuXHQkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9sYW5kaW5nL2xhbmRpbmcuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ2xhbmRpbmdDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7XHQvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgXHRsb2FkRGF0YTpsb2FkRGF0YVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL21hcmtldFJlY2llcHQnLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL21hcmtldFJlY2llcHQvbWFya2V0UmVjaWVwdC5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnbWFya2V0UmVjaWVwdENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgXHRmb3JtRGF0YTogW1wiYmFja2VuZFNydmNcIiwgZnVuY3Rpb24oYmFja2VuZFNydmMpIHtcbiAgICAgICAgXHRcdC8vcmV0dXJuIHsncmVzb2x2ZVRlc3QnOidnb29kIHRlc3QnfTtcbiAgICAgICAgXHRcdHJldHVybiBiYWNrZW5kU3J2Yy5nZXRGb3JtRGF0YSgnbWFya2V0UmVjaWVwdCcpO1xuICAgICAgICBcdH1dXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gbG9hZERhdGEoYmFja2VuZFNydmMpIHtcblx0YmFja2VuZFNydmMubG9hZEFsbEZvcm1zKCk7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWFya2V0UmVjaWVwdCcpXG4gICAgLmZhY3RvcnkoJ2JhY2tlbmRTcnZjJywgYmFja2VuZFNydmMpO1xuXG5iYWNrZW5kU3J2Yy4kaW5qZWN0ID0gWyckbG9nJywgJyRodHRwJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYmFja2VuZFNydmMoJGxvZywgJGh0dHApIHtcblx0dmFyIHNlcnZpY2UgPSB0aGlzO1xuXG5cdHZhciBiYWNrZW5kU3J2YyA9IHtcblx0XHRfZ2V0Ol9nZXQsXG5cdFx0X3Bvc3Q6X3Bvc3QsXG5cdFx0Z2V0Rm9ybURhdGE6Z2V0Rm9ybURhdGEsXG5cdFx0bG9hZEFsbEZvcm1zOmxvYWRBbGxGb3Jtc1xuXHR9O1xuXG5cdGZ1bmN0aW9uIF9nZXQoZmlsZW5hbWUpIHtcblx0XHR2YXIgdGhpc1Jlc3BvbnNlID0gbnVsbDtcblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdFx0XHR1cmw6ICdhc3NldHMvJyArIGZpbGVuYW1lXG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0XG5cdFx0XHR9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdFcnJvcjonLHJlc3BvbnNlKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIF9wb3N0KCkge1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRGb3JtRGF0YShmb3JtKSB7XG5cdFx0dmFyIHNlcnZpY2UgPSB0aGlzO1xuXG5cdFx0c2VydmljZS5hbGxGb3JtcyA9IHtcIm1hcmtldFJlY2llcHRcIjonbWFya2V0UmVjaWVwdC5qc29uJ307XG5cblx0XHR2YXIgdXJsID0gc2VydmljZS5hbGxGb3Jtc1tmb3JtXTtcblx0XHRcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqKSB7XG5cdFx0XHQvL2NoZWNrIGZvciBleGlzdGluZyB2YWx1ZXNcblx0XHRcdGlmKHR5cGVvZiBzZXJ2aWNlW2Zvcm1dICE9PSAndW5kZWZpbmVkJylcblx0XHRcdFx0cmVzb2x2ZShzZXJ2aWNlW2Zvcm1dKTtcblx0XHRcdGVsc2UgeyBcblx0XHRcdFx0c2VydmljZS5fZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0XHRcdHNlcnZpY2VbZm9ybV0gPSByZXNwb25zZTtcblx0XHRcdFx0XHRyZXNvbHZlKHNlcnZpY2VbZm9ybV0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdH0pO1xuXHRcblx0fVxuXG5cdGZ1bmN0aW9uIGxvYWRBbGxGb3JtcygpIHtcblx0XHR2YXIgc2VydmljZSA9IHRoaXM7XG5cblx0XHRzZXJ2aWNlLmFsbEZvcm1zID0ge1wibWFya2V0UmVjaWVwdFwiOidtYXJrZXRSZWNpZXB0Lmpzb24nfTtcblx0XG5cdFx0Y29uc29sZS5sb2coc2VydmljZS5hbGxGb3Jtcyk7XG5cblx0XHQvL3J1biB0aHJvdWdoIGVhY2ggZm9ybVxuXHRcdE9iamVjdC5rZXlzKHNlcnZpY2UuYWxsRm9ybXMpLmZvckVhY2goZnVuY3Rpb24oZm9ybSkge1xuXHRcdFx0dmFyIHVybCA9IHNlcnZpY2UuYWxsRm9ybXNbZm9ybV07XG5cblx0XHRcdHNlcnZpY2UuX2dldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0c2VydmljZVtmb3JtXSA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRyZXR1cm4gYmFja2VuZFNydmM7XG59XG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuXHQuZGlyZWN0aXZlKCdyZWNpZXB0Rm9ybScsIHJlY2llcHRGb3JtKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiByZWNpZXB0Rm9ybSgpIHtcbiAgICBsaW5rRnVuYy4kaW5qZWN0ID0gW1wic2NvcGVcIiwgXCJlbFwiLCBcImF0dHJcIiwgXCJjdHJsXCJdO1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICdhcHAvZm9ybS9mb3JtLmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGRhdGE6ICc9J1xuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogcmVjaWVwdEZvcm0sXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICByZWNpZXB0Rm9ybS4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZyddO1xuICAgIFxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIHJlY2llcHRGb3JtKCRzY29wZSwgJGxvZykge1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB0b3RhbEZpZWxkcyA9IDA7XG5cdFx0dmFyIGZpZWxkc0hhc2ggPSB7fTtcblxuXHRcdC8vc2V0IHZpZXcgbW9kZWwgdmFsdWVzXG5cdFx0dm0uY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXHRcdHZtWydpbnB1dHMnXSA9IHt9O1xuXHRcdHZtWydhcHByb3ZhbHMnXSA9IHt9O1xuXHRcdHZtWydzdWJtaXRCdG5DbGFzc2VzJ10gPSB7XG5cdFx0XHRcImJ0blwiOnRydWUsXG5cdFx0XHRcImJ0bi1kYW5nZXJcIjp0cnVlLFxuXHRcdFx0XCJidG4tc3VjY2Vzc1wiOmZhbHNlLFxuXHRcdFx0XCJjb2wteHMtMTJcIjp0cnVlLFxuXHRcdFx0XCJjb2wtc20tMTJcIjp0cnVlLFxuXHRcdFx0XCJjb2wtbWQtMTJcIjp0cnVlLFxuXHRcdFx0XCJjb2wtbGctMTJcIjp0cnVlXG5cdFx0fVxuXG5cdFx0Ly9jcmVhdGUgdGhlIG5lZWRlZCBvYmplY3RzXG5cdFx0T2JqZWN0LmtleXModm0uZGF0YS5xdWVzdGlvbnMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHR2YXIgbmFtZSA9IHZtLmRhdGEucXVlc3Rpb25zW2tleV0ubmFtZTtcblxuXHRcdFx0Ly9hZGQgYXBwcm92YWwgdmFsdWVzXG5cdFx0XHR2bS5hcHByb3ZhbHNbbmFtZV0gPSB7XG5cdFx0XHRcdFwiYWRkcmVzc2VkXCI6ZmFsc2UsXG5cdFx0XHRcdFwidmFsdWVcIjpudWxsLFxuXHRcdFx0XHRcInRleHRcIjonT0s/J1xuXHRcdFx0fVxuXG5cdFx0XHQvL2FkZCBpbnB1dCB2YWx1ZXNcblx0XHRcdHZtLmlucHV0c1tuYW1lXSA9IHt9O1xuXHRcdFx0dm0uaW5wdXRzW25hbWVdLnZhbHVlID0gJyc7XG5cdFx0XHR2bS5pbnB1dHNbbmFtZV0uc3VnZ2VzdGlvbiA9ICc0MTUnO1xuXG5cdFx0XHQvL2J1aWxkIGZpZWxkcyBoYXNoXG5cdFx0XHRmaWVsZHNIYXNoW25hbWVdID0gdG90YWxGaWVsZHM7XG5cblx0XHRcdC8vaW5jcmltZW50IGZpZWxkcyBjb3VudFxuXHRcdFx0dG90YWxGaWVsZHMrKztcblxuXHRcdH0pO1xuXG5cdFx0Ly9saXN0IHRoZSBvYmplY3RzXG5cdFx0JGxvZy5pbmZvKHZtLmlucHV0cyk7XG5cblx0XHQvL2FkZCBzdWdnZXN0aW9uIHZhbHVlc1xuXHRcdHZtLmlucHV0c1snTWFya2V0J10uc3VnZ2VzdGlvbiA9ICdTdXJmIENpdHknO1xuXHRcdHZtLmlucHV0c1snTmFtZSddLnN1Z2dlc3Rpb24gPSAnQWhtZWQnO1xuXHRcdHZtLmlucHV0c1snR3Jvc3MnXS5zdWdnZXN0aW9uID0gNDE1O1xuXHRcdHZtLmlucHV0c1snRmVlJ10uc3VnZ2VzdGlvbiA9IDQyO1xuXHRcdHZtLmlucHV0c1snUGF5J10uc3VnZ2VzdGlvbiA9IDgzO1xuXHRcdHZtLmlucHV0c1snUmVjaWVwdHMnXS5zdWdnZXN0aW9uID0gMTA7XG5cdFx0dm0uaW5wdXRzWydCYW5rJ10uc3VnZ2VzdGlvbiA9IDYwO1xuXHRcdHZtLmlucHV0c1snRHVlJ10uc3VnZ2VzdGlvbiA9IDIyMDtcblxuXHRcdGZ1bmN0aW9uIHVubG9ja1N1Ym1pdEJ0bigpIHtcblx0XHRcdC8vXG5cdFx0XHQkbG9nLmluZm8oJ1VubG9ja2luZyBidG4nKTtcblx0XHRcdHZtLnN1Ym1pdEJ0bkNsYXNzZXNbJ2J0bi1kYW5nZXInXSA9IGZhbHNlO1xuXHRcdFx0dm0uc3VibWl0QnRuQ2xhc3Nlc1snYnRuLXN1Y2Nlc3MnXSA9IHRydWU7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gbG9ja1N1Ym1pdEJ0bigpIHtcblx0XHRcdC8vXG5cdFx0XHQkbG9nLmluZm8oJ0xvY2tpbmcgYnRuJyk7XG5cdFx0XHR2bS5zdWJtaXRCdG5DbGFzc2VzWydidG4tZGFuZ2VyJ10gPSB0cnVlO1xuXHRcdFx0dm0uc3VibWl0QnRuQ2xhc3Nlc1snYnRuLXN1Y2Nlc3MnXSA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNvdW50QXBwcm92ZWQoKSB7XG5cdFx0XHR2YXIgbnVtYmVyT2YgPSAwO1xuXG5cdFx0XHRPYmplY3Qua2V5cyh2bS5kYXRhLnF1ZXN0aW9ucykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0Ly9kZWZpbmUgdmFyaWFibGVcblx0XHRcdFx0dmFyIGlzQXBwcm92ZWQgPSB2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmFwcHJvdmFscy5hZGRyZXNzZWQ7XG5cdFx0XHRcdC8vY2hlY2sgdmFsdWVcblx0XHRcdFx0aWYoaXNBcHByb3ZlZCkgbnVtYmVyT2YrKztcblx0XHRcdH0pO1xuXG5cdFx0XHQkbG9nLmluZm8obnVtYmVyT2YsIHRvdGFsRmllbGRzLG51bWJlck9mPT10b3RhbEZpZWxkcyk7XG5cdFx0XHRpZihudW1iZXJPZj09dG90YWxGaWVsZHMpIHVubG9ja1N1Ym1pdEJ0bigpO1xuXHRcdFx0ZWxzZSBsb2NrU3VibWl0QnRuKCk7XG5cblx0XHRcdHJldHVybiBudW1iZXJPZjtcblx0XHR9XG5cblx0XHR2bS5yZWZyZXNoQXBwcm92YWxzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQvL2xvb3AgdGhyb3VnaCBhbGwgcXVlc3Rpb25zXG5cdFx0XHRPYmplY3Qua2V5cyh2bS5kYXRhLnF1ZXN0aW9ucykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0dmFyIHJlY29yZE5hbWUgPSB2bS5kYXRhLnF1ZXN0aW9uc1trZXldLm5hbWU7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL3Jlc2V0IHN1Z2dlc3Rpb25zXG5cblx0XHRcdFx0Ly9yZXNldCB2YWx1ZXNcblx0XHRcdFx0dm0uaW5wdXRzW3JlY29yZE5hbWVdLnZhbHVlID0gJyc7XG5cblx0XHRcdFx0Ly9zZXQgdmFsdWVzXG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uYXBwcm92YWxzLmFkZHJlc3NlZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmFwcHJvdmFscy52YWx1ZSA9IG51bGw7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uYXBwcm92YWxzLnRleHQgPSBcIk9LP1wiO1xuXG5cdFx0XHRcdC8vc2V0IGNsYXNzZXNcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWZyZWUnXSA9IHRydWU7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uY2xhc3Nlcy5hcHByb3ZhbERpdlsncm91bmQtYnV0dG9uLWNpcmNsZS1hcHByb3ZlZCddID0gZmFsc2U7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uY2xhc3Nlcy5hcHByb3ZhbERpdlsncm91bmQtYnV0dG9uLWNpcmNsZS1yZXZpc2VkJ10gPSBmYWxzZTtcblx0XHRcdFx0XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uY2xhc3Nlcy5pbnB1dERpdlsnaGFzLXN1Y2Nlc3MnXSA9IGZhbHNlO1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmNsYXNzZXMuaW5wdXREaXZbJ2hhcy13YXJuaW5nJ10gPSBmYWxzZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmlucHV0RGl2WydoYXMtZGFuZ2VyJ10gPSBmYWxzZTtcblx0XHRcdH0pO1xuXG5cdFx0XHRjb3VudEFwcHJvdmVkKCk7XG5cdFx0fVxuXG5cdFx0dm0uY2hhbmdlZCA9IGZ1bmN0aW9uKGZpZWxkTmFtZSkge1xuXHRcdFx0dmFyIHJlY29yZE51bSA9IGZpZWxkc0hhc2hbZmllbGROYW1lXTtcblx0XHRcdC8vbm90aWZ5IHRoZSByZWNvcmQgYmVpbmcgY2hhbmdlZFxuXHRcdFx0JGxvZy5pbmZvKGZpZWxkTmFtZSk7XG5cblx0XHRcdC8vdXBkYXRlIHRoZSBhcHByb3ZhbCBidXR0b25cblx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLmFkZHJlc3NlZCA9IHRydWU7XG5cdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy52YWx1ZSA9IHRydWU7XG5cdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy50ZXh0ID0gXCJOTyFcIjtcblxuXHRcdFx0Ly9jaGFuZ2UgdGhlIGNsYXNzXG5cdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmNsYXNzZXMuYXBwcm92YWxEaXZbJ3JvdW5kLWJ1dHRvbi1jaXJjbGUtZnJlZSddID0gZmFsc2U7XG5cdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmNsYXNzZXMuYXBwcm92YWxEaXZbJ3JvdW5kLWJ1dHRvbi1jaXJjbGUtcmV2aXNlZCddID0gdHJ1ZTtcblx0XHRcdFxuXHRcdFx0Ly9jaGFuZ2UgdGhlIGlucHV0IGNsYXNzXG5cdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmNsYXNzZXMuaW5wdXREaXZbJ2hhcy1kYW5nZXInXSA9IHRydWU7XG5cblx0XHRcdGNvdW50QXBwcm92ZWQoKTtcblx0XHR9XG5cblx0XHR2bS5hcHByb3ZlRmllbGQgPSBmdW5jdGlvbihmaWVsZE5hbWUpIHtcblx0XHRcdHZhciByZWNvcmROdW0gPSBmaWVsZHNIYXNoW2ZpZWxkTmFtZV07XG5cdFx0XHR2YXIgaXNBcHByb3ZlZCA9IHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLmFkZHJlc3NlZDtcblx0XHRcdFx0XG5cdFx0XHRpZighaXNBcHByb3ZlZCkge1xuXG5cdFx0XHRcdC8vdXBkYXRlIHRoZSB2YWx1ZXNcblx0XHRcdFx0dm0uaW5wdXRzW2ZpZWxkTmFtZV0udmFsdWUgPSB2bS5pbnB1dHNbZmllbGROYW1lXS5zdWdnZXN0aW9uO1xuXG5cdFx0XHRcdC8vdXBkYXRlIHRoZSBidXR0b25cblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMuYWRkcmVzc2VkID0gdHJ1ZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMudmFsdWUgPSB0cnVlO1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy50ZXh0ID0gXCJZRVMhXCI7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL2NoYW5nZSB0aGUgY2xhc3Ncblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWZyZWUnXSA9IGZhbHNlO1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmNsYXNzZXMuYXBwcm92YWxEaXZbJ3JvdW5kLWJ1dHRvbi1jaXJjbGUtYXBwcm92ZWQnXSA9IHRydWU7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL2NoYW5nZSB0aGUgaW5wdXQgY2xhc3Ncblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmlucHV0RGl2WydoYXMtc3VjY2VzcyddID0gdHJ1ZTtcblxuXHRcdFx0XHRjb3VudEFwcHJvdmVkKCk7XG5cdFx0XHRcdFxuXHRcdFx0fVxuXG5cdFx0XHQkbG9nLmluZm8oZmllbGROYW1lKTtcblxuXHRcdH1cblxuXHRcdHZtLnN1Ym1pdEZvcm0gPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0aWYoY291bnRBcHByb3ZlZCgpID09IHRvdGFsRmllbGRzKVxuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VibWl0dGVkIScpO1xuXHRcdFx0ZWxzZSBcblx0XHRcdFx0Y29uc29sZS5sb2coJ25lZWQgdG8gZmluaXNoIHRoZSBmaWVsZHMnKTtcblxuXHRcdFx0XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGRpcmVjdGl2ZTtcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtYXJrZXRSZWNpZXB0JylcbiAgICAuY29udHJvbGxlcignbGFuZGluZ0NvbnRyb2xsZXInLCBsYW5kaW5nQ29udHJvbGxlcik7XG5cbmxhbmRpbmdDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbGFuZGluZ0NvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cblx0dm0ucmVkaXJlY3RUbyA9IGZ1bmN0aW9uKGZvcm1OYW1lKSB7XG5cdFx0JGxvZy5pbmZvKCdjbGlja2VkJywgZm9ybU5hbWUpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvJytmb3JtTmFtZSk7XG5cdH1cbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtYXJrZXRSZWNpZXB0JylcbiAgICAuY29udHJvbGxlcignbWFya2V0UmVjaWVwdENvbnRyb2xsZXInLCBtYXJrZXRSZWNpZXB0Q29udHJvbGxlcik7XG5cbm1hcmtldFJlY2llcHRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnYmFja2VuZFNydmMnLCAnZm9ybURhdGEnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBtYXJrZXRSZWNpZXB0Q29udHJvbGxlcigkbG9nLCBiYWNrZW5kU3J2YywgZm9ybURhdGEpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dm0uZGF0YSA9IGZvcm1EYXRhO1xuXG5cdHZhciB0aXRsZUNsYXNzZXMgPSB7XG5cdFx0J2NvbC14cy01Jzp0cnVlLFxuXHRcdCdjb2wtc20tNSc6dHJ1ZSxcblx0XHQnY29sLW1kLTUnOnRydWUsXG5cdFx0J2NvbC1sZy01Jzp0cnVlXHRcdFxuXHR9O1xuXG5cdHZhciBpbnB1dENsYXNzZXMgPSB7XG5cdFx0J2NvbC14cy03Jzp0cnVlLFxuXHRcdCdjb2wtc20tNyc6dHJ1ZSxcblx0XHQnY29sLW1kLTcnOnRydWUsXG5cdFx0J2NvbC1sZy03Jzp0cnVlXG5cdH07XG5cbn1cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWFya2V0UmVjaWVwdCcpXG5cdC5kaXJlY3RpdmUoJ25hdmJhcicsIG5hdmJhcik7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbmF2YmFyKCkge1xuICAgIGxpbmtGdW5jLiRpbmplY3QgPSBbXCJzY29wZVwiLCBcImVsXCIsIFwiYXR0clwiLCBcImN0cmxcIl07XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJ2FwcC9uYXZiYXIvbmF2YmFyLmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHt9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IG5hdmJhckNvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICBuYXZiYXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJ107XG4gICAgXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gbmF2YmFyQ29udHJvbGxlcigkc2NvcGUsICRsb2cpIHtcbiAgICBcdC8vdmFyIHZtID0gdGhpcztcblx0fVxuXG5cdHJldHVybiBkaXJlY3RpdmU7XG59IiwiYW5ndWxhclxuXHQubW9kdWxlKCdtYXJrZXRSZWNpZXB0Jylcblx0LmRpcmVjdGl2ZSgncmVjaWVwdEZvcm0nLCByZWNpZXB0Rm9ybSk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gcmVjaWVwdEZvcm0oKSB7XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJ2FwcC9mb3JtL2Zvcm0uZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0ZGF0YTogJz0nXG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiByZWNpZXB0Rm9ybSxcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIHJlY2llcHRGb3JtLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJ107XG4gICAgXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gcmVjaWVwdEZvcm0oJHNjb3BlLCAkbG9nKSB7XG5cdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHRvdGFsRmllbGRzID0gMDtcblx0XHR2YXIgZmllbGRzSGFzaCA9IHt9O1xuXG5cdFx0Ly9zZXQgdmlldyBtb2RlbCB2YWx1ZXNcblx0XHR2bS5jdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cdFx0dm1bJ2lucHV0cyddID0ge307XG5cdFx0dm1bJ2FwcHJvdmFscyddID0ge307XG5cdFx0dm1bJ3N1Ym1pdEJ0bkNsYXNzZXMnXSA9IHtcblx0XHRcdFwiYnRuXCI6dHJ1ZSxcblx0XHRcdFwiYnRuLWRhbmdlclwiOnRydWUsXG5cdFx0XHRcImJ0bi1zdWNjZXNzXCI6ZmFsc2UsXG5cdFx0XHRcImNvbC14cy0xMlwiOnRydWUsXG5cdFx0XHRcImNvbC1zbS0xMlwiOnRydWUsXG5cdFx0XHRcImNvbC1tZC0xMlwiOnRydWUsXG5cdFx0XHRcImNvbC1sZy0xMlwiOnRydWVcblx0XHR9XG5cblx0XHQvL2NyZWF0ZSB0aGUgbmVlZGVkIG9iamVjdHNcblx0XHRPYmplY3Qua2V5cyh2bS5kYXRhLnF1ZXN0aW9ucykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdHZhciBuYW1lID0gdm0uZGF0YS5xdWVzdGlvbnNba2V5XS5uYW1lO1xuXG5cdFx0XHQvL2FkZCBhcHByb3ZhbCB2YWx1ZXNcblx0XHRcdHZtLmFwcHJvdmFsc1tuYW1lXSA9IHtcblx0XHRcdFx0XCJhZGRyZXNzZWRcIjpmYWxzZSxcblx0XHRcdFx0XCJ2YWx1ZVwiOm51bGwsXG5cdFx0XHRcdFwidGV4dFwiOidPSz8nXG5cdFx0XHR9XG5cblx0XHRcdC8vYWRkIGlucHV0IHZhbHVlc1xuXHRcdFx0dm0uaW5wdXRzW25hbWVdID0ge307XG5cdFx0XHR2bS5pbnB1dHNbbmFtZV0udmFsdWUgPSAnJztcblx0XHRcdHZtLmlucHV0c1tuYW1lXS5zdWdnZXN0aW9uID0gJzQxNSc7XG5cblx0XHRcdC8vYnVpbGQgZmllbGRzIGhhc2hcblx0XHRcdGZpZWxkc0hhc2hbbmFtZV0gPSB0b3RhbEZpZWxkcztcblxuXHRcdFx0Ly9pbmNyaW1lbnQgZmllbGRzIGNvdW50XG5cdFx0XHR0b3RhbEZpZWxkcysrO1xuXG5cdFx0fSk7XG5cblx0XHQvL2xpc3QgdGhlIG9iamVjdHNcblx0XHQkbG9nLmluZm8odm0uaW5wdXRzKTtcblxuXHRcdC8vYWRkIHN1Z2dlc3Rpb24gdmFsdWVzXG5cdFx0dm0uaW5wdXRzWydNYXJrZXQnXS5zdWdnZXN0aW9uID0gJ1N1cmYgQ2l0eSc7XG5cdFx0dm0uaW5wdXRzWydOYW1lJ10uc3VnZ2VzdGlvbiA9ICdBaG1lZCc7XG5cdFx0dm0uaW5wdXRzWydHcm9zcyddLnN1Z2dlc3Rpb24gPSA0MTU7XG5cdFx0dm0uaW5wdXRzWydGZWUnXS5zdWdnZXN0aW9uID0gNDI7XG5cdFx0dm0uaW5wdXRzWydQYXknXS5zdWdnZXN0aW9uID0gODM7XG5cdFx0dm0uaW5wdXRzWydSZWNpZXB0cyddLnN1Z2dlc3Rpb24gPSAxMDtcblx0XHR2bS5pbnB1dHNbJ0JhbmsnXS5zdWdnZXN0aW9uID0gNjA7XG5cdFx0dm0uaW5wdXRzWydEdWUnXS5zdWdnZXN0aW9uID0gMjIwO1xuXG5cdFx0ZnVuY3Rpb24gdW5sb2NrU3VibWl0QnRuKCkge1xuXHRcdFx0Ly9cblx0XHRcdCRsb2cuaW5mbygnVW5sb2NraW5nIGJ0bicpO1xuXHRcdFx0dm0uc3VibWl0QnRuQ2xhc3Nlc1snYnRuLWRhbmdlciddID0gZmFsc2U7XG5cdFx0XHR2bS5zdWJtaXRCdG5DbGFzc2VzWydidG4tc3VjY2VzcyddID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBsb2NrU3VibWl0QnRuKCkge1xuXHRcdFx0Ly9cblx0XHRcdCRsb2cuaW5mbygnTG9ja2luZyBidG4nKTtcblx0XHRcdHZtLnN1Ym1pdEJ0bkNsYXNzZXNbJ2J0bi1kYW5nZXInXSA9IHRydWU7XG5cdFx0XHR2bS5zdWJtaXRCdG5DbGFzc2VzWydidG4tc3VjY2VzcyddID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gY291bnRBcHByb3ZlZCgpIHtcblx0XHRcdHZhciBudW1iZXJPZiA9IDA7XG5cblx0XHRcdE9iamVjdC5rZXlzKHZtLmRhdGEucXVlc3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHQvL2RlZmluZSB2YXJpYWJsZVxuXHRcdFx0XHR2YXIgaXNBcHByb3ZlZCA9IHZtLmRhdGEucXVlc3Rpb25zW2tleV0uYXBwcm92YWxzLmFkZHJlc3NlZDtcblx0XHRcdFx0Ly9jaGVjayB2YWx1ZVxuXHRcdFx0XHRpZihpc0FwcHJvdmVkKSBudW1iZXJPZisrO1xuXHRcdFx0fSk7XG5cblx0XHRcdCRsb2cuaW5mbyhudW1iZXJPZiwgdG90YWxGaWVsZHMsbnVtYmVyT2Y9PXRvdGFsRmllbGRzKTtcblx0XHRcdGlmKG51bWJlck9mPT10b3RhbEZpZWxkcykgdW5sb2NrU3VibWl0QnRuKCk7XG5cdFx0XHRlbHNlIGxvY2tTdWJtaXRCdG4oKTtcblxuXHRcdFx0cmV0dXJuIG51bWJlck9mO1xuXHRcdH1cblxuXHRcdHZtLnJlZnJlc2hBcHByb3ZhbHMgPSBmdW5jdGlvbigpIHtcblx0XHRcdC8vbG9vcCB0aHJvdWdoIGFsbCBxdWVzdGlvbnNcblx0XHRcdE9iamVjdC5rZXlzKHZtLmRhdGEucXVlc3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHR2YXIgcmVjb3JkTmFtZSA9IHZtLmRhdGEucXVlc3Rpb25zW2tleV0ubmFtZTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vcmVzZXQgc3VnZ2VzdGlvbnNcblxuXHRcdFx0XHQvL3Jlc2V0IHZhbHVlc1xuXHRcdFx0XHR2bS5pbnB1dHNbcmVjb3JkTmFtZV0udmFsdWUgPSAnJztcblxuXHRcdFx0XHQvL3NldCB2YWx1ZXNcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5hcHByb3ZhbHMuYWRkcmVzc2VkID0gZmFsc2U7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uYXBwcm92YWxzLnZhbHVlID0gbnVsbDtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5hcHByb3ZhbHMudGV4dCA9IFwiT0s/XCI7XG5cblx0XHRcdFx0Ly9zZXQgY2xhc3Nlc1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmNsYXNzZXMuYXBwcm92YWxEaXZbJ3JvdW5kLWJ1dHRvbi1jaXJjbGUtZnJlZSddID0gdHJ1ZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWFwcHJvdmVkJ10gPSBmYWxzZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLXJldmlzZWQnXSA9IGZhbHNlO1xuXHRcdFx0XHRcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmlucHV0RGl2WydoYXMtc3VjY2VzcyddID0gZmFsc2U7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uY2xhc3Nlcy5pbnB1dERpdlsnaGFzLXdhcm5pbmcnXSA9IGZhbHNlO1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmNsYXNzZXMuaW5wdXREaXZbJ2hhcy1kYW5nZXInXSA9IGZhbHNlO1xuXHRcdFx0fSk7XG5cblx0XHRcdGNvdW50QXBwcm92ZWQoKTtcblx0XHR9XG5cblx0XHR2bS5jaGFuZ2VkID0gZnVuY3Rpb24oZmllbGROYW1lKSB7XG5cdFx0XHR2YXIgcmVjb3JkTnVtID0gZmllbGRzSGFzaFtmaWVsZE5hbWVdO1xuXHRcdFx0Ly9ub3RpZnkgdGhlIHJlY29yZCBiZWluZyBjaGFuZ2VkXG5cdFx0XHQkbG9nLmluZm8oZmllbGROYW1lKTtcblxuXHRcdFx0Ly91cGRhdGUgdGhlIGFwcHJvdmFsIGJ1dHRvblxuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMuYWRkcmVzc2VkID0gdHJ1ZTtcblx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLnZhbHVlID0gdHJ1ZTtcblx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLnRleHQgPSBcIk5PIVwiO1xuXG5cdFx0XHQvL2NoYW5nZSB0aGUgY2xhc3Ncblx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uY2xhc3Nlcy5hcHByb3ZhbERpdlsncm91bmQtYnV0dG9uLWNpcmNsZS1mcmVlJ10gPSBmYWxzZTtcblx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uY2xhc3Nlcy5hcHByb3ZhbERpdlsncm91bmQtYnV0dG9uLWNpcmNsZS1yZXZpc2VkJ10gPSB0cnVlO1xuXHRcdFx0XG5cdFx0XHQvL2NoYW5nZSB0aGUgaW5wdXQgY2xhc3Ncblx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uY2xhc3Nlcy5pbnB1dERpdlsnaGFzLWRhbmdlciddID0gdHJ1ZTtcblxuXHRcdFx0Y291bnRBcHByb3ZlZCgpO1xuXHRcdH1cblxuXHRcdHZtLmFwcHJvdmVGaWVsZCA9IGZ1bmN0aW9uKGZpZWxkTmFtZSkge1xuXHRcdFx0dmFyIHJlY29yZE51bSA9IGZpZWxkc0hhc2hbZmllbGROYW1lXTtcblx0XHRcdHZhciBpc0FwcHJvdmVkID0gdm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMuYWRkcmVzc2VkO1xuXHRcdFx0XHRcblx0XHRcdGlmKCFpc0FwcHJvdmVkKSB7XG5cblx0XHRcdFx0Ly91cGRhdGUgdGhlIHZhbHVlc1xuXHRcdFx0XHR2bS5pbnB1dHNbZmllbGROYW1lXS52YWx1ZSA9IHZtLmlucHV0c1tmaWVsZE5hbWVdLnN1Z2dlc3Rpb247XG5cblx0XHRcdFx0Ly91cGRhdGUgdGhlIGJ1dHRvblxuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy5hZGRyZXNzZWQgPSB0cnVlO1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy52YWx1ZSA9IHRydWU7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLnRleHQgPSBcIllFUyFcIjtcblx0XHRcdFx0XG5cdFx0XHRcdC8vY2hhbmdlIHRoZSBjbGFzc1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmNsYXNzZXMuYXBwcm92YWxEaXZbJ3JvdW5kLWJ1dHRvbi1jaXJjbGUtZnJlZSddID0gZmFsc2U7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uY2xhc3Nlcy5hcHByb3ZhbERpdlsncm91bmQtYnV0dG9uLWNpcmNsZS1hcHByb3ZlZCddID0gdHJ1ZTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vY2hhbmdlIHRoZSBpbnB1dCBjbGFzc1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmNsYXNzZXMuaW5wdXREaXZbJ2hhcy1zdWNjZXNzJ10gPSB0cnVlO1xuXG5cdFx0XHRcdGNvdW50QXBwcm92ZWQoKTtcblx0XHRcdFx0XG5cdFx0XHR9XG5cblx0XHRcdCRsb2cuaW5mbyhmaWVsZE5hbWUpO1xuXG5cdFx0fVxuXG5cdFx0dm0uc3VibWl0Rm9ybSA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRpZihjb3VudEFwcHJvdmVkKCkgPT0gdG90YWxGaWVsZHMpXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdzdWJtaXR0ZWQhJyk7XG5cdFx0XHRlbHNlIFxuXHRcdFx0XHRjb25zb2xlLmxvZygnbmVlZCB0byBmaW5pc2ggdGhlIGZpZWxkcycpO1xuXG5cdFx0XHRcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZGlyZWN0aXZlO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtYXJrZXRSZWNpZXB0JylcbiAgICAuY29udHJvbGxlcignbGFuZGluZ0NvbnRyb2xsZXInLCBsYW5kaW5nQ29udHJvbGxlcik7XG5cbmxhbmRpbmdDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbGFuZGluZ0NvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cblx0dm0ucmVkaXJlY3RUbyA9IGZ1bmN0aW9uKGZvcm1OYW1lKSB7XG5cdFx0JGxvZy5pbmZvKCdjbGlja2VkJywgZm9ybU5hbWUpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvJytmb3JtTmFtZSk7XG5cdH1cbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWFya2V0UmVjaWVwdCcpXG4gICAgLmNvbnRyb2xsZXIoJ21hcmtldFJlY2llcHRDb250cm9sbGVyJywgbWFya2V0UmVjaWVwdENvbnRyb2xsZXIpO1xuXG5tYXJrZXRSZWNpZXB0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJ2JhY2tlbmRTcnZjJywgJ2Zvcm1EYXRhJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbWFya2V0UmVjaWVwdENvbnRyb2xsZXIoJGxvZywgYmFja2VuZFNydmMsIGZvcm1EYXRhKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZtLmRhdGEgPSBmb3JtRGF0YTtcblxuXHR2YXIgdGl0bGVDbGFzc2VzID0ge1xuXHRcdCdjb2wteHMtNSc6dHJ1ZSxcblx0XHQnY29sLXNtLTUnOnRydWUsXG5cdFx0J2NvbC1tZC01Jzp0cnVlLFxuXHRcdCdjb2wtbGctNSc6dHJ1ZVx0XHRcblx0fTtcblxuXHR2YXIgaW5wdXRDbGFzc2VzID0ge1xuXHRcdCdjb2wteHMtNyc6dHJ1ZSxcblx0XHQnY29sLXNtLTcnOnRydWUsXG5cdFx0J2NvbC1tZC03Jzp0cnVlLFxuXHRcdCdjb2wtbGctNyc6dHJ1ZVxuXHR9O1xuXG59IiwiYW5ndWxhclxuXHQubW9kdWxlKCdtYXJrZXRSZWNpZXB0Jylcblx0LmRpcmVjdGl2ZSgnbmF2YmFyJywgbmF2YmFyKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBuYXZiYXIoKSB7XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJ2FwcC9uYXZiYXIvbmF2YmFyLmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHt9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IG5hdmJhckNvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICBuYXZiYXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJ107XG4gICAgXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gbmF2YmFyQ29udHJvbGxlcigkc2NvcGUsICRsb2cpIHtcbiAgICBcdC8vdmFyIHZtID0gdGhpcztcblx0fVxuXG5cdHJldHVybiBkaXJlY3RpdmU7XG59IiwiYW5ndWxhclxuXHQubW9kdWxlKCdtYXJrZXRSZWNpZXB0JywgW1xuXHRcdCduZ1JvdXRlJ1xuXHRdKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
