function config(e){e.when("/",{templateUrl:"app/landing/landing.htm",controller:"landingController",controllerAs:"vm",resolve:{loadData:loadData}}).when("/marketReciept",{templateUrl:"app/marketReciept/marketReciept.htm",controller:"marketRecieptController",controllerAs:"vm",resolve:{formData:["backendSrvc",function(e){return e.getFormData("marketReciept")}]}}).otherwise({redirectTo:"/"})}function loadData(e){e.loadAllForms()}function landingController(e,t){var a=this;a.redirectTo=function(a){e.info("clicked",a),t.path("/"+a)}}function backendSrvc(e,t){function a(e){return new Promise(function(a,n){t({method:"GET",url:"assets/"+e}).then(function(e){a(e.data)},function(e){console.log("Error:",e)})})}function n(a){return e.info("got this in _post",a),new Promise(function(e,n){var s=t.post("forms/marketReciept",a).then(function(t){e("success")},function(t){e("error")});console.log(s)})}function s(e){var t=this;t.allForms={marketReciept:"marketReciept.json"};var a=t.allForms[e];return new Promise(function(n,s){"undefined"!=typeof t[e]?n(t[e]):t._get(a).then(function(a){t[e]=a,n(t[e])})})}function o(){var e=this;e.allForms={marketReciept:"marketReciept.json"},console.log(e.allForms),Object.keys(e.allForms).forEach(function(t){var a=e.allForms[t];e._get(a).then(function(a){e[t]=a.data})})}function r(t){var a=this;e.info("got this",t),a._post(t).then(function(e){console.log("response:",e)})}var i={_get:a,_post:n,getFormData:s,loadAllForms:o,submitFormData:r};return i}function recieptForm(){function e(e,t,a,n){}function t(e,t,a){function n(){i.submitBtnClasses["btn-danger"]=!1,i.submitBtnClasses["btn-success"]=!0}function s(){i.submitBtnClasses["btn-danger"]=!0,i.submitBtnClasses["btn-success"]=!1}function o(){var e=0;return Object.keys(i.data.questions).forEach(function(t){var a=i.data.questions[t].approvals.addressed;a&&e++}),e==l?n():s(),e}function r(){var e=document.getElementById("recieptImage"),t=document.getElementById("Photo").files[0],a=new FileReader,n=null;a.addEventListener("load",function(){n=a.result,e.src=n},!1),t&&(a.readAsDataURL(t),i.inputs.Photo={src:"Market_Reciept.jpg",binary:n})}var i=this,l=0,c={};i.currentDate=new Date,i.uploadedImage={src:"Market_Image.jpg",binary:null},i.inputs={},i.approvals={},i.submitBtnClasses={btn:!0,"btn-danger":!0,"btn-success":!1,"col-xs-12":!0,"col-sm-12":!0,"col-md-12":!0,"col-lg-12":!0},Object.keys(i.data.questions).forEach(function(e){var t=i.data.questions[e].name;i.approvals[t]={addressed:!1,value:null,text:"OK?"},i.inputs[t]={},i.inputs[t].value="",i.inputs[t].suggestion="415",c[t]=l,l++}),i.inputs.Market.suggestion="Surf City",i.inputs.Name.suggestion="Ahmed",i.inputs.Gross.suggestion=415,i.inputs.Fee.suggestion=42,i.inputs.Pay.suggestion=83,i.inputs.Reciepts.suggestion=10,i.inputs.Bank.suggestion=60,i.inputs.Due.suggestion=220,i.refreshApprovals=function(){Object.keys(i.data.questions).forEach(function(e){var t=i.data.questions[e].name;i.inputs[t].value="",i.data.questions[e].approvals.addressed=!1,i.data.questions[e].approvals.value=null,i.data.questions[e].approvals.text="OK?",i.data.questions[e].classes.approvalDiv["round-button-circle-free"]=!0,i.data.questions[e].classes.approvalDiv["round-button-circle-approved"]=!1,i.data.questions[e].classes.approvalDiv["round-button-circle-revised"]=!1,i.data.questions[e].classes.inputDiv["has-success"]=!1,i.data.questions[e].classes.inputDiv["has-warning"]=!1,i.data.questions[e].classes.inputDiv["has-danger"]=!1}),o()},i.changed=function(e){var t=c[e];i.data.questions[t].approvals.addressed=!0,i.data.questions[t].approvals.value=!0,i.data.questions[t].approvals.text="NO!",i.data.questions[t].classes.approvalDiv["round-button-circle-free"]=!1,i.data.questions[t].classes.approvalDiv["round-button-circle-revised"]=!0,i.data.questions[t].classes.inputDiv["has-danger"]=!0,o()},i.approveField=function(e){var t=c[e],a=i.data.questions[t].approvals.addressed;a||(i.inputs[e].value=i.inputs[e].suggestion,i.data.questions[t].approvals.addressed=!0,i.data.questions[t].approvals.value=!0,i.data.questions[t].approvals.text="YES!",i.data.questions[t].classes.approvalDiv["round-button-circle-free"]=!1,i.data.questions[t].classes.approvalDiv["round-button-circle-approved"]=!0,i.data.questions[t].classes.inputDiv["has-success"]=!0,o())},e.photoAdded=function(){var a=c.Photo;r(),t.info(i.inputs.Photo),i.data.questions[a].approvals.addressed=!0,i.data.questions[a].approvals.value=!0,i.data.questions[a].classes.inputDiv["has-success"]=!0,o(),e.$apply()},i.submitForm=function(){if(o()==l){var e={};Object.keys(i.inputs).forEach(function(t){"Photo"!==t?"number"==typeof i.inputs[t].value?e[t]=100*i.inputs[t].value:e[t]=i.inputs[t].value:e[t]=i.inputs[t]}),a.submitFormData(e),console.log("submitted!")}else console.log("need to finish the fields")}}e.$inject=["scope","el","attr","ctrl"];var a={restrict:"AECM",templateUrl:"app/form/form.directive.htm",replace:!0,scope:{data:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$scope","$log","backendSrvc"],a}function marketRecieptController(e,t,a){var n=this;n.data=a}function navbar(){function e(e,t,a,n){}function t(e,t){}e.$inject=["scope","el","attr","ctrl"];var a={restrict:"AECM",templateUrl:"app/navbar/navbar.directive.htm",replace:!0,scope:{},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$scope","$log"],a}config.$inject=["$routeProvider"],loadData.$inject=["backendSrvc"],angular.module("marketReciept",["ngRoute"]),angular.module("marketReciept").config(config),angular.module("marketReciept").controller("landingController",landingController),landingController.$inject=["$log","$location"],angular.module("marketReciept").factory("backendSrvc",backendSrvc),backendSrvc.$inject=["$log","$http"],angular.module("marketReciept").directive("recieptForm",recieptForm),angular.module("marketReciept").controller("marketRecieptController",marketRecieptController),marketRecieptController.$inject=["$log","backendSrvc","formData"],angular.module("marketReciept").directive("navbar",navbar);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9yb3V0ZS1jb25maWcuanMiLCJhcHAvbGFuZGluZy9sYW5kaW5nLmNvbnRyb2xsZXIuanMiLCJhcHAvYmFja2VuZFNydmMvYmFja2VuZFNydmMuanMiLCJhcHAuanMiLCJhcHAvZm9ybS9mb3JtLmRpcmVjdGl2ZS5qcyIsImFwcC9tYXJrZXRSZWNpZXB0L21hcmtldFJlY2llcHQuY29udHJvbGxlci5qcyIsImFwcC9uYXZiYXIvbmF2YmFyLmRpcmVjdGl2ZS5qcyIsImFwcC5tb2R1bGUuanMiXSwibmFtZXMiOlsiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwicmVzb2x2ZSIsImxvYWREYXRhIiwiZm9ybURhdGEiLCJiYWNrZW5kU3J2YyIsImdldEZvcm1EYXRhIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImxvYWRBbGxGb3JtcyIsImxhbmRpbmdDb250cm9sbGVyIiwiJGxvZyIsIiRsb2NhdGlvbiIsInZtIiwidGhpcyIsImZvcm1OYW1lIiwiaW5mbyIsInBhdGgiLCIkaHR0cCIsIl9nZXQiLCJmaWxlbmFtZSIsIlByb21pc2UiLCJyZWplY3QiLCJtZXRob2QiLCJ1cmwiLCJ0aGVuIiwicmVzcG9uc2UiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsIl9wb3N0IiwicmVzdWx0IiwicG9zdCIsImZvcm0iLCJzZXJ2aWNlIiwiYWxsRm9ybXMiLCJtYXJrZXRSZWNpZXB0IiwicmVqIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJzdWJtaXRGb3JtRGF0YSIsInJlY2llcHRGb3JtIiwibGlua0Z1bmMiLCJzY29wZSIsImVsIiwiYXR0ciIsImN0cmwiLCIkc2NvcGUiLCJ1bmxvY2tTdWJtaXRCdG4iLCJzdWJtaXRCdG5DbGFzc2VzIiwibG9ja1N1Ym1pdEJ0biIsImNvdW50QXBwcm92ZWQiLCJudW1iZXJPZiIsInF1ZXN0aW9ucyIsImtleSIsImlzQXBwcm92ZWQiLCJhcHByb3ZhbHMiLCJhZGRyZXNzZWQiLCJ0b3RhbEZpZWxkcyIsImdldFBob3RvIiwicHJldmlldyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJmaWxlIiwiZmlsZXMiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwiaW1hZ2ViaW5hcnkiLCJhZGRFdmVudExpc3RlbmVyIiwic3JjIiwicmVhZEFzRGF0YVVSTCIsImlucHV0cyIsImJpbmFyeSIsImZpZWxkc0hhc2giLCJjdXJyZW50RGF0ZSIsIkRhdGUiLCJ1cGxvYWRlZEltYWdlIiwiYnRuIiwiYnRuLWRhbmdlciIsImJ0bi1zdWNjZXNzIiwiY29sLXhzLTEyIiwiY29sLXNtLTEyIiwiY29sLW1kLTEyIiwiY29sLWxnLTEyIiwibmFtZSIsInZhbHVlIiwidGV4dCIsInN1Z2dlc3Rpb24iLCJyZWZyZXNoQXBwcm92YWxzIiwicmVjb3JkTmFtZSIsImNsYXNzZXMiLCJhcHByb3ZhbERpdiIsImlucHV0RGl2IiwiY2hhbmdlZCIsImZpZWxkTmFtZSIsInJlY29yZE51bSIsImFwcHJvdmVGaWVsZCIsInBob3RvQWRkZWQiLCIkYXBwbHkiLCJzdWJtaXRGb3JtIiwiZGVsaXZlcnlPYmplY3QiLCIkaW5qZWN0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwibGluayIsImJpbmRUb0NvbnRyb2xsZXIiLCJtYXJrZXRSZWNpZXB0Q29udHJvbGxlciIsIm5hdmJhciIsIm5hdmJhckNvbnRyb2xsZXIiLCJhbmd1bGFyIiwibW9kdWxlIiwiZmFjdG9yeSJdLCJtYXBwaW5ncyI6IkFBSUEsUUFBQUEsUUFBQUMsR0FDQUEsRUFDQUMsS0FBQSxLQUNBQyxZQUFBLDBCQUNBQyxXQUFBLG9CQUNBQyxhQUFBLEtBQ0FDLFNBQ0FDLFNBQUFBLFlBR0FMLEtBQUEsa0JBQ0FDLFlBQUEsc0NBQ0FDLFdBQUEsMEJBQ0FDLGFBQUEsS0FDQUMsU0FDQUUsVUFBQSxjQUFBLFNBQUFDLEdBRUEsTUFBQUEsR0FBQUMsWUFBQSxzQkFJQUMsV0FDQUMsV0FBQSxN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RyxTQUFBLEVBQ0E3RCxPQUNBakIsS0FBQSxLQUVBK0UsS0FBQS9ELEVBQ0EzQyxXQUFBMEMsRUFDQXpDLGFBQUEsS0FDQTBHLGtCQUFBLEVBc1JBLE9BL1FBakUsR0FBQTRELFNBQUEsU0FBQSxPQUFBLGVBK1FBQyxFQy9SQSxRQUFBSyx5QkFBQWpHLEVBQUFOLEVBQUFELEdBQ0EsR0FBQVMsR0FBQUMsSUFDQUQsR0FBQWMsS0FBQXZCLEVGdWVBLFFBQVN5RyxVRzlkVCxRQUFBbEUsR0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsSUFNQSxRQUFBK0QsR0FBQTlELEVBQUFyQyxJSHlkSWdDLEVBQVMyRCxTQUFXLFFBQVMsS0FBTSxPQUFRLE9HM2UvQyxJQUFBQyxJQUNBQyxTQUFBLE9BQ0F6RyxZQUFBLGtDQUNBMEcsU0FBQSxFQUNBN0QsU0FDQThELEtBQUEvRCxFQUNBM0MsV0FBQThHLEVBQ0E3RyxhQUFBLEtBQ0EwRyxrQkFBQSxFQWNBLE9BUEFHLEdBQUFSLFNBQUEsU0FBQSxRQU9BQyxFSDNCQTNHLE9BQU8wRyxTQUFXLGtCQUNsQm5HLFNBQVNtRyxTQUFXLGVJRnBCUyxRQUNBQyxPQUFBLGlCQUNBLFlQRkFELFFBQ0FDLE9BQUEsaUJBQ0FwSCxPQUFBQSxRQ0ZBbUgsUUFDQUMsT0FBQSxpQkFDQWhILFdBQUEsb0JBQUFVLG1CQUVBQSxrQkFBQTRGLFNBQUEsT0FBQSxhQ0pBUyxRQUNBQyxPQUFBLGlCQUNBQyxRQUFBLGNBQUE1RyxhQUVBQSxZQUFBaUcsU0FBQSxPQUFBLFNFSkFTLFFBQ0FDLE9BQUEsaUJBQ0FULFVBQUEsY0FBQTdELGFDRkFxRSxRQUNBQyxPQUFBLGlCQUNBaEgsV0FBQSwwQkFBQTRHLHlCQUVBQSx3QkFBQU4sU0FBQSxPQUFBLGNBQUEsWUNKQVMsUUFDQUMsT0FBQSxpQkFDQVQsVUFBQSxTQUFBTSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyXG5cdC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuXHQuY29uZmlnKGNvbmZpZyk7XG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGNvbmZpZygkcm91dGVQcm92aWRlcikge1xuXHQkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9sYW5kaW5nL2xhbmRpbmcuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ2xhbmRpbmdDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7XHQvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgXHRsb2FkRGF0YTpsb2FkRGF0YVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL21hcmtldFJlY2llcHQnLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL21hcmtldFJlY2llcHQvbWFya2V0UmVjaWVwdC5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnbWFya2V0UmVjaWVwdENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgXHRmb3JtRGF0YTogZnVuY3Rpb24oYmFja2VuZFNydmMpIHtcbiAgICAgICAgXHRcdC8vcmV0dXJuIHsncmVzb2x2ZVRlc3QnOidnb29kIHRlc3QnfTtcbiAgICAgICAgXHRcdHJldHVybiBiYWNrZW5kU3J2Yy5nZXRGb3JtRGF0YSgnbWFya2V0UmVjaWVwdCcpO1xuICAgICAgICBcdH1cbiAgICAgICAgfVxuICAgIH0pXG4gICAgLm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBsb2FkRGF0YShiYWNrZW5kU3J2Yykge1xuXHRiYWNrZW5kU3J2Yy5sb2FkQWxsRm9ybXMoKTtcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWFya2V0UmVjaWVwdCcpXG4gICAgLmNvbnRyb2xsZXIoJ2xhbmRpbmdDb250cm9sbGVyJywgbGFuZGluZ0NvbnRyb2xsZXIpO1xuXG5sYW5kaW5nQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRsb2NhdGlvbiddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGxhbmRpbmdDb250cm9sbGVyKCRsb2csICRsb2NhdGlvbikge1xuXHR2YXIgdm0gPSB0aGlzO1xuXG5cdHZtLnJlZGlyZWN0VG8gPSBmdW5jdGlvbihmb3JtTmFtZSkge1xuXHRcdCRsb2cuaW5mbygnY2xpY2tlZCcsIGZvcm1OYW1lKTtcblx0XHQkbG9jYXRpb24ucGF0aCgnLycrZm9ybU5hbWUpO1xuXHR9XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuICAgIC5mYWN0b3J5KCdiYWNrZW5kU3J2YycsIGJhY2tlbmRTcnZjKTtcblxuYmFja2VuZFNydmMuJGluamVjdCA9IFsnJGxvZycsICckaHR0cCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGJhY2tlbmRTcnZjKCRsb2csICRodHRwKSB7XG5cdHZhciBzZXJ2aWNlID0gdGhpcztcblxuXHR2YXIgYmFja2VuZFNydmMgPSB7XG5cdFx0X2dldDpfZ2V0LFxuXHRcdF9wb3N0Ol9wb3N0LFxuXHRcdGdldEZvcm1EYXRhOmdldEZvcm1EYXRhLFxuXHRcdGxvYWRBbGxGb3Jtczpsb2FkQWxsRm9ybXMsXG5cdFx0c3VibWl0Rm9ybURhdGE6c3VibWl0Rm9ybURhdGFcblx0fTtcblxuXHRmdW5jdGlvbiBfZ2V0KGZpbGVuYW1lKSB7XG5cdFx0dmFyIHRoaXNSZXNwb25zZSA9IG51bGw7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdCRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdFx0dXJsOiAnYXNzZXRzLycgKyBmaWxlbmFtZVxuXHRcdFx0fSkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcblx0XHRcdFx0XG5cdFx0XHRcdHJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdFxuXHRcdFx0fSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnRXJyb3I6JyxyZXNwb25zZSk7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBfcG9zdChkYXRhKSB7XG5cblx0XHQkbG9nLmluZm8oJ2dvdCB0aGlzIGluIF9wb3N0JywgZGF0YSk7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdHZhciByZXN1bHQgPSAkaHR0cC5wb3N0KCdmb3Jtcy9tYXJrZXRSZWNpZXB0JywgZGF0YSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRyZXNvbHZlKCdzdWNjZXNzJyk7XG5cdFx0XHR9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XG5cdFx0XHRcdHJlc29sdmUoJ2Vycm9yJyk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc29sZS5sb2cocmVzdWx0KTtcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0Rm9ybURhdGEoZm9ybSkge1xuXHRcdHZhciBzZXJ2aWNlID0gdGhpcztcblxuXHRcdHNlcnZpY2UuYWxsRm9ybXMgPSB7XCJtYXJrZXRSZWNpZXB0XCI6J21hcmtldFJlY2llcHQuanNvbid9O1xuXG5cdFx0dmFyIHVybCA9IHNlcnZpY2UuYWxsRm9ybXNbZm9ybV07XG5cdFx0XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlaikge1xuXHRcdFx0Ly9jaGVjayBmb3IgZXhpc3RpbmcgdmFsdWVzXG5cdFx0XHRpZih0eXBlb2Ygc2VydmljZVtmb3JtXSAhPT0gJ3VuZGVmaW5lZCcpXG5cdFx0XHRcdHJlc29sdmUoc2VydmljZVtmb3JtXSk7XG5cdFx0XHRlbHNlIHsgXG5cdFx0XHRcdHNlcnZpY2UuX2dldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRzZXJ2aWNlW2Zvcm1dID0gcmVzcG9uc2U7XG5cdFx0XHRcdFx0cmVzb2x2ZShzZXJ2aWNlW2Zvcm1dKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHR9KTtcblx0XG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkQWxsRm9ybXMoKSB7XG5cdFx0dmFyIHNlcnZpY2UgPSB0aGlzO1xuXG5cdFx0c2VydmljZS5hbGxGb3JtcyA9IHtcIm1hcmtldFJlY2llcHRcIjonbWFya2V0UmVjaWVwdC5qc29uJ307XG5cdFxuXHRcdGNvbnNvbGUubG9nKHNlcnZpY2UuYWxsRm9ybXMpO1xuXG5cdFx0Ly9ydW4gdGhyb3VnaCBlYWNoIGZvcm1cblx0XHRPYmplY3Qua2V5cyhzZXJ2aWNlLmFsbEZvcm1zKS5mb3JFYWNoKGZ1bmN0aW9uKGZvcm0pIHtcblx0XHRcdHZhciB1cmwgPSBzZXJ2aWNlLmFsbEZvcm1zW2Zvcm1dO1xuXG5cdFx0XHRzZXJ2aWNlLl9nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdHNlcnZpY2VbZm9ybV0gPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gc3VibWl0Rm9ybURhdGEoZGF0YSkge1xuXHRcdHZhciBzZXJ2aWNlID0gdGhpcztcblxuXHRcdC8vbm90aWZ5IHRoZSB1c2VyXG5cdFx0JGxvZy5pbmZvKCdnb3QgdGhpcycsIGRhdGEpO1xuXG5cdFx0Ly9zdWJtaXQgZm9ybVxuXHRcdHNlcnZpY2UuX3Bvc3QoZGF0YSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ3Jlc3BvbnNlOicsIHJlc3BvbnNlKTtcblx0XHR9KTtcblxuXG5cdH1cblxuXHRyZXR1cm4gYmFja2VuZFNydmM7XG59IiwiXG5jb25maWcuJGluamVjdCA9IFtcIiRyb3V0ZVByb3ZpZGVyXCJdO1xubG9hZERhdGEuJGluamVjdCA9IFtcImJhY2tlbmRTcnZjXCJdO2FuZ3VsYXJcblx0Lm1vZHVsZSgnbWFya2V0UmVjaWVwdCcsIFtcblx0XHQnbmdSb3V0ZSdcblx0XSk7XG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWFya2V0UmVjaWVwdCcpXG5cdC5jb25maWcoY29uZmlnKTtcbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XG5cdCRyb3V0ZVByb3ZpZGVyXG4gICAgLndoZW4oJy8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2xhbmRpbmcvbGFuZGluZy5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnbGFuZGluZ0NvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHtcdC8qIEBuZ0luamVjdCAqL1xuICAgICAgICBcdGxvYWREYXRhOmxvYWREYXRhXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvbWFya2V0UmVjaWVwdCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvbWFya2V0UmVjaWVwdC9tYXJrZXRSZWNpZXB0Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdtYXJrZXRSZWNpZXB0Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICBcdGZvcm1EYXRhOiBbXCJiYWNrZW5kU3J2Y1wiLCBmdW5jdGlvbihiYWNrZW5kU3J2Yykge1xuICAgICAgICBcdFx0Ly9yZXR1cm4geydyZXNvbHZlVGVzdCc6J2dvb2QgdGVzdCd9O1xuICAgICAgICBcdFx0cmV0dXJuIGJhY2tlbmRTcnZjLmdldEZvcm1EYXRhKCdtYXJrZXRSZWNpZXB0Jyk7XG4gICAgICAgIFx0fV1cbiAgICAgICAgfVxuICAgIH0pXG4gICAgLm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBsb2FkRGF0YShiYWNrZW5kU3J2Yykge1xuXHRiYWNrZW5kU3J2Yy5sb2FkQWxsRm9ybXMoKTtcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtYXJrZXRSZWNpZXB0JylcbiAgICAuY29udHJvbGxlcignbGFuZGluZ0NvbnRyb2xsZXInLCBsYW5kaW5nQ29udHJvbGxlcik7XG5cbmxhbmRpbmdDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbGFuZGluZ0NvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cblx0dm0ucmVkaXJlY3RUbyA9IGZ1bmN0aW9uKGZvcm1OYW1lKSB7XG5cdFx0JGxvZy5pbmZvKCdjbGlja2VkJywgZm9ybU5hbWUpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvJytmb3JtTmFtZSk7XG5cdH1cbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtYXJrZXRSZWNpZXB0JylcbiAgICAuZmFjdG9yeSgnYmFja2VuZFNydmMnLCBiYWNrZW5kU3J2Yyk7XG5cbmJhY2tlbmRTcnZjLiRpbmplY3QgPSBbJyRsb2cnLCAnJGh0dHAnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBiYWNrZW5kU3J2YygkbG9nLCAkaHR0cCkge1xuXHR2YXIgc2VydmljZSA9IHRoaXM7XG5cblx0dmFyIGJhY2tlbmRTcnZjID0ge1xuXHRcdF9nZXQ6X2dldCxcblx0XHRfcG9zdDpfcG9zdCxcblx0XHRnZXRGb3JtRGF0YTpnZXRGb3JtRGF0YSxcblx0XHRsb2FkQWxsRm9ybXM6bG9hZEFsbEZvcm1zLFxuXHRcdHN1Ym1pdEZvcm1EYXRhOnN1Ym1pdEZvcm1EYXRhXG5cdH07XG5cblx0ZnVuY3Rpb24gX2dldChmaWxlbmFtZSkge1xuXHRcdHZhciB0aGlzUmVzcG9uc2UgPSBudWxsO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHRcdHVybDogJ2Fzc2V0cy8nICsgZmlsZW5hbWVcblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRyZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHRcblx0XHRcdH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ0Vycm9yOicscmVzcG9uc2UpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gX3Bvc3QoZGF0YSkge1xuXG5cdFx0JGxvZy5pbmZvKCdnb3QgdGhpcyBpbiBfcG9zdCcsIGRhdGEpO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHR2YXIgcmVzdWx0ID0gJGh0dHAucG9zdCgnZm9ybXMvbWFya2V0UmVjaWVwdCcsIGRhdGEpXG5cdFx0XHQudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcblx0XHRcdFx0cmVzb2x2ZSgnc3VjY2VzcycpO1xuXHRcdFx0fSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRyZXNvbHZlKCdlcnJvcicpO1xuXHRcdFx0fSk7XG5cblx0XHRcdGNvbnNvbGUubG9nKHJlc3VsdCk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldEZvcm1EYXRhKGZvcm0pIHtcblx0XHR2YXIgc2VydmljZSA9IHRoaXM7XG5cblx0XHRzZXJ2aWNlLmFsbEZvcm1zID0ge1wibWFya2V0UmVjaWVwdFwiOidtYXJrZXRSZWNpZXB0Lmpzb24nfTtcblxuXHRcdHZhciB1cmwgPSBzZXJ2aWNlLmFsbEZvcm1zW2Zvcm1dO1xuXHRcdFxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWopIHtcblx0XHRcdC8vY2hlY2sgZm9yIGV4aXN0aW5nIHZhbHVlc1xuXHRcdFx0aWYodHlwZW9mIHNlcnZpY2VbZm9ybV0gIT09ICd1bmRlZmluZWQnKVxuXHRcdFx0XHRyZXNvbHZlKHNlcnZpY2VbZm9ybV0pO1xuXHRcdFx0ZWxzZSB7IFxuXHRcdFx0XHRzZXJ2aWNlLl9nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0c2VydmljZVtmb3JtXSA9IHJlc3BvbnNlO1xuXHRcdFx0XHRcdHJlc29sdmUoc2VydmljZVtmb3JtXSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0fSk7XG5cdFxuXHR9XG5cblx0ZnVuY3Rpb24gbG9hZEFsbEZvcm1zKCkge1xuXHRcdHZhciBzZXJ2aWNlID0gdGhpcztcblxuXHRcdHNlcnZpY2UuYWxsRm9ybXMgPSB7XCJtYXJrZXRSZWNpZXB0XCI6J21hcmtldFJlY2llcHQuanNvbid9O1xuXHRcblx0XHRjb25zb2xlLmxvZyhzZXJ2aWNlLmFsbEZvcm1zKTtcblxuXHRcdC8vcnVuIHRocm91Z2ggZWFjaCBmb3JtXG5cdFx0T2JqZWN0LmtleXMoc2VydmljZS5hbGxGb3JtcykuZm9yRWFjaChmdW5jdGlvbihmb3JtKSB7XG5cdFx0XHR2YXIgdXJsID0gc2VydmljZS5hbGxGb3Jtc1tmb3JtXTtcblxuXHRcdFx0c2VydmljZS5fZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0XHRzZXJ2aWNlW2Zvcm1dID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHN1Ym1pdEZvcm1EYXRhKGRhdGEpIHtcblx0XHR2YXIgc2VydmljZSA9IHRoaXM7XG5cblx0XHQvL25vdGlmeSB0aGUgdXNlclxuXHRcdCRsb2cuaW5mbygnZ290IHRoaXMnLCBkYXRhKTtcblxuXHRcdC8vc3VibWl0IGZvcm1cblx0XHRzZXJ2aWNlLl9wb3N0KGRhdGEpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdyZXNwb25zZTonLCByZXNwb25zZSk7XG5cdFx0fSk7XG5cblxuXHR9XG5cblx0cmV0dXJuIGJhY2tlbmRTcnZjO1xufVxuYW5ndWxhclxuXHQubW9kdWxlKCdtYXJrZXRSZWNpZXB0Jylcblx0LmRpcmVjdGl2ZSgncmVjaWVwdEZvcm0nLCByZWNpZXB0Rm9ybSk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gcmVjaWVwdEZvcm0oKSB7XG4gICAgbGlua0Z1bmMuJGluamVjdCA9IFtcInNjb3BlXCIsIFwiZWxcIiwgXCJhdHRyXCIsIFwiY3RybFwiXTtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnYXBwL2Zvcm0vZm9ybS5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHRkYXRhOiAnPSdcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IHJlY2llcHRGb3JtLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgcmVjaWVwdEZvcm0uJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnYmFja2VuZFNydmMnXTtcbiAgICBcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiByZWNpZXB0Rm9ybSgkc2NvcGUsICRsb2csIGJhY2tlbmRTcnZjKSB7XG5cdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHRvdGFsRmllbGRzID0gMDtcblx0XHR2YXIgZmllbGRzSGFzaCA9IHt9O1xuXG5cdFx0Ly9zZXQgdmlldyBtb2RlbCB2YWx1ZXNcblx0XHR2bS5jdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cdFx0dm0udXBsb2FkZWRJbWFnZSA9IHtcblx0XHRcdHNyYzogJ01hcmtldF9JbWFnZS5qcGcnLFxuXHRcdFx0YmluYXJ5OiBudWxsXG5cdFx0fTtcblxuXHRcdHZtWydpbnB1dHMnXSA9IHt9O1xuXHRcdHZtWydhcHByb3ZhbHMnXSA9IHt9O1xuXHRcdHZtWydzdWJtaXRCdG5DbGFzc2VzJ10gPSB7XG5cdFx0XHRcImJ0blwiOnRydWUsXG5cdFx0XHRcImJ0bi1kYW5nZXJcIjp0cnVlLFxuXHRcdFx0XCJidG4tc3VjY2Vzc1wiOmZhbHNlLFxuXHRcdFx0XCJjb2wteHMtMTJcIjp0cnVlLFxuXHRcdFx0XCJjb2wtc20tMTJcIjp0cnVlLFxuXHRcdFx0XCJjb2wtbWQtMTJcIjp0cnVlLFxuXHRcdFx0XCJjb2wtbGctMTJcIjp0cnVlXG5cdFx0fVxuXG5cdFx0Ly9jcmVhdGUgdGhlIG5lZWRlZCBvYmplY3RzXG5cdFx0T2JqZWN0LmtleXModm0uZGF0YS5xdWVzdGlvbnMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHR2YXIgbmFtZSA9IHZtLmRhdGEucXVlc3Rpb25zW2tleV0ubmFtZTtcblxuXHRcdFx0Ly9hZGQgYXBwcm92YWwgdmFsdWVzXG5cdFx0XHR2bS5hcHByb3ZhbHNbbmFtZV0gPSB7XG5cdFx0XHRcdFwiYWRkcmVzc2VkXCI6ZmFsc2UsXG5cdFx0XHRcdFwidmFsdWVcIjpudWxsLFxuXHRcdFx0XHRcInRleHRcIjonT0s/J1xuXHRcdFx0fVxuXG5cdFx0XHQvL2FkZCBpbnB1dCB2YWx1ZXNcblx0XHRcdHZtLmlucHV0c1tuYW1lXSA9IHt9O1xuXHRcdFx0dm0uaW5wdXRzW25hbWVdLnZhbHVlID0gJyc7XG5cdFx0XHR2bS5pbnB1dHNbbmFtZV0uc3VnZ2VzdGlvbiA9ICc0MTUnO1xuXG5cdFx0XHQvL2J1aWxkIGZpZWxkcyBoYXNoXG5cdFx0XHRmaWVsZHNIYXNoW25hbWVdID0gdG90YWxGaWVsZHM7XG5cblx0XHRcdC8vaW5jcmltZW50IGZpZWxkcyBjb3VudFxuXHRcdFx0dG90YWxGaWVsZHMrKztcblxuXHRcdH0pO1xuXG5cdFx0Ly9saXN0IHRoZSBvYmplY3RzXG5cdFx0Ly8kbG9nLmluZm8odm0uaW5wdXRzKTtcblxuXHRcdC8vYWRkIHN1Z2dlc3Rpb24gdmFsdWVzXG5cdFx0dm0uaW5wdXRzWydNYXJrZXQnXS5zdWdnZXN0aW9uID0gJ1N1cmYgQ2l0eSc7XG5cdFx0dm0uaW5wdXRzWydOYW1lJ10uc3VnZ2VzdGlvbiA9ICdBaG1lZCc7XG5cdFx0dm0uaW5wdXRzWydHcm9zcyddLnN1Z2dlc3Rpb24gPSA0MTU7XG5cdFx0dm0uaW5wdXRzWydGZWUnXS5zdWdnZXN0aW9uID0gNDI7XG5cdFx0dm0uaW5wdXRzWydQYXknXS5zdWdnZXN0aW9uID0gODM7XG5cdFx0dm0uaW5wdXRzWydSZWNpZXB0cyddLnN1Z2dlc3Rpb24gPSAxMDtcblx0XHR2bS5pbnB1dHNbJ0JhbmsnXS5zdWdnZXN0aW9uID0gNjA7XG5cdFx0dm0uaW5wdXRzWydEdWUnXS5zdWdnZXN0aW9uID0gMjIwO1xuXG5cdFx0ZnVuY3Rpb24gdW5sb2NrU3VibWl0QnRuKCkge1xuXHRcdFx0Ly9cblx0XHRcdC8vJGxvZy5pbmZvKCdVbmxvY2tpbmcgYnRuJyk7XG5cdFx0XHR2bS5zdWJtaXRCdG5DbGFzc2VzWydidG4tZGFuZ2VyJ10gPSBmYWxzZTtcblx0XHRcdHZtLnN1Ym1pdEJ0bkNsYXNzZXNbJ2J0bi1zdWNjZXNzJ10gPSB0cnVlO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGxvY2tTdWJtaXRCdG4oKSB7XG5cdFx0XHQvL1xuXHRcdFx0Ly8kbG9nLmluZm8oJ0xvY2tpbmcgYnRuJyk7XG5cdFx0XHR2bS5zdWJtaXRCdG5DbGFzc2VzWydidG4tZGFuZ2VyJ10gPSB0cnVlO1xuXHRcdFx0dm0uc3VibWl0QnRuQ2xhc3Nlc1snYnRuLXN1Y2Nlc3MnXSA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNvdW50QXBwcm92ZWQoKSB7XG5cdFx0XHR2YXIgbnVtYmVyT2YgPSAwO1xuXG5cdFx0XHRPYmplY3Qua2V5cyh2bS5kYXRhLnF1ZXN0aW9ucykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0Ly9kZWZpbmUgdmFyaWFibGVcblx0XHRcdFx0dmFyIGlzQXBwcm92ZWQgPSB2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmFwcHJvdmFscy5hZGRyZXNzZWQ7XG5cdFx0XHRcdC8vY2hlY2sgdmFsdWVcblx0XHRcdFx0aWYoaXNBcHByb3ZlZCkgbnVtYmVyT2YrKztcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyRsb2cuaW5mbyhudW1iZXJPZiwgdG90YWxGaWVsZHMsIG51bWJlck9mPT10b3RhbEZpZWxkcyk7XG5cdFx0XHRpZihudW1iZXJPZj09dG90YWxGaWVsZHMpIHVubG9ja1N1Ym1pdEJ0bigpO1xuXHRcdFx0ZWxzZSBsb2NrU3VibWl0QnRuKCk7XG5cblx0XHRcdHJldHVybiBudW1iZXJPZjtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRQaG90bygpIHtcblx0XHRcdHZhciBwcmV2aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2llcHRJbWFnZScpXG5cdFx0XHR2YXIgZmlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdQaG90bycpLmZpbGVzWzBdO1xuXHRcdFx0dmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdFx0XHR2YXIgaW1hZ2ViaW5hcnkgPSBudWxsO1xuXG5cdFx0XHRyZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpbWFnZWJpbmFyeSA9IHJlYWRlci5yZXN1bHQ7XG5cdFx0XHRcdHByZXZpZXcuc3JjID0gaW1hZ2ViaW5hcnk7XG5cblx0XHRcdH0sIGZhbHNlKTtcblxuXHRcdFx0aWYgKGZpbGUpIHtcblx0XHRcdFx0Ly9wcmV2aWV3IHRoZSBpbWFnZVxuXHRcdFx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcblxuXHRcdFx0XHQvL3NhdmUgdGhlIHZhbHVlIHRvIHRoZSB2YXJpYWJsZVxuXHRcdFx0XHR2bS5pbnB1dHNbJ1Bob3RvJ10gPSB7XG5cdFx0XHRcdFx0c3JjOiAnTWFya2V0X1JlY2llcHQuanBnJyxcblx0XHRcdFx0XHRiaW5hcnk6IGltYWdlYmluYXJ5XG5cdFx0XHRcdH07XHRcdFx0XHRcblx0XHRcdH1cblxuXHRcdFx0LypyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0dmFyIGRhdGEgPSBlLnRhcmdldC5yZXN1bHQ7XG5cdFx0XHRcdFxuXHRcdFx0XHQkbG9nLmluZm8oJ2dvdCBoZXJlJyk7XG5cblx0XHRcdFx0Ly9zYXZlIHRoZSB2YWx1ZSB0byB0aGUgdmFyaWFibGVcblx0XHRcdFx0dm0uaW5wdXRzWydQaG90byddID0ge1xuXHRcdFx0XHRcdHNyYzogJ01hcmtldF9SZWNpZXB0LmpwZycsXG5cdFx0XHRcdFx0YmluYXJ5OiBkYXRhXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQkbG9nLmluZm8oJ2ZpbGUgbG9hZGVkJywgdm0uaW5wdXRzWydQaG90byddKTtcblx0XHRcdH1cblx0XHRcdCRsb2cuaW5mbygnZ290IGhlcmUnKTtcblx0XHRcdHIucmVhZEFzRGF0YVVSTChmaWxlKTsqL1xuXHRcdH1cblxuXHRcdHZtLnJlZnJlc2hBcHByb3ZhbHMgPSBmdW5jdGlvbigpIHtcblx0XHRcdC8vbG9vcCB0aHJvdWdoIGFsbCBxdWVzdGlvbnNcblx0XHRcdE9iamVjdC5rZXlzKHZtLmRhdGEucXVlc3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHR2YXIgcmVjb3JkTmFtZSA9IHZtLmRhdGEucXVlc3Rpb25zW2tleV0ubmFtZTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vcmVzZXQgc3VnZ2VzdGlvbnNcblxuXHRcdFx0XHQvL3Jlc2V0IHZhbHVlc1xuXHRcdFx0XHR2bS5pbnB1dHNbcmVjb3JkTmFtZV0udmFsdWUgPSAnJztcblxuXHRcdFx0XHQvL3NldCB2YWx1ZXNcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5hcHByb3ZhbHMuYWRkcmVzc2VkID0gZmFsc2U7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uYXBwcm92YWxzLnZhbHVlID0gbnVsbDtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5hcHByb3ZhbHMudGV4dCA9IFwiT0s/XCI7XG5cblx0XHRcdFx0Ly9zZXQgY2xhc3Nlc1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmNsYXNzZXMuYXBwcm92YWxEaXZbJ3JvdW5kLWJ1dHRvbi1jaXJjbGUtZnJlZSddID0gdHJ1ZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWFwcHJvdmVkJ10gPSBmYWxzZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLXJldmlzZWQnXSA9IGZhbHNlO1xuXHRcdFx0XHRcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmlucHV0RGl2WydoYXMtc3VjY2VzcyddID0gZmFsc2U7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uY2xhc3Nlcy5pbnB1dERpdlsnaGFzLXdhcm5pbmcnXSA9IGZhbHNlO1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmNsYXNzZXMuaW5wdXREaXZbJ2hhcy1kYW5nZXInXSA9IGZhbHNlO1xuXHRcdFx0fSk7XG5cblx0XHRcdGNvdW50QXBwcm92ZWQoKTtcblx0XHR9XG5cblx0XHR2bS5jaGFuZ2VkID0gZnVuY3Rpb24oZmllbGROYW1lKSB7XG5cdFx0XHR2YXIgcmVjb3JkTnVtID0gZmllbGRzSGFzaFtmaWVsZE5hbWVdO1xuXHRcdFx0Ly9ub3RpZnkgdGhlIHJlY29yZCBiZWluZyBjaGFuZ2VkXG5cdFx0XHQvLyRsb2cuaW5mbyhmaWVsZE5hbWUpO1xuXG5cdFx0XHQvL3VwZGF0ZSB0aGUgYXBwcm92YWwgYnV0dG9uXG5cdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy5hZGRyZXNzZWQgPSB0cnVlO1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMudmFsdWUgPSB0cnVlO1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMudGV4dCA9IFwiTk8hXCI7XG5cblx0XHRcdC8vY2hhbmdlIHRoZSBjbGFzc1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWZyZWUnXSA9IGZhbHNlO1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLXJldmlzZWQnXSA9IHRydWU7XG5cdFx0XHRcblx0XHRcdC8vY2hhbmdlIHRoZSBpbnB1dCBjbGFzc1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmlucHV0RGl2WydoYXMtZGFuZ2VyJ10gPSB0cnVlO1xuXG5cdFx0XHRjb3VudEFwcHJvdmVkKCk7XG5cdFx0fVxuXG5cdFx0dm0uYXBwcm92ZUZpZWxkID0gZnVuY3Rpb24oZmllbGROYW1lKSB7XG5cdFx0XHR2YXIgcmVjb3JkTnVtID0gZmllbGRzSGFzaFtmaWVsZE5hbWVdO1xuXHRcdFx0dmFyIGlzQXBwcm92ZWQgPSB2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy5hZGRyZXNzZWQ7XG5cdFx0XHRcdFxuXHRcdFx0aWYoIWlzQXBwcm92ZWQpIHtcblxuXHRcdFx0XHQvL3VwZGF0ZSB0aGUgdmFsdWVzXG5cdFx0XHRcdHZtLmlucHV0c1tmaWVsZE5hbWVdLnZhbHVlID0gdm0uaW5wdXRzW2ZpZWxkTmFtZV0uc3VnZ2VzdGlvbjtcblxuXHRcdFx0XHQvL3VwZGF0ZSB0aGUgYnV0dG9uXG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLmFkZHJlc3NlZCA9IHRydWU7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLnZhbHVlID0gdHJ1ZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMudGV4dCA9IFwiWUVTIVwiO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9jaGFuZ2UgdGhlIGNsYXNzXG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uY2xhc3Nlcy5hcHByb3ZhbERpdlsncm91bmQtYnV0dG9uLWNpcmNsZS1mcmVlJ10gPSBmYWxzZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWFwcHJvdmVkJ10gPSB0cnVlO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9jaGFuZ2UgdGhlIGlucHV0IGNsYXNzXG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uY2xhc3Nlcy5pbnB1dERpdlsnaGFzLXN1Y2Nlc3MnXSA9IHRydWU7XG5cblx0XHRcdFx0Y291bnRBcHByb3ZlZCgpO1xuXHRcdFx0XHRcblx0XHRcdH1cblxuXHRcdFx0Ly8kbG9nLmluZm8oZmllbGROYW1lKTtcblxuXHRcdH1cblxuXHRcdCRzY29wZS5waG90b0FkZGVkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgcmVjb3JkTnVtID0gZmllbGRzSGFzaFsnUGhvdG8nXTtcblxuXHRcdFx0Ly9nZXQgdGhlIHBob3RvXG5cdFx0XHRnZXRQaG90bygpO1xuXG5cdFx0XHQvL3VwZGF0ZSB0aGUgdmFsdWVzXG5cdFx0XHQkbG9nLmluZm8odm0uaW5wdXRzWydQaG90byddKTtcblxuXHRcdFx0Ly91cGRhdGUgdGhlIGJ1dHRvblxuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMuYWRkcmVzc2VkID0gdHJ1ZTtcblx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLnZhbHVlID0gdHJ1ZTtcblxuXHRcdFx0Ly9jaGFuZ2UgdGhlIGlucHV0IGNsYXNzXG5cdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmNsYXNzZXMuaW5wdXREaXZbJ2hhcy1zdWNjZXNzJ10gPSB0cnVlO1xuXG5cdFx0XHRjb3VudEFwcHJvdmVkKCk7XG5cblx0XHRcdC8vbm90aWZ5IHRoZSB1c2VyXG5cdFx0XHQvLyRsb2cuaW5mbygnYWRkZWQgYSBwaG90bycsIHZtLnVwbG9hZGVkSW1hZ2UpO1xuXG5cdFx0XHQvL2FjY2Vzc3NlZCB0aHJvdWdoIGpxdWVyeSBzbyBhcHBseSB0aGVzZSBjaGFuZ2VzXG5cdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdFx0fVxuXG5cdFx0dm0uc3VibWl0Rm9ybSA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRpZihjb3VudEFwcHJvdmVkKCkgPT0gdG90YWxGaWVsZHMpIHtcblx0XHRcdFx0dmFyIGRlbGl2ZXJ5T2JqZWN0ID0ge307XG5cblx0XHRcdFx0T2JqZWN0LmtleXModm0uaW5wdXRzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHRcdGlmKGtleSAhPT0gJ1Bob3RvJykge1xuXHRcdFx0XHRcdFx0Ly9mb3Igbm90IHBob3RvcyBhZGQgdmFsdWVzXG5cdFx0XHRcdFx0XHRpZih0eXBlb2Ygdm0uaW5wdXRzW2tleV0udmFsdWUgPT0gJ251bWJlcicpXG5cdFx0XHRcdFx0XHRcdGRlbGl2ZXJ5T2JqZWN0W2tleV0gPSB2bS5pbnB1dHNba2V5XS52YWx1ZSAqIDEwMDtcblx0XHRcdFx0XHRcdGVsc2UgZGVsaXZlcnlPYmplY3Rba2V5XSA9IHZtLmlucHV0c1trZXldLnZhbHVlO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvL2lmIGl0IGlzIGEgcGhvdG8sIGNvcHkgZGlyZWN0bHlcblx0XHRcdFx0XHRcdGRlbGl2ZXJ5T2JqZWN0W2tleV0gPSB2bS5pbnB1dHNba2V5XTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8vc2VuZCB0aGUgdmFsdWVzXG5cdFx0XHRcdGJhY2tlbmRTcnZjLnN1Ym1pdEZvcm1EYXRhKGRlbGl2ZXJ5T2JqZWN0KTtcblxuXHRcdFx0XHQvL25vdGlmeSB0aGUgdXNlclxuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VibWl0dGVkIScpO1xuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvL25vdGlmeSB0aGUgdXNlclxuXHRcdFx0XHRjb25zb2xlLmxvZygnbmVlZCB0byBmaW5pc2ggdGhlIGZpZWxkcycpO1xuXHRcdFx0fVxuXG5cdFx0XHRcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZGlyZWN0aXZlO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuICAgIC5jb250cm9sbGVyKCdtYXJrZXRSZWNpZXB0Q29udHJvbGxlcicsIG1hcmtldFJlY2llcHRDb250cm9sbGVyKTtcblxubWFya2V0UmVjaWVwdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICdiYWNrZW5kU3J2YycsICdmb3JtRGF0YSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIG1hcmtldFJlY2llcHRDb250cm9sbGVyKCRsb2csIGJhY2tlbmRTcnZjLCBmb3JtRGF0YSkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2bS5kYXRhID0gZm9ybURhdGE7XG5cblx0dmFyIHRpdGxlQ2xhc3NlcyA9IHtcblx0XHQnY29sLXhzLTUnOnRydWUsXG5cdFx0J2NvbC1zbS01Jzp0cnVlLFxuXHRcdCdjb2wtbWQtNSc6dHJ1ZSxcblx0XHQnY29sLWxnLTUnOnRydWVcdFx0XG5cdH07XG5cblx0dmFyIGlucHV0Q2xhc3NlcyA9IHtcblx0XHQnY29sLXhzLTcnOnRydWUsXG5cdFx0J2NvbC1zbS03Jzp0cnVlLFxuXHRcdCdjb2wtbWQtNyc6dHJ1ZSxcblx0XHQnY29sLWxnLTcnOnRydWVcblx0fTtcblxufVxuYW5ndWxhclxuXHQubW9kdWxlKCdtYXJrZXRSZWNpZXB0Jylcblx0LmRpcmVjdGl2ZSgnbmF2YmFyJywgbmF2YmFyKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBuYXZiYXIoKSB7XG4gICAgbGlua0Z1bmMuJGluamVjdCA9IFtcInNjb3BlXCIsIFwiZWxcIiwgXCJhdHRyXCIsIFwiY3RybFwiXTtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnYXBwL25hdmJhci9uYXZiYXIuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge30sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogbmF2YmFyQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIG5hdmJhckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcbiAgICBcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBuYXZiYXJDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuICAgIFx0Ly92YXIgdm0gPSB0aGlzO1xuXHR9XG5cblx0cmV0dXJuIGRpcmVjdGl2ZTtcbn0iLCJhbmd1bGFyXG5cdC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuXHQuZGlyZWN0aXZlKCdyZWNpZXB0Rm9ybScsIHJlY2llcHRGb3JtKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiByZWNpZXB0Rm9ybSgpIHtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnYXBwL2Zvcm0vZm9ybS5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHRkYXRhOiAnPSdcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IHJlY2llcHRGb3JtLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgcmVjaWVwdEZvcm0uJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnYmFja2VuZFNydmMnXTtcbiAgICBcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiByZWNpZXB0Rm9ybSgkc2NvcGUsICRsb2csIGJhY2tlbmRTcnZjKSB7XG5cdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHRvdGFsRmllbGRzID0gMDtcblx0XHR2YXIgZmllbGRzSGFzaCA9IHt9O1xuXG5cdFx0Ly9zZXQgdmlldyBtb2RlbCB2YWx1ZXNcblx0XHR2bS5jdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cdFx0dm0udXBsb2FkZWRJbWFnZSA9IHtcblx0XHRcdHNyYzogJ01hcmtldF9JbWFnZS5qcGcnLFxuXHRcdFx0YmluYXJ5OiBudWxsXG5cdFx0fTtcblxuXHRcdHZtWydpbnB1dHMnXSA9IHt9O1xuXHRcdHZtWydhcHByb3ZhbHMnXSA9IHt9O1xuXHRcdHZtWydzdWJtaXRCdG5DbGFzc2VzJ10gPSB7XG5cdFx0XHRcImJ0blwiOnRydWUsXG5cdFx0XHRcImJ0bi1kYW5nZXJcIjp0cnVlLFxuXHRcdFx0XCJidG4tc3VjY2Vzc1wiOmZhbHNlLFxuXHRcdFx0XCJjb2wteHMtMTJcIjp0cnVlLFxuXHRcdFx0XCJjb2wtc20tMTJcIjp0cnVlLFxuXHRcdFx0XCJjb2wtbWQtMTJcIjp0cnVlLFxuXHRcdFx0XCJjb2wtbGctMTJcIjp0cnVlXG5cdFx0fVxuXG5cdFx0Ly9jcmVhdGUgdGhlIG5lZWRlZCBvYmplY3RzXG5cdFx0T2JqZWN0LmtleXModm0uZGF0YS5xdWVzdGlvbnMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHR2YXIgbmFtZSA9IHZtLmRhdGEucXVlc3Rpb25zW2tleV0ubmFtZTtcblxuXHRcdFx0Ly9hZGQgYXBwcm92YWwgdmFsdWVzXG5cdFx0XHR2bS5hcHByb3ZhbHNbbmFtZV0gPSB7XG5cdFx0XHRcdFwiYWRkcmVzc2VkXCI6ZmFsc2UsXG5cdFx0XHRcdFwidmFsdWVcIjpudWxsLFxuXHRcdFx0XHRcInRleHRcIjonT0s/J1xuXHRcdFx0fVxuXG5cdFx0XHQvL2FkZCBpbnB1dCB2YWx1ZXNcblx0XHRcdHZtLmlucHV0c1tuYW1lXSA9IHt9O1xuXHRcdFx0dm0uaW5wdXRzW25hbWVdLnZhbHVlID0gJyc7XG5cdFx0XHR2bS5pbnB1dHNbbmFtZV0uc3VnZ2VzdGlvbiA9ICc0MTUnO1xuXG5cdFx0XHQvL2J1aWxkIGZpZWxkcyBoYXNoXG5cdFx0XHRmaWVsZHNIYXNoW25hbWVdID0gdG90YWxGaWVsZHM7XG5cblx0XHRcdC8vaW5jcmltZW50IGZpZWxkcyBjb3VudFxuXHRcdFx0dG90YWxGaWVsZHMrKztcblxuXHRcdH0pO1xuXG5cdFx0Ly9saXN0IHRoZSBvYmplY3RzXG5cdFx0Ly8kbG9nLmluZm8odm0uaW5wdXRzKTtcblxuXHRcdC8vYWRkIHN1Z2dlc3Rpb24gdmFsdWVzXG5cdFx0dm0uaW5wdXRzWydNYXJrZXQnXS5zdWdnZXN0aW9uID0gJ1N1cmYgQ2l0eSc7XG5cdFx0dm0uaW5wdXRzWydOYW1lJ10uc3VnZ2VzdGlvbiA9ICdBaG1lZCc7XG5cdFx0dm0uaW5wdXRzWydHcm9zcyddLnN1Z2dlc3Rpb24gPSA0MTU7XG5cdFx0dm0uaW5wdXRzWydGZWUnXS5zdWdnZXN0aW9uID0gNDI7XG5cdFx0dm0uaW5wdXRzWydQYXknXS5zdWdnZXN0aW9uID0gODM7XG5cdFx0dm0uaW5wdXRzWydSZWNpZXB0cyddLnN1Z2dlc3Rpb24gPSAxMDtcblx0XHR2bS5pbnB1dHNbJ0JhbmsnXS5zdWdnZXN0aW9uID0gNjA7XG5cdFx0dm0uaW5wdXRzWydEdWUnXS5zdWdnZXN0aW9uID0gMjIwO1xuXG5cdFx0ZnVuY3Rpb24gdW5sb2NrU3VibWl0QnRuKCkge1xuXHRcdFx0Ly9cblx0XHRcdC8vJGxvZy5pbmZvKCdVbmxvY2tpbmcgYnRuJyk7XG5cdFx0XHR2bS5zdWJtaXRCdG5DbGFzc2VzWydidG4tZGFuZ2VyJ10gPSBmYWxzZTtcblx0XHRcdHZtLnN1Ym1pdEJ0bkNsYXNzZXNbJ2J0bi1zdWNjZXNzJ10gPSB0cnVlO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGxvY2tTdWJtaXRCdG4oKSB7XG5cdFx0XHQvL1xuXHRcdFx0Ly8kbG9nLmluZm8oJ0xvY2tpbmcgYnRuJyk7XG5cdFx0XHR2bS5zdWJtaXRCdG5DbGFzc2VzWydidG4tZGFuZ2VyJ10gPSB0cnVlO1xuXHRcdFx0dm0uc3VibWl0QnRuQ2xhc3Nlc1snYnRuLXN1Y2Nlc3MnXSA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNvdW50QXBwcm92ZWQoKSB7XG5cdFx0XHR2YXIgbnVtYmVyT2YgPSAwO1xuXG5cdFx0XHRPYmplY3Qua2V5cyh2bS5kYXRhLnF1ZXN0aW9ucykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0Ly9kZWZpbmUgdmFyaWFibGVcblx0XHRcdFx0dmFyIGlzQXBwcm92ZWQgPSB2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmFwcHJvdmFscy5hZGRyZXNzZWQ7XG5cdFx0XHRcdC8vY2hlY2sgdmFsdWVcblx0XHRcdFx0aWYoaXNBcHByb3ZlZCkgbnVtYmVyT2YrKztcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyRsb2cuaW5mbyhudW1iZXJPZiwgdG90YWxGaWVsZHMsIG51bWJlck9mPT10b3RhbEZpZWxkcyk7XG5cdFx0XHRpZihudW1iZXJPZj09dG90YWxGaWVsZHMpIHVubG9ja1N1Ym1pdEJ0bigpO1xuXHRcdFx0ZWxzZSBsb2NrU3VibWl0QnRuKCk7XG5cblx0XHRcdHJldHVybiBudW1iZXJPZjtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRQaG90bygpIHtcblx0XHRcdHZhciBwcmV2aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2llcHRJbWFnZScpXG5cdFx0XHR2YXIgZmlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdQaG90bycpLmZpbGVzWzBdO1xuXHRcdFx0dmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdFx0XHR2YXIgaW1hZ2ViaW5hcnkgPSBudWxsO1xuXG5cdFx0XHRyZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpbWFnZWJpbmFyeSA9IHJlYWRlci5yZXN1bHQ7XG5cdFx0XHRcdHByZXZpZXcuc3JjID0gaW1hZ2ViaW5hcnk7XG5cblx0XHRcdH0sIGZhbHNlKTtcblxuXHRcdFx0aWYgKGZpbGUpIHtcblx0XHRcdFx0Ly9wcmV2aWV3IHRoZSBpbWFnZVxuXHRcdFx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcblxuXHRcdFx0XHQvL3NhdmUgdGhlIHZhbHVlIHRvIHRoZSB2YXJpYWJsZVxuXHRcdFx0XHR2bS5pbnB1dHNbJ1Bob3RvJ10gPSB7XG5cdFx0XHRcdFx0c3JjOiAnTWFya2V0X1JlY2llcHQuanBnJyxcblx0XHRcdFx0XHRiaW5hcnk6IGltYWdlYmluYXJ5XG5cdFx0XHRcdH07XHRcdFx0XHRcblx0XHRcdH1cblxuXHRcdFx0LypyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0dmFyIGRhdGEgPSBlLnRhcmdldC5yZXN1bHQ7XG5cdFx0XHRcdFxuXHRcdFx0XHQkbG9nLmluZm8oJ2dvdCBoZXJlJyk7XG5cblx0XHRcdFx0Ly9zYXZlIHRoZSB2YWx1ZSB0byB0aGUgdmFyaWFibGVcblx0XHRcdFx0dm0uaW5wdXRzWydQaG90byddID0ge1xuXHRcdFx0XHRcdHNyYzogJ01hcmtldF9SZWNpZXB0LmpwZycsXG5cdFx0XHRcdFx0YmluYXJ5OiBkYXRhXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQkbG9nLmluZm8oJ2ZpbGUgbG9hZGVkJywgdm0uaW5wdXRzWydQaG90byddKTtcblx0XHRcdH1cblx0XHRcdCRsb2cuaW5mbygnZ290IGhlcmUnKTtcblx0XHRcdHIucmVhZEFzRGF0YVVSTChmaWxlKTsqL1xuXHRcdH1cblxuXHRcdHZtLnJlZnJlc2hBcHByb3ZhbHMgPSBmdW5jdGlvbigpIHtcblx0XHRcdC8vbG9vcCB0aHJvdWdoIGFsbCBxdWVzdGlvbnNcblx0XHRcdE9iamVjdC5rZXlzKHZtLmRhdGEucXVlc3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHR2YXIgcmVjb3JkTmFtZSA9IHZtLmRhdGEucXVlc3Rpb25zW2tleV0ubmFtZTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vcmVzZXQgc3VnZ2VzdGlvbnNcblxuXHRcdFx0XHQvL3Jlc2V0IHZhbHVlc1xuXHRcdFx0XHR2bS5pbnB1dHNbcmVjb3JkTmFtZV0udmFsdWUgPSAnJztcblxuXHRcdFx0XHQvL3NldCB2YWx1ZXNcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5hcHByb3ZhbHMuYWRkcmVzc2VkID0gZmFsc2U7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uYXBwcm92YWxzLnZhbHVlID0gbnVsbDtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5hcHByb3ZhbHMudGV4dCA9IFwiT0s/XCI7XG5cblx0XHRcdFx0Ly9zZXQgY2xhc3Nlc1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmNsYXNzZXMuYXBwcm92YWxEaXZbJ3JvdW5kLWJ1dHRvbi1jaXJjbGUtZnJlZSddID0gdHJ1ZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWFwcHJvdmVkJ10gPSBmYWxzZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLXJldmlzZWQnXSA9IGZhbHNlO1xuXHRcdFx0XHRcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmlucHV0RGl2WydoYXMtc3VjY2VzcyddID0gZmFsc2U7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uY2xhc3Nlcy5pbnB1dERpdlsnaGFzLXdhcm5pbmcnXSA9IGZhbHNlO1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmNsYXNzZXMuaW5wdXREaXZbJ2hhcy1kYW5nZXInXSA9IGZhbHNlO1xuXHRcdFx0fSk7XG5cblx0XHRcdGNvdW50QXBwcm92ZWQoKTtcblx0XHR9XG5cblx0XHR2bS5jaGFuZ2VkID0gZnVuY3Rpb24oZmllbGROYW1lKSB7XG5cdFx0XHR2YXIgcmVjb3JkTnVtID0gZmllbGRzSGFzaFtmaWVsZE5hbWVdO1xuXHRcdFx0Ly9ub3RpZnkgdGhlIHJlY29yZCBiZWluZyBjaGFuZ2VkXG5cdFx0XHQvLyRsb2cuaW5mbyhmaWVsZE5hbWUpO1xuXG5cdFx0XHQvL3VwZGF0ZSB0aGUgYXBwcm92YWwgYnV0dG9uXG5cdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy5hZGRyZXNzZWQgPSB0cnVlO1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMudmFsdWUgPSB0cnVlO1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMudGV4dCA9IFwiTk8hXCI7XG5cblx0XHRcdC8vY2hhbmdlIHRoZSBjbGFzc1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWZyZWUnXSA9IGZhbHNlO1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLXJldmlzZWQnXSA9IHRydWU7XG5cdFx0XHRcblx0XHRcdC8vY2hhbmdlIHRoZSBpbnB1dCBjbGFzc1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmlucHV0RGl2WydoYXMtZGFuZ2VyJ10gPSB0cnVlO1xuXG5cdFx0XHRjb3VudEFwcHJvdmVkKCk7XG5cdFx0fVxuXG5cdFx0dm0uYXBwcm92ZUZpZWxkID0gZnVuY3Rpb24oZmllbGROYW1lKSB7XG5cdFx0XHR2YXIgcmVjb3JkTnVtID0gZmllbGRzSGFzaFtmaWVsZE5hbWVdO1xuXHRcdFx0dmFyIGlzQXBwcm92ZWQgPSB2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy5hZGRyZXNzZWQ7XG5cdFx0XHRcdFxuXHRcdFx0aWYoIWlzQXBwcm92ZWQpIHtcblxuXHRcdFx0XHQvL3VwZGF0ZSB0aGUgdmFsdWVzXG5cdFx0XHRcdHZtLmlucHV0c1tmaWVsZE5hbWVdLnZhbHVlID0gdm0uaW5wdXRzW2ZpZWxkTmFtZV0uc3VnZ2VzdGlvbjtcblxuXHRcdFx0XHQvL3VwZGF0ZSB0aGUgYnV0dG9uXG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLmFkZHJlc3NlZCA9IHRydWU7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLnZhbHVlID0gdHJ1ZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMudGV4dCA9IFwiWUVTIVwiO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9jaGFuZ2UgdGhlIGNsYXNzXG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uY2xhc3Nlcy5hcHByb3ZhbERpdlsncm91bmQtYnV0dG9uLWNpcmNsZS1mcmVlJ10gPSBmYWxzZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWFwcHJvdmVkJ10gPSB0cnVlO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9jaGFuZ2UgdGhlIGlucHV0IGNsYXNzXG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uY2xhc3Nlcy5pbnB1dERpdlsnaGFzLXN1Y2Nlc3MnXSA9IHRydWU7XG5cblx0XHRcdFx0Y291bnRBcHByb3ZlZCgpO1xuXHRcdFx0XHRcblx0XHRcdH1cblxuXHRcdFx0Ly8kbG9nLmluZm8oZmllbGROYW1lKTtcblxuXHRcdH1cblxuXHRcdCRzY29wZS5waG90b0FkZGVkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgcmVjb3JkTnVtID0gZmllbGRzSGFzaFsnUGhvdG8nXTtcblxuXHRcdFx0Ly9nZXQgdGhlIHBob3RvXG5cdFx0XHRnZXRQaG90bygpO1xuXG5cdFx0XHQvL3VwZGF0ZSB0aGUgdmFsdWVzXG5cdFx0XHQkbG9nLmluZm8odm0uaW5wdXRzWydQaG90byddKTtcblxuXHRcdFx0Ly91cGRhdGUgdGhlIGJ1dHRvblxuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMuYWRkcmVzc2VkID0gdHJ1ZTtcblx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLnZhbHVlID0gdHJ1ZTtcblxuXHRcdFx0Ly9jaGFuZ2UgdGhlIGlucHV0IGNsYXNzXG5cdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmNsYXNzZXMuaW5wdXREaXZbJ2hhcy1zdWNjZXNzJ10gPSB0cnVlO1xuXG5cdFx0XHRjb3VudEFwcHJvdmVkKCk7XG5cblx0XHRcdC8vbm90aWZ5IHRoZSB1c2VyXG5cdFx0XHQvLyRsb2cuaW5mbygnYWRkZWQgYSBwaG90bycsIHZtLnVwbG9hZGVkSW1hZ2UpO1xuXG5cdFx0XHQvL2FjY2Vzc3NlZCB0aHJvdWdoIGpxdWVyeSBzbyBhcHBseSB0aGVzZSBjaGFuZ2VzXG5cdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdFx0fVxuXG5cdFx0dm0uc3VibWl0Rm9ybSA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRpZihjb3VudEFwcHJvdmVkKCkgPT0gdG90YWxGaWVsZHMpIHtcblx0XHRcdFx0dmFyIGRlbGl2ZXJ5T2JqZWN0ID0ge307XG5cblx0XHRcdFx0T2JqZWN0LmtleXModm0uaW5wdXRzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHRcdGlmKGtleSAhPT0gJ1Bob3RvJykge1xuXHRcdFx0XHRcdFx0Ly9mb3Igbm90IHBob3RvcyBhZGQgdmFsdWVzXG5cdFx0XHRcdFx0XHRpZih0eXBlb2Ygdm0uaW5wdXRzW2tleV0udmFsdWUgPT0gJ251bWJlcicpXG5cdFx0XHRcdFx0XHRcdGRlbGl2ZXJ5T2JqZWN0W2tleV0gPSB2bS5pbnB1dHNba2V5XS52YWx1ZSAqIDEwMDtcblx0XHRcdFx0XHRcdGVsc2UgZGVsaXZlcnlPYmplY3Rba2V5XSA9IHZtLmlucHV0c1trZXldLnZhbHVlO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvL2lmIGl0IGlzIGEgcGhvdG8sIGNvcHkgZGlyZWN0bHlcblx0XHRcdFx0XHRcdGRlbGl2ZXJ5T2JqZWN0W2tleV0gPSB2bS5pbnB1dHNba2V5XTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8vc2VuZCB0aGUgdmFsdWVzXG5cdFx0XHRcdGJhY2tlbmRTcnZjLnN1Ym1pdEZvcm1EYXRhKGRlbGl2ZXJ5T2JqZWN0KTtcblxuXHRcdFx0XHQvL25vdGlmeSB0aGUgdXNlclxuXHRcdFx0XHRjb25zb2xlLmxvZygnc3VibWl0dGVkIScpO1xuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvL25vdGlmeSB0aGUgdXNlclxuXHRcdFx0XHRjb25zb2xlLmxvZygnbmVlZCB0byBmaW5pc2ggdGhlIGZpZWxkcycpO1xuXHRcdFx0fVxuXG5cdFx0XHRcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZGlyZWN0aXZlO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtYXJrZXRSZWNpZXB0JylcbiAgICAuY29udHJvbGxlcignbWFya2V0UmVjaWVwdENvbnRyb2xsZXInLCBtYXJrZXRSZWNpZXB0Q29udHJvbGxlcik7XG5cbm1hcmtldFJlY2llcHRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnYmFja2VuZFNydmMnLCAnZm9ybURhdGEnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBtYXJrZXRSZWNpZXB0Q29udHJvbGxlcigkbG9nLCBiYWNrZW5kU3J2YywgZm9ybURhdGEpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dm0uZGF0YSA9IGZvcm1EYXRhO1xuXG5cdHZhciB0aXRsZUNsYXNzZXMgPSB7XG5cdFx0J2NvbC14cy01Jzp0cnVlLFxuXHRcdCdjb2wtc20tNSc6dHJ1ZSxcblx0XHQnY29sLW1kLTUnOnRydWUsXG5cdFx0J2NvbC1sZy01Jzp0cnVlXHRcdFxuXHR9O1xuXG5cdHZhciBpbnB1dENsYXNzZXMgPSB7XG5cdFx0J2NvbC14cy03Jzp0cnVlLFxuXHRcdCdjb2wtc20tNyc6dHJ1ZSxcblx0XHQnY29sLW1kLTcnOnRydWUsXG5cdFx0J2NvbC1sZy03Jzp0cnVlXG5cdH07XG5cbn0iLCJhbmd1bGFyXG5cdC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuXHQuZGlyZWN0aXZlKCduYXZiYXInLCBuYXZiYXIpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIG5hdmJhcigpIHtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnYXBwL25hdmJhci9uYXZiYXIuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge30sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogbmF2YmFyQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIG5hdmJhckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcbiAgICBcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBuYXZiYXJDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuICAgIFx0Ly92YXIgdm0gPSB0aGlzO1xuXHR9XG5cblx0cmV0dXJuIGRpcmVjdGl2ZTtcbn0iLCJhbmd1bGFyXG5cdC5tb2R1bGUoJ21hcmtldFJlY2llcHQnLCBbXG5cdFx0J25nUm91dGUnXG5cdF0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
