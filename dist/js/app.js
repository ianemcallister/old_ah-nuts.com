function config(e){e.when("/",{templateUrl:"app/landing/landing.htm",controller:"landingController",controllerAs:"vm",resolve:{loadData:loadData}}).when("/marketReciept",{templateUrl:"app/marketReciept/marketReciept.htm",controller:"marketRecieptController",controllerAs:"vm",resolve:{formData:["backendSrvc",function(e){return e.getFormData("marketReciept")}]}}).otherwise({redirectTo:"/"})}function loadData(e){e.loadAllForms()}function backendSrvc(e,t){function n(e){return new Promise(function(n,o){t({method:"GET",url:"assets/"+e}).then(function(e){n(e.data)},function(e){console.log("Error:",e)})})}function o(){}function a(e){var t=this;t.allForms={marketReciept:"marketReciept.json"};var n=t.allForms[e];return new Promise(function(o,a){"undefined"!=typeof t[e]?o(t[e]):t._get(n).then(function(n){t[e]=n,o(t[e])})})}function r(){var e=this;e.allForms={marketReciept:"marketReciept.json"},console.log(e.allForms),Object.keys(e.allForms).forEach(function(t){var n=e.allForms[t];e._get(n).then(function(n){e[t]=n.data})})}var i={_get:n,_post:o,getFormData:a,loadAllForms:r};return i}function recieptForm(){function e(e,t,n,o){}function t(e,t){function n(){var e=0;return Object.keys(o.data.questions).forEach(function(t){var n=o.data.questions[t].approvals.addressed;n&&e++}),e}var o=this,a=0,r={};o.currentDate=new Date,o.inputs={},o.approvals={},Object.keys(o.data.questions).forEach(function(e){var t=o.data.questions[e].name;o.approvals[t]={addressed:!1,value:null,text:"OK?"},o.inputs[t]={},o.inputs[t].value="",o.inputs[t].suggestion="415",r[t]=a,a++}),t.info(o.inputs),o.inputs.Market.suggestion="Surf City",o.inputs.Name.suggestion="Ahmed",o.inputs.Gross.suggestion=415,o.inputs.Fee.suggestion=42,o.inputs.Pay.suggestion=83,o.inputs.Reciepts.suggestion=10,o.inputs.Bank.suggestion=60,o.inputs.Due.suggestion=220,o.refreshApprovals=function(){Object.keys(o.data.questions).forEach(function(e){o.data.questions[e].approvals.addressed=!1,o.data.questions[e].approvals.value=null,o.data.questions[e].approvals.text="OK?",o.data.questions[e].classes.approvalDiv["round-button-circle-free"]=!0,o.data.questions[e].classes.approvalDiv["round-button-circle-approved"]=!1,o.data.questions[e].classes.approvalDiv["round-button-circle-revised"]=!1})},o.approveField=function(e){var n=r[e],a=o.data.questions[n].approvals.addressed;a||(o.data.questions[n].approvals.addressed=!0,o.data.questions[n].approvals.value=!0,o.data.questions[n].approvals.text="YES!",o.data.questions[n].classes.approvalDiv["round-button-circle-free"]=!1,o.data.questions[n].classes.approvalDiv["round-button-circle-approved"]=!0),t.info(e)},o.submitForm=function(){n()==a?console.log("submitted!"):console.log("need to finish the fields")}}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"app/form/form.directive.htm",replace:!0,scope:{data:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$scope","$log"],n}function landingController(e,t){var n=this;n.redirectTo=function(n){e.info("clicked",n),t.path("/"+n)}}function marketRecieptController(e,t,n){var o=this;o.data=n}function navbar(){function e(e,t,n,o){}function t(e,t){}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"app/navbar/navbar.directive.htm",replace:!0,scope:{},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$scope","$log"],n}config.$inject=["$routeProvider"],loadData.$inject=["backendSrvc"],angular.module("marketReciept",["ngRoute"]),angular.module("marketReciept").config(config),angular.module("marketReciept").factory("backendSrvc",backendSrvc),backendSrvc.$inject=["$log","$http"],angular.module("marketReciept").directive("recieptForm",recieptForm),angular.module("marketReciept").controller("landingController",landingController),landingController.$inject=["$log","$location"],angular.module("marketReciept").controller("marketRecieptController",marketRecieptController),marketRecieptController.$inject=["$log","backendSrvc","formData"],angular.module("marketReciept").directive("navbar",navbar);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9yb3V0ZS1jb25maWcuanMiLCJhcHAvYmFja2VuZFNydmMvYmFja2VuZFNydmMuanMiLCJhcHAuanMiLCJhcHAvZm9ybS9mb3JtLmRpcmVjdGl2ZS5qcyIsImFwcC9sYW5kaW5nL2xhbmRpbmcuY29udHJvbGxlci5qcyIsImFwcC9tYXJrZXRSZWNpZXB0L21hcmtldFJlY2llcHQuY29udHJvbGxlci5qcyIsImFwcC9uYXZiYXIvbmF2YmFyLmRpcmVjdGl2ZS5qcyIsImFwcC5tb2R1bGUuanMiXSwibmFtZXMiOlsiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwicmVzb2x2ZSIsImxvYWREYXRhIiwiZm9ybURhdGEiLCJiYWNrZW5kU3J2YyIsImdldEZvcm1EYXRhIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImxvYWRBbGxGb3JtcyIsIiRsb2ciLCIkaHR0cCIsIl9nZXQiLCJmaWxlbmFtZSIsIlByb21pc2UiLCJyZWplY3QiLCJtZXRob2QiLCJ1cmwiLCJ0aGVuIiwicmVzcG9uc2UiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsIl9wb3N0IiwiZm9ybSIsInNlcnZpY2UiLCJ0aGlzIiwiYWxsRm9ybXMiLCJtYXJrZXRSZWNpZXB0IiwicmVqIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJyZWNpZXB0Rm9ybSIsImxpbmtGdW5jIiwic2NvcGUiLCJlbCIsImF0dHIiLCJjdHJsIiwiJHNjb3BlIiwiY291bnRBcHByb3ZlZCIsIm51bWJlck9mIiwidm0iLCJxdWVzdGlvbnMiLCJrZXkiLCJpc0FwcHJvdmVkIiwiYXBwcm92YWxzIiwiYWRkcmVzc2VkIiwidG90YWxGaWVsZHMiLCJmaWVsZHNIYXNoIiwiY3VycmVudERhdGUiLCJEYXRlIiwibmFtZSIsInZhbHVlIiwidGV4dCIsImlucHV0cyIsInN1Z2dlc3Rpb24iLCJpbmZvIiwicmVmcmVzaEFwcHJvdmFscyIsImNsYXNzZXMiLCJhcHByb3ZhbERpdiIsImFwcHJvdmVGaWVsZCIsImZpZWxkTmFtZSIsInJlY29yZE51bSIsInN1Ym1pdEZvcm0iLCIkaW5qZWN0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwibGluayIsImJpbmRUb0NvbnRyb2xsZXIiLCJsYW5kaW5nQ29udHJvbGxlciIsIiRsb2NhdGlvbiIsImZvcm1OYW1lIiwicGF0aCIsIm1hcmtldFJlY2llcHRDb250cm9sbGVyIiwibmF2YmFyIiwibmF2YmFyQ29udHJvbGxlciIsImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5Il0sIm1hcHBpbmdzIjoiQUFJQSxRQUFBQSxRQUFBQyxHQUNBQSxFQUNBQyxLQUFBLEtBQ0FDLFlBQUEsMEJBQ0FDLFdBQUEsb0JBQ0FDLGFBQUEsS0FDQUMsU0FDQUMsU0FBQUEsWUFHQUwsS0FBQSxrQkFDQUMsWUFBQSxzQ0FDQUMsV0FBQSwwQkFDQUMsYUFBQSxLQUNBQyxTQUNBRSxVQUFBLGNBQUEsU0FBQUMsR0FFQSxNQUFBQSxHQUFBQyxZQUFBLHNCQUlBQyxXQUNBQyxXQUFBLE1BSUEsUUFBQUwsVUFBQUUsR0FDQUEsRUFBQUksZUN4QkEsUUFBQUosYUFBQUssRUFBQUMsR0FVQSxRQUFBQyxHQUFBQyxHQUdBLE1BQUEsSUFBQUMsU0FBQSxTQUFBWixFQUFBYSxHQUVBSixHQUNBSyxPQUFBLE1BQ0FDLElBQUEsVUFBQUosSUFDQUssS0FBQSxTQUFBQyxHQUVBakIsRUFBQWlCLEVBQUFDLE9BRUEsU0FBQUQsR0FDQUUsUUFBQUMsSUFBQSxTQUFBSCxPQU9BLFFBQUFJLE1BSUEsUUFBQWpCLEdBQUFrQixHQUNBLEdBQUFDLEdBQUFDLElBRUFELEdBQUFFLFVBQUFDLGNBQUEscUJBRUEsSUFBQVgsR0FBQVEsRUFBQUUsU0FBQUgsRUFFQSxPQUFBLElBQUFWLFNBQUEsU0FBQVosRUFBQTJCLEdBRUEsbUJBQUFKLEdBQUFELEdBQ0F0QixFQUFBdUIsRUFBQUQsSUFFQUMsRUFBQWIsS0FBQUssR0FBQUMsS0FB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QUFBLGlCQUNBYixVQUFBLGNBQUFqQyxhQ0ZBNkMsUUFDQUMsT0FBQSxpQkFDQS9FLFdBQUEsb0JBQUF1RSxtQkFFQUEsa0JBQUFOLFNBQUEsT0FBQSxhQ0pBYSxRQUNBQyxPQUFBLGlCQUNBL0UsV0FBQSwwQkFBQTJFLHlCQUVBQSx3QkFBQVYsU0FBQSxPQUFBLGNBQUEsWUNKQWEsUUFDQUMsT0FBQSxpQkFDQWIsVUFBQSxTQUFBVSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyXG5cdC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuXHQuY29uZmlnKGNvbmZpZyk7XG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGNvbmZpZygkcm91dGVQcm92aWRlcikge1xuXHQkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9sYW5kaW5nL2xhbmRpbmcuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ2xhbmRpbmdDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7XHQvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgXHRsb2FkRGF0YTpsb2FkRGF0YVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL21hcmtldFJlY2llcHQnLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL21hcmtldFJlY2llcHQvbWFya2V0UmVjaWVwdC5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnbWFya2V0UmVjaWVwdENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgXHRmb3JtRGF0YTogZnVuY3Rpb24oYmFja2VuZFNydmMpIHtcbiAgICAgICAgXHRcdC8vcmV0dXJuIHsncmVzb2x2ZVRlc3QnOidnb29kIHRlc3QnfTtcbiAgICAgICAgXHRcdHJldHVybiBiYWNrZW5kU3J2Yy5nZXRGb3JtRGF0YSgnbWFya2V0UmVjaWVwdCcpO1xuICAgICAgICBcdH1cbiAgICAgICAgfVxuICAgIH0pXG4gICAgLm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBsb2FkRGF0YShiYWNrZW5kU3J2Yykge1xuXHRiYWNrZW5kU3J2Yy5sb2FkQWxsRm9ybXMoKTtcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWFya2V0UmVjaWVwdCcpXG4gICAgLmZhY3RvcnkoJ2JhY2tlbmRTcnZjJywgYmFja2VuZFNydmMpO1xuXG5iYWNrZW5kU3J2Yy4kaW5qZWN0ID0gWyckbG9nJywgJyRodHRwJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYmFja2VuZFNydmMoJGxvZywgJGh0dHApIHtcblx0dmFyIHNlcnZpY2UgPSB0aGlzO1xuXG5cdHZhciBiYWNrZW5kU3J2YyA9IHtcblx0XHRfZ2V0Ol9nZXQsXG5cdFx0X3Bvc3Q6X3Bvc3QsXG5cdFx0Z2V0Rm9ybURhdGE6Z2V0Rm9ybURhdGEsXG5cdFx0bG9hZEFsbEZvcm1zOmxvYWRBbGxGb3Jtc1xuXHR9O1xuXG5cdGZ1bmN0aW9uIF9nZXQoZmlsZW5hbWUpIHtcblx0XHR2YXIgdGhpc1Jlc3BvbnNlID0gbnVsbDtcblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdFx0XHR1cmw6ICdhc3NldHMvJyArIGZpbGVuYW1lXG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0XG5cdFx0XHR9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdFcnJvcjonLHJlc3BvbnNlKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIF9wb3N0KCkge1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRGb3JtRGF0YShmb3JtKSB7XG5cdFx0dmFyIHNlcnZpY2UgPSB0aGlzO1xuXG5cdFx0c2VydmljZS5hbGxGb3JtcyA9IHtcIm1hcmtldFJlY2llcHRcIjonbWFya2V0UmVjaWVwdC5qc29uJ307XG5cblx0XHR2YXIgdXJsID0gc2VydmljZS5hbGxGb3Jtc1tmb3JtXTtcblx0XHRcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqKSB7XG5cdFx0XHQvL2NoZWNrIGZvciBleGlzdGluZyB2YWx1ZXNcblx0XHRcdGlmKHR5cGVvZiBzZXJ2aWNlW2Zvcm1dICE9PSAndW5kZWZpbmVkJylcblx0XHRcdFx0cmVzb2x2ZShzZXJ2aWNlW2Zvcm1dKTtcblx0XHRcdGVsc2UgeyBcblx0XHRcdFx0c2VydmljZS5fZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0XHRcdHNlcnZpY2VbZm9ybV0gPSByZXNwb25zZTtcblx0XHRcdFx0XHRyZXNvbHZlKHNlcnZpY2VbZm9ybV0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdH0pO1xuXHRcblx0fVxuXG5cdGZ1bmN0aW9uIGxvYWRBbGxGb3JtcygpIHtcblx0XHR2YXIgc2VydmljZSA9IHRoaXM7XG5cblx0XHRzZXJ2aWNlLmFsbEZvcm1zID0ge1wibWFya2V0UmVjaWVwdFwiOidtYXJrZXRSZWNpZXB0Lmpzb24nfTtcblx0XG5cdFx0Y29uc29sZS5sb2coc2VydmljZS5hbGxGb3Jtcyk7XG5cblx0XHQvL3J1biB0aHJvdWdoIGVhY2ggZm9ybVxuXHRcdE9iamVjdC5rZXlzKHNlcnZpY2UuYWxsRm9ybXMpLmZvckVhY2goZnVuY3Rpb24oZm9ybSkge1xuXHRcdFx0dmFyIHVybCA9IHNlcnZpY2UuYWxsRm9ybXNbZm9ybV07XG5cblx0XHRcdHNlcnZpY2UuX2dldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0c2VydmljZVtmb3JtXSA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRyZXR1cm4gYmFja2VuZFNydmM7XG59IiwiXG5jb25maWcuJGluamVjdCA9IFtcIiRyb3V0ZVByb3ZpZGVyXCJdO1xubG9hZERhdGEuJGluamVjdCA9IFtcImJhY2tlbmRTcnZjXCJdO2FuZ3VsYXJcblx0Lm1vZHVsZSgnbWFya2V0UmVjaWVwdCcsIFtcblx0XHQnbmdSb3V0ZSdcblx0XSk7XG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWFya2V0UmVjaWVwdCcpXG5cdC5jb25maWcoY29uZmlnKTtcbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XG5cdCRyb3V0ZVByb3ZpZGVyXG4gICAgLndoZW4oJy8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2xhbmRpbmcvbGFuZGluZy5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnbGFuZGluZ0NvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHtcdC8qIEBuZ0luamVjdCAqL1xuICAgICAgICBcdGxvYWREYXRhOmxvYWREYXRhXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvbWFya2V0UmVjaWVwdCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvbWFya2V0UmVjaWVwdC9tYXJrZXRSZWNpZXB0Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdtYXJrZXRSZWNpZXB0Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICBcdGZvcm1EYXRhOiBbXCJiYWNrZW5kU3J2Y1wiLCBmdW5jdGlvbihiYWNrZW5kU3J2Yykge1xuICAgICAgICBcdFx0Ly9yZXR1cm4geydyZXNvbHZlVGVzdCc6J2dvb2QgdGVzdCd9O1xuICAgICAgICBcdFx0cmV0dXJuIGJhY2tlbmRTcnZjLmdldEZvcm1EYXRhKCdtYXJrZXRSZWNpZXB0Jyk7XG4gICAgICAgIFx0fV1cbiAgICAgICAgfVxuICAgIH0pXG4gICAgLm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBsb2FkRGF0YShiYWNrZW5kU3J2Yykge1xuXHRiYWNrZW5kU3J2Yy5sb2FkQWxsRm9ybXMoKTtcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtYXJrZXRSZWNpZXB0JylcbiAgICAuZmFjdG9yeSgnYmFja2VuZFNydmMnLCBiYWNrZW5kU3J2Yyk7XG5cbmJhY2tlbmRTcnZjLiRpbmplY3QgPSBbJyRsb2cnLCAnJGh0dHAnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBiYWNrZW5kU3J2YygkbG9nLCAkaHR0cCkge1xuXHR2YXIgc2VydmljZSA9IHRoaXM7XG5cblx0dmFyIGJhY2tlbmRTcnZjID0ge1xuXHRcdF9nZXQ6X2dldCxcblx0XHRfcG9zdDpfcG9zdCxcblx0XHRnZXRGb3JtRGF0YTpnZXRGb3JtRGF0YSxcblx0XHRsb2FkQWxsRm9ybXM6bG9hZEFsbEZvcm1zXG5cdH07XG5cblx0ZnVuY3Rpb24gX2dldChmaWxlbmFtZSkge1xuXHRcdHZhciB0aGlzUmVzcG9uc2UgPSBudWxsO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHRcdHVybDogJ2Fzc2V0cy8nICsgZmlsZW5hbWVcblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRyZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHRcblx0XHRcdH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ0Vycm9yOicscmVzcG9uc2UpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gX3Bvc3QoKSB7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldEZvcm1EYXRhKGZvcm0pIHtcblx0XHR2YXIgc2VydmljZSA9IHRoaXM7XG5cblx0XHRzZXJ2aWNlLmFsbEZvcm1zID0ge1wibWFya2V0UmVjaWVwdFwiOidtYXJrZXRSZWNpZXB0Lmpzb24nfTtcblxuXHRcdHZhciB1cmwgPSBzZXJ2aWNlLmFsbEZvcm1zW2Zvcm1dO1xuXHRcdFxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWopIHtcblx0XHRcdC8vY2hlY2sgZm9yIGV4aXN0aW5nIHZhbHVlc1xuXHRcdFx0aWYodHlwZW9mIHNlcnZpY2VbZm9ybV0gIT09ICd1bmRlZmluZWQnKVxuXHRcdFx0XHRyZXNvbHZlKHNlcnZpY2VbZm9ybV0pO1xuXHRcdFx0ZWxzZSB7IFxuXHRcdFx0XHRzZXJ2aWNlLl9nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0c2VydmljZVtmb3JtXSA9IHJlc3BvbnNlO1xuXHRcdFx0XHRcdHJlc29sdmUoc2VydmljZVtmb3JtXSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0fSk7XG5cdFxuXHR9XG5cblx0ZnVuY3Rpb24gbG9hZEFsbEZvcm1zKCkge1xuXHRcdHZhciBzZXJ2aWNlID0gdGhpcztcblxuXHRcdHNlcnZpY2UuYWxsRm9ybXMgPSB7XCJtYXJrZXRSZWNpZXB0XCI6J21hcmtldFJlY2llcHQuanNvbid9O1xuXHRcblx0XHRjb25zb2xlLmxvZyhzZXJ2aWNlLmFsbEZvcm1zKTtcblxuXHRcdC8vcnVuIHRocm91Z2ggZWFjaCBmb3JtXG5cdFx0T2JqZWN0LmtleXMoc2VydmljZS5hbGxGb3JtcykuZm9yRWFjaChmdW5jdGlvbihmb3JtKSB7XG5cdFx0XHR2YXIgdXJsID0gc2VydmljZS5hbGxGb3Jtc1tmb3JtXTtcblxuXHRcdFx0c2VydmljZS5fZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0XHRzZXJ2aWNlW2Zvcm1dID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdHJldHVybiBiYWNrZW5kU3J2Yztcbn1cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWFya2V0UmVjaWVwdCcpXG5cdC5kaXJlY3RpdmUoJ3JlY2llcHRGb3JtJywgcmVjaWVwdEZvcm0pO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHJlY2llcHRGb3JtKCkge1xuICAgIGxpbmtGdW5jLiRpbmplY3QgPSBbXCJzY29wZVwiLCBcImVsXCIsIFwiYXR0clwiLCBcImN0cmxcIl07XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJ2FwcC9mb3JtL2Zvcm0uZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0ZGF0YTogJz0nXG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiByZWNpZXB0Rm9ybSxcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIHJlY2llcHRGb3JtLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJ107XG4gICAgXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gcmVjaWVwdEZvcm0oJHNjb3BlLCAkbG9nKSB7XG5cdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHRvdGFsRmllbGRzID0gMDtcblx0XHR2YXIgZmllbGRzSGFzaCA9IHt9O1xuXG5cdFx0Ly9zZXQgdmlldyBtb2RlbCB2YWx1ZXNcblx0XHR2bS5jdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cdFx0dm1bJ2lucHV0cyddID0ge307XG5cdFx0dm1bJ2FwcHJvdmFscyddID0ge307XG5cblx0XHQvL2NyZWF0ZSB0aGUgbmVlZGVkIG9iamVjdHNcblx0XHRPYmplY3Qua2V5cyh2bS5kYXRhLnF1ZXN0aW9ucykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdHZhciBuYW1lID0gdm0uZGF0YS5xdWVzdGlvbnNba2V5XS5uYW1lO1xuXG5cdFx0XHQvL2FkZCBhcHByb3ZhbCB2YWx1ZXNcblx0XHRcdHZtLmFwcHJvdmFsc1tuYW1lXSA9IHtcblx0XHRcdFx0XCJhZGRyZXNzZWRcIjpmYWxzZSxcblx0XHRcdFx0XCJ2YWx1ZVwiOm51bGwsXG5cdFx0XHRcdFwidGV4dFwiOidPSz8nXG5cdFx0XHR9XG5cblx0XHRcdC8vYWRkIGlucHV0IHZhbHVlc1xuXHRcdFx0dm0uaW5wdXRzW25hbWVdID0ge307XG5cdFx0XHR2bS5pbnB1dHNbbmFtZV0udmFsdWUgPSAnJztcblx0XHRcdHZtLmlucHV0c1tuYW1lXS5zdWdnZXN0aW9uID0gJzQxNSc7XG5cblx0XHRcdC8vYnVpbGQgZmllbGRzIGhhc2hcblx0XHRcdGZpZWxkc0hhc2hbbmFtZV0gPSB0b3RhbEZpZWxkcztcblxuXHRcdFx0Ly9pbmNyaW1lbnQgZmllbGRzIGNvdW50XG5cdFx0XHR0b3RhbEZpZWxkcysrO1xuXG5cdFx0fSk7XG5cblx0XHQvL2xpc3QgdGhlIG9iamVjdHNcblx0XHQkbG9nLmluZm8odm0uaW5wdXRzKTtcblxuXHRcdC8vYWRkIHN1Z2dlc3Rpb24gdmFsdWVzXG5cdFx0dm0uaW5wdXRzWydNYXJrZXQnXS5zdWdnZXN0aW9uID0gJ1N1cmYgQ2l0eSc7XG5cdFx0dm0uaW5wdXRzWydOYW1lJ10uc3VnZ2VzdGlvbiA9ICdBaG1lZCc7XG5cdFx0dm0uaW5wdXRzWydHcm9zcyddLnN1Z2dlc3Rpb24gPSA0MTU7XG5cdFx0dm0uaW5wdXRzWydGZWUnXS5zdWdnZXN0aW9uID0gNDI7XG5cdFx0dm0uaW5wdXRzWydQYXknXS5zdWdnZXN0aW9uID0gODM7XG5cdFx0dm0uaW5wdXRzWydSZWNpZXB0cyddLnN1Z2dlc3Rpb24gPSAxMDtcblx0XHR2bS5pbnB1dHNbJ0JhbmsnXS5zdWdnZXN0aW9uID0gNjA7XG5cdFx0dm0uaW5wdXRzWydEdWUnXS5zdWdnZXN0aW9uID0gMjIwO1xuXG5cdFx0ZnVuY3Rpb24gY291bnRBcHByb3ZlZCgpIHtcblx0XHRcdHZhciBudW1iZXJPZiA9IDA7XG5cblx0XHRcdE9iamVjdC5rZXlzKHZtLmRhdGEucXVlc3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHQvL2RlZmluZSB2YXJpYWJsZVxuXHRcdFx0XHR2YXIgaXNBcHByb3ZlZCA9IHZtLmRhdGEucXVlc3Rpb25zW2tleV0uYXBwcm92YWxzLmFkZHJlc3NlZDtcblx0XHRcdFx0Ly9jaGVjayB2YWx1ZVxuXHRcdFx0XHRpZihpc0FwcHJvdmVkKSBudW1iZXJPZisrO1xuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBudW1iZXJPZjtcblx0XHR9XG5cblx0XHR2bS5yZWZyZXNoQXBwcm92YWxzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQvL2xvb3AgdGhyb3VnaCBhbGwgcXVlc3Rpb25zXG5cdFx0XHRPYmplY3Qua2V5cyh2bS5kYXRhLnF1ZXN0aW9ucykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblxuXHRcdFx0XHQvL3NldCB2YWx1ZXNcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5hcHByb3ZhbHMuYWRkcmVzc2VkID0gZmFsc2U7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uYXBwcm92YWxzLnZhbHVlID0gbnVsbDtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5hcHByb3ZhbHMudGV4dCA9IFwiT0s/XCI7XG5cblx0XHRcdFx0Ly9zZXQgY2xhc3Nlc1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmNsYXNzZXMuYXBwcm92YWxEaXZbJ3JvdW5kLWJ1dHRvbi1jaXJjbGUtZnJlZSddID0gdHJ1ZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWFwcHJvdmVkJ10gPSBmYWxzZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLXJldmlzZWQnXSA9IGZhbHNlO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0dm0uYXBwcm92ZUZpZWxkID0gZnVuY3Rpb24oZmllbGROYW1lKSB7XG5cdFx0XHR2YXIgcmVjb3JkTnVtID0gZmllbGRzSGFzaFtmaWVsZE5hbWVdO1xuXHRcdFx0dmFyIGlzQXBwcm92ZWQgPSB2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy5hZGRyZXNzZWQ7XG5cdFx0XHRcdFxuXHRcdFx0aWYoIWlzQXBwcm92ZWQpIHtcblxuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy5hZGRyZXNzZWQgPSB0cnVlO1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy52YWx1ZSA9IHRydWU7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLnRleHQgPSBcIllFUyFcIjtcblx0XHRcdFx0XG5cdFx0XHRcdC8vY2hhbmdlIHRoZSBjbGFzc1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmNsYXNzZXMuYXBwcm92YWxEaXZbJ3JvdW5kLWJ1dHRvbi1jaXJjbGUtZnJlZSddID0gZmFsc2U7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uY2xhc3Nlcy5hcHByb3ZhbERpdlsncm91bmQtYnV0dG9uLWNpcmNsZS1hcHByb3ZlZCddID0gdHJ1ZTtcblx0XHRcdFx0XG5cdFx0XHR9XG5cblx0XHRcdCRsb2cuaW5mbyhmaWVsZE5hbWUpO1xuXG5cdFx0fVxuXG5cdFx0dm0uc3VibWl0Rm9ybSA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRpZihjb3VudEFwcHJvdmVkKCkgPT0gdG90YWxGaWVsZHMpXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdzdWJtaXR0ZWQhJyk7XG5cdFx0XHRlbHNlIFxuXHRcdFx0XHRjb25zb2xlLmxvZygnbmVlZCB0byBmaW5pc2ggdGhlIGZpZWxkcycpO1xuXG5cdFx0XHRcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZGlyZWN0aXZlO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuICAgIC5jb250cm9sbGVyKCdsYW5kaW5nQ29udHJvbGxlcicsIGxhbmRpbmdDb250cm9sbGVyKTtcblxubGFuZGluZ0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckbG9jYXRpb24nXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBsYW5kaW5nQ29udHJvbGxlcigkbG9nLCAkbG9jYXRpb24pIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHR2bS5yZWRpcmVjdFRvID0gZnVuY3Rpb24oZm9ybU5hbWUpIHtcblx0XHQkbG9nLmluZm8oJ2NsaWNrZWQnLCBmb3JtTmFtZSk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy8nK2Zvcm1OYW1lKTtcblx0fVxufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuICAgIC5jb250cm9sbGVyKCdtYXJrZXRSZWNpZXB0Q29udHJvbGxlcicsIG1hcmtldFJlY2llcHRDb250cm9sbGVyKTtcblxubWFya2V0UmVjaWVwdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICdiYWNrZW5kU3J2YycsICdmb3JtRGF0YSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIG1hcmtldFJlY2llcHRDb250cm9sbGVyKCRsb2csIGJhY2tlbmRTcnZjLCBmb3JtRGF0YSkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2bS5kYXRhID0gZm9ybURhdGE7XG5cblx0dmFyIHRpdGxlQ2xhc3NlcyA9IHtcblx0XHQnY29sLXhzLTUnOnRydWUsXG5cdFx0J2NvbC1zbS01Jzp0cnVlLFxuXHRcdCdjb2wtbWQtNSc6dHJ1ZSxcblx0XHQnY29sLWxnLTUnOnRydWVcdFx0XG5cdH07XG5cblx0dmFyIGlucHV0Q2xhc3NlcyA9IHtcblx0XHQnY29sLXhzLTcnOnRydWUsXG5cdFx0J2NvbC1zbS03Jzp0cnVlLFxuXHRcdCdjb2wtbWQtNyc6dHJ1ZSxcblx0XHQnY29sLWxnLTcnOnRydWVcblx0fTtcblxufVxuYW5ndWxhclxuXHQubW9kdWxlKCdtYXJrZXRSZWNpZXB0Jylcblx0LmRpcmVjdGl2ZSgnbmF2YmFyJywgbmF2YmFyKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBuYXZiYXIoKSB7XG4gICAgbGlua0Z1bmMuJGluamVjdCA9IFtcInNjb3BlXCIsIFwiZWxcIiwgXCJhdHRyXCIsIFwiY3RybFwiXTtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnYXBwL25hdmJhci9uYXZiYXIuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge30sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogbmF2YmFyQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIG5hdmJhckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcbiAgICBcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBuYXZiYXJDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuICAgIFx0Ly92YXIgdm0gPSB0aGlzO1xuXHR9XG5cblx0cmV0dXJuIGRpcmVjdGl2ZTtcbn0iLCJhbmd1bGFyXG5cdC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuXHQuZGlyZWN0aXZlKCdyZWNpZXB0Rm9ybScsIHJlY2llcHRGb3JtKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiByZWNpZXB0Rm9ybSgpIHtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnYXBwL2Zvcm0vZm9ybS5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHRkYXRhOiAnPSdcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IHJlY2llcHRGb3JtLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgcmVjaWVwdEZvcm0uJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcbiAgICBcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiByZWNpZXB0Rm9ybSgkc2NvcGUsICRsb2cpIHtcblx0XHR2YXIgdm0gPSB0aGlzO1xuXG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgdG90YWxGaWVsZHMgPSAwO1xuXHRcdHZhciBmaWVsZHNIYXNoID0ge307XG5cblx0XHQvL3NldCB2aWV3IG1vZGVsIHZhbHVlc1xuXHRcdHZtLmN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblx0XHR2bVsnaW5wdXRzJ10gPSB7fTtcblx0XHR2bVsnYXBwcm92YWxzJ10gPSB7fTtcblxuXHRcdC8vY3JlYXRlIHRoZSBuZWVkZWQgb2JqZWN0c1xuXHRcdE9iamVjdC5rZXlzKHZtLmRhdGEucXVlc3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0dmFyIG5hbWUgPSB2bS5kYXRhLnF1ZXN0aW9uc1trZXldLm5hbWU7XG5cblx0XHRcdC8vYWRkIGFwcHJvdmFsIHZhbHVlc1xuXHRcdFx0dm0uYXBwcm92YWxzW25hbWVdID0ge1xuXHRcdFx0XHRcImFkZHJlc3NlZFwiOmZhbHNlLFxuXHRcdFx0XHRcInZhbHVlXCI6bnVsbCxcblx0XHRcdFx0XCJ0ZXh0XCI6J09LPydcblx0XHRcdH1cblxuXHRcdFx0Ly9hZGQgaW5wdXQgdmFsdWVzXG5cdFx0XHR2bS5pbnB1dHNbbmFtZV0gPSB7fTtcblx0XHRcdHZtLmlucHV0c1tuYW1lXS52YWx1ZSA9ICcnO1xuXHRcdFx0dm0uaW5wdXRzW25hbWVdLnN1Z2dlc3Rpb24gPSAnNDE1JztcblxuXHRcdFx0Ly9idWlsZCBmaWVsZHMgaGFzaFxuXHRcdFx0ZmllbGRzSGFzaFtuYW1lXSA9IHRvdGFsRmllbGRzO1xuXG5cdFx0XHQvL2luY3JpbWVudCBmaWVsZHMgY291bnRcblx0XHRcdHRvdGFsRmllbGRzKys7XG5cblx0XHR9KTtcblxuXHRcdC8vbGlzdCB0aGUgb2JqZWN0c1xuXHRcdCRsb2cuaW5mbyh2bS5pbnB1dHMpO1xuXG5cdFx0Ly9hZGQgc3VnZ2VzdGlvbiB2YWx1ZXNcblx0XHR2bS5pbnB1dHNbJ01hcmtldCddLnN1Z2dlc3Rpb24gPSAnU3VyZiBDaXR5Jztcblx0XHR2bS5pbnB1dHNbJ05hbWUnXS5zdWdnZXN0aW9uID0gJ0FobWVkJztcblx0XHR2bS5pbnB1dHNbJ0dyb3NzJ10uc3VnZ2VzdGlvbiA9IDQxNTtcblx0XHR2bS5pbnB1dHNbJ0ZlZSddLnN1Z2dlc3Rpb24gPSA0Mjtcblx0XHR2bS5pbnB1dHNbJ1BheSddLnN1Z2dlc3Rpb24gPSA4Mztcblx0XHR2bS5pbnB1dHNbJ1JlY2llcHRzJ10uc3VnZ2VzdGlvbiA9IDEwO1xuXHRcdHZtLmlucHV0c1snQmFuayddLnN1Z2dlc3Rpb24gPSA2MDtcblx0XHR2bS5pbnB1dHNbJ0R1ZSddLnN1Z2dlc3Rpb24gPSAyMjA7XG5cblx0XHRmdW5jdGlvbiBjb3VudEFwcHJvdmVkKCkge1xuXHRcdFx0dmFyIG51bWJlck9mID0gMDtcblxuXHRcdFx0T2JqZWN0LmtleXModm0uZGF0YS5xdWVzdGlvbnMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHRcdC8vZGVmaW5lIHZhcmlhYmxlXG5cdFx0XHRcdHZhciBpc0FwcHJvdmVkID0gdm0uZGF0YS5xdWVzdGlvbnNba2V5XS5hcHByb3ZhbHMuYWRkcmVzc2VkO1xuXHRcdFx0XHQvL2NoZWNrIHZhbHVlXG5cdFx0XHRcdGlmKGlzQXBwcm92ZWQpIG51bWJlck9mKys7XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIG51bWJlck9mO1xuXHRcdH1cblxuXHRcdHZtLnJlZnJlc2hBcHByb3ZhbHMgPSBmdW5jdGlvbigpIHtcblx0XHRcdC8vbG9vcCB0aHJvdWdoIGFsbCBxdWVzdGlvbnNcblx0XHRcdE9iamVjdC5rZXlzKHZtLmRhdGEucXVlc3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXG5cdFx0XHRcdC8vc2V0IHZhbHVlc1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmFwcHJvdmFscy5hZGRyZXNzZWQgPSBmYWxzZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5hcHByb3ZhbHMudmFsdWUgPSBudWxsO1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmFwcHJvdmFscy50ZXh0ID0gXCJPSz9cIjtcblxuXHRcdFx0XHQvL3NldCBjbGFzc2VzXG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uY2xhc3Nlcy5hcHByb3ZhbERpdlsncm91bmQtYnV0dG9uLWNpcmNsZS1mcmVlJ10gPSB0cnVlO1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmNsYXNzZXMuYXBwcm92YWxEaXZbJ3JvdW5kLWJ1dHRvbi1jaXJjbGUtYXBwcm92ZWQnXSA9IGZhbHNlO1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmNsYXNzZXMuYXBwcm92YWxEaXZbJ3JvdW5kLWJ1dHRvbi1jaXJjbGUtcmV2aXNlZCddID0gZmFsc2U7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHR2bS5hcHByb3ZlRmllbGQgPSBmdW5jdGlvbihmaWVsZE5hbWUpIHtcblx0XHRcdHZhciByZWNvcmROdW0gPSBmaWVsZHNIYXNoW2ZpZWxkTmFtZV07XG5cdFx0XHR2YXIgaXNBcHByb3ZlZCA9IHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLmFkZHJlc3NlZDtcblx0XHRcdFx0XG5cdFx0XHRpZighaXNBcHByb3ZlZCkge1xuXG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLmFkZHJlc3NlZCA9IHRydWU7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLnZhbHVlID0gdHJ1ZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMudGV4dCA9IFwiWUVTIVwiO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9jaGFuZ2UgdGhlIGNsYXNzXG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uY2xhc3Nlcy5hcHByb3ZhbERpdlsncm91bmQtYnV0dG9uLWNpcmNsZS1mcmVlJ10gPSBmYWxzZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWFwcHJvdmVkJ10gPSB0cnVlO1xuXHRcdFx0XHRcblx0XHRcdH1cblxuXHRcdFx0JGxvZy5pbmZvKGZpZWxkTmFtZSk7XG5cblx0XHR9XG5cblx0XHR2bS5zdWJtaXRGb3JtID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdGlmKGNvdW50QXBwcm92ZWQoKSA9PSB0b3RhbEZpZWxkcylcblx0XHRcdFx0Y29uc29sZS5sb2coJ3N1Ym1pdHRlZCEnKTtcblx0XHRcdGVsc2UgXG5cdFx0XHRcdGNvbnNvbGUubG9nKCduZWVkIHRvIGZpbmlzaCB0aGUgZmllbGRzJyk7XG5cblx0XHRcdFxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBkaXJlY3RpdmU7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuICAgIC5jb250cm9sbGVyKCdsYW5kaW5nQ29udHJvbGxlcicsIGxhbmRpbmdDb250cm9sbGVyKTtcblxubGFuZGluZ0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckbG9jYXRpb24nXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBsYW5kaW5nQ29udHJvbGxlcigkbG9nLCAkbG9jYXRpb24pIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHR2bS5yZWRpcmVjdFRvID0gZnVuY3Rpb24oZm9ybU5hbWUpIHtcblx0XHQkbG9nLmluZm8oJ2NsaWNrZWQnLCBmb3JtTmFtZSk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy8nK2Zvcm1OYW1lKTtcblx0fVxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtYXJrZXRSZWNpZXB0JylcbiAgICAuY29udHJvbGxlcignbWFya2V0UmVjaWVwdENvbnRyb2xsZXInLCBtYXJrZXRSZWNpZXB0Q29udHJvbGxlcik7XG5cbm1hcmtldFJlY2llcHRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnYmFja2VuZFNydmMnLCAnZm9ybURhdGEnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBtYXJrZXRSZWNpZXB0Q29udHJvbGxlcigkbG9nLCBiYWNrZW5kU3J2YywgZm9ybURhdGEpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dm0uZGF0YSA9IGZvcm1EYXRhO1xuXG5cdHZhciB0aXRsZUNsYXNzZXMgPSB7XG5cdFx0J2NvbC14cy01Jzp0cnVlLFxuXHRcdCdjb2wtc20tNSc6dHJ1ZSxcblx0XHQnY29sLW1kLTUnOnRydWUsXG5cdFx0J2NvbC1sZy01Jzp0cnVlXHRcdFxuXHR9O1xuXG5cdHZhciBpbnB1dENsYXNzZXMgPSB7XG5cdFx0J2NvbC14cy03Jzp0cnVlLFxuXHRcdCdjb2wtc20tNyc6dHJ1ZSxcblx0XHQnY29sLW1kLTcnOnRydWUsXG5cdFx0J2NvbC1sZy03Jzp0cnVlXG5cdH07XG5cbn0iLCJhbmd1bGFyXG5cdC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuXHQuZGlyZWN0aXZlKCduYXZiYXInLCBuYXZiYXIpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIG5hdmJhcigpIHtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnYXBwL25hdmJhci9uYXZiYXIuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge30sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogbmF2YmFyQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIG5hdmJhckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcbiAgICBcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBuYXZiYXJDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuICAgIFx0Ly92YXIgdm0gPSB0aGlzO1xuXHR9XG5cblx0cmV0dXJuIGRpcmVjdGl2ZTtcbn0iLCJhbmd1bGFyXG5cdC5tb2R1bGUoJ21hcmtldFJlY2llcHQnLCBbXG5cdFx0J25nUm91dGUnXG5cdF0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
