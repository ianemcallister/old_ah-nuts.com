function config(e){e.when("/",{templateUrl:"app/landing/landing.htm",controller:"landingController",controllerAs:"vm",resolve:{loadData:loadData}}).when("/marketReciept",{templateUrl:"app/marketReciept/marketReciept.htm",controller:"marketRecieptController",controllerAs:"vm",resolve:{formData:["backendSrvc",function(e){return e.getFormData("marketReciept")}]}}).when("/success",{templateUrl:"app/success/success.htm",controller:"successController",controllerAs:"vm"}).otherwise({redirectTo:"/"})}function loadData(e){e.loadAllForms()}function backendSrvc(e,t){function n(e){return new Promise(function(n,a){t({method:"GET",url:"assets/"+e}).then(function(e){n(e.data)},function(e){console.log("Error:",e)})})}function a(n){return e.info("got this in _post",n),new Promise(function(e,a){var s=t.post("forms/marketReciept",n).then(function(t){e("success")},function(t){e("error")});console.log(s)})}function s(e){var t=this;t.allForms={marketReciept:"marketReciept.json"};var n=t.allForms[e];return new Promise(function(a,s){"undefined"!=typeof t[e]?a(t[e]):t._get(n).then(function(n){t[e]=n,a(t[e])})})}function o(){var e=this;e.allForms={marketReciept:"marketReciept.json"},console.log(e.allForms),Object.keys(e.allForms).forEach(function(t){var n=e.allForms[t];e._get(n).then(function(n){e[t]=n.data})})}function r(t){var n=this;return e.info("got this",t),new Promise(function(e,a){n._post(t).then(function(t){e(t)})["catch"](function(e){a(e)})})}var i={_get:n,_post:a,getFormData:s,loadAllForms:o,submitFormData:r};return i}function recieptForm(){function e(e,t,n,a){}function t(e,t,n,a){function s(){c.submitBtnClasses["btn-danger"]=!1,c.submitBtnClasses["btn-success"]=!0}function o(){c.submitBtnClasses["btn-danger"]=!0,c.submitBtnClasses["btn-success"]=!1}function r(){var e=0;return Object.keys(c.data.questions).forEach(function(t){var n=c.data.questions[t].approvals.addressed;n&&e++}),e==l?s():o(),e}function i(){var e=document.getElementById("recieptImage"),t=document.getElementById("Photo").files[0],n=new FileReader,a=null;n.addEventListener("load",function(){a=n.result,e.src=a},!1),t&&(n.readAsDataURL(t),c.inputs.Photo={src:"Market_Reciept.jpg",binary:a})}var c=this,l=0,u={};c.currentDate=new Date,c.uploadedImage={src:"Market_Image.jpg",binary:null},c.inputs={},c.approvals={},c.submitBtnClasses={btn:!0,"btn-danger":!0,"btn-success":!1,"col-xs-12":!0,"col-sm-12":!0,"col-md-12":!0,"col-lg-12":!0},Object.keys(c.data.questions).forEach(function(e){var t=c.data.questions[e].name;c.approvals[t]={addressed:!1,value:null,text:"OK?"},c.inputs[t]={},c.inputs[t].value="",c.inputs[t].suggestion="415",u[t]=l,l++}),c.inputs.Market.suggestion="Surf City",c.inputs.Name.suggestion="Ahmed",c.inputs.Gross.suggestion=415,c.inputs.Fee.suggestion=42,c.inputs.Pay.suggestion=83,c.inputs.Reciepts.suggestion=10,c.inputs.Bank.suggestion=60,c.inputs.Due.suggestion=220,c.refreshApprovals=function(){Object.keys(c.data.questions).forEach(function(e){var t=c.data.questions[e].name;c.inputs[t].value="",c.data.questions[e].approvals.addressed=!1,c.data.questions[e].approvals.value=null,c.data.questions[e].approvals.text="OK?",c.data.questions[e].classes.approvalDiv["round-button-circle-free"]=!0,c.data.questions[e].classes.approvalDiv["round-button-circle-approved"]=!1,c.data.questions[e].classes.approvalDiv["round-button-circle-revised"]=!1,c.data.questions[e].classes.inputDiv["has-success"]=!1,c.data.questions[e].classes.inputDiv["has-warning"]=!1,c.data.questions[e].classes.inputDiv["has-danger"]=!1}),r()},c.changed=function(e){var t=u[e];c.data.questions[t].approvals.addressed=!0,c.data.questions[t].approvals.value=!0,c.data.questions[t].approvals.text="NO!",c.data.questions[t].classes.approvalDiv["round-button-circle-free"]=!1,c.data.questions[t].classes.approvalDiv["round-button-circle-revised"]=!0,c.data.questions[t].classes.inputDiv["has-danger"]=!0,r()},c.approveField=function(e){var t=u[e],n=c.data.questions[t].approvals.addressed;n||(c.inputs[e].value=c.inputs[e].suggestion,c.data.questions[t].approvals.addressed=!0,c.data.questions[t].approvals.value=!0,c.data.questions[t].approvals.text="YES!",c.data.questions[t].classes.approvalDiv["round-button-circle-free"]=!1,c.data.questions[t].classes.approvalDiv["round-button-circle-approved"]=!0,c.data.questions[t].classes.inputDiv["has-success"]=!0,r())},e.photoAdded=function(){var n=u.Photo;i(),t.info(c.inputs.Photo),c.data.questions[n].approvals.addressed=!0,c.data.questions[n].approvals.value=!0,c.data.questions[n].classes.inputDiv["has-success"]=!0,r(),e.$apply()},c.submitForm=function(){if(r()==l){var s={};Object.keys(c.inputs).forEach(function(e){"Photo"!==e?"number"==typeof c.inputs[e].value?s[e]=100*c.inputs[e].value:s[e]=c.inputs[e].value:s[e]=c.inputs[e]}),a.submitFormData(s).then(function(a){t.info("submitted!",a),n.path("/success"),e.$apply()})["catch"](function(e){t.info("Error:",e)})}else console.log("need to finish the fields")},c.refreshApprovals()}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"app/form/form.directive.htm",replace:!0,scope:{data:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$scope","$log","$location","backendSrvc"],n}function marketRecieptController(e,t,n){var a=this;a.data=n}function landingController(e,t){var n=this;n.redirectTo=function(n){e.info("clicked",n),t.path("/"+n)}}function navbar(){function e(e,t,n,a){}function t(e,t){}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"app/navbar/navbar.directive.htm",replace:!0,scope:{},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$scope","$log"],n}function successController(e){e.info("success controller")}config.$inject=["$routeProvider"],loadData.$inject=["backendSrvc"],angular.module("marketReciept",["ngRoute"]),angular.module("marketReciept").config(config),angular.module("marketReciept").factory("backendSrvc",backendSrvc),backendSrvc.$inject=["$log","$http"],angular.module("marketReciept").directive("recieptForm",recieptForm),angular.module("marketReciept").controller("marketRecieptController",marketRecieptController),marketRecieptController.$inject=["$log","backendSrvc","formData"],angular.module("marketReciept").controller("landingController",landingController),landingController.$inject=["$log","$location"],angular.module("marketReciept").directive("navbar",navbar),angular.module("marketReciept").controller("successController",successController),successController.$inject=["$log"];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9yb3V0ZS1jb25maWcuanMiLCJhcHAvYmFja2VuZFNydmMvYmFja2VuZFNydmMuanMiLCJhcHAuanMiLCJhcHAvZm9ybS9mb3JtLmRpcmVjdGl2ZS5qcyIsImFwcC9tYXJrZXRSZWNpZXB0L21hcmtldFJlY2llcHQuY29udHJvbGxlci5qcyIsImFwcC9sYW5kaW5nL2xhbmRpbmcuY29udHJvbGxlci5qcyIsImFwcC9uYXZiYXIvbmF2YmFyLmRpcmVjdGl2ZS5qcyIsImFwcC9zdWNjZXNzL3N1Y2Nlc3MuY29udHJvbGxlci5qcyIsImFwcC5tb2R1bGUuanMiXSwibmFtZXMiOlsiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwicmVzb2x2ZSIsImxvYWREYXRhIiwiZm9ybURhdGEiLCJiYWNrZW5kU3J2YyIsImdldEZvcm1EYXRhIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImxvYWRBbGxGb3JtcyIsIiRsb2ciLCIkaHR0cCIsIl9nZXQiLCJmaWxlbmFtZSIsIlByb21pc2UiLCJyZWplY3QiLCJtZXRob2QiLCJ1cmwiLCJ0aGVuIiwicmVzcG9uc2UiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsIl9wb3N0IiwiaW5mbyIsInJlc3VsdCIsInBvc3QiLCJmb3JtIiwic2VydmljZSIsInRoaXMiLCJhbGxGb3JtcyIsIm1hcmtldFJlY2llcHQiLCJyZWoiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsInN1Ym1pdEZvcm1EYXRhIiwiZXJyIiwicmVjaWVwdEZvcm0iLCJsaW5rRnVuYyIsInNjb3BlIiwiZWwiLCJhdHRyIiwiY3RybCIsIiRzY29wZSIsIiRsb2NhdGlvbiIsInVubG9ja1N1Ym1pdEJ0biIsInZtIiwic3VibWl0QnRuQ2xhc3NlcyIsImxvY2tTdWJtaXRCdG4iLCJjb3VudEFwcHJvdmVkIiwibnVtYmVyT2YiLCJxdWVzdGlvbnMiLCJrZXkiLCJpc0FwcHJvdmVkIiwiYXBwcm92YWxzIiwiYWRkcmVzc2VkIiwidG90YWxGaWVsZHMiLCJnZXRQaG90byIsInByZXZpZXciLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZmlsZSIsImZpbGVzIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsImltYWdlYmluYXJ5IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNyYyIsInJlYWRBc0RhdGFVUkwiLCJpbnB1dHMiLCJiaW5hcnkiLCJmaWVsZHNIYXNoIiwiY3VycmVudERhdGUiLCJEYXRlIiwidXBsb2FkZWRJbWFnZSIsImJ0biIsImJ0bi1kYW5nZXIiLCJidG4tc3VjY2VzcyIsImNvbC14cy0xMiIsImNvbC1zbS0xMiIsImNvbC1tZC0xMiIsImNvbC1sZy0xMiIsIm5hbWUiLCJ2YWx1ZSIsInRleHQiLCJzdWdnZXN0aW9uIiwicmVmcmVzaEFwcHJvdmFscyIsInJlY29yZE5hbWUiLCJjbGFzc2VzIiwiYXBwcm92YWxEaXYiLCJpbnB1dERpdiIsImNoYW5nZWQiLCJmaWVsZE5hbWUiLCJyZWNvcmROdW0iLCJhcHByb3ZlRmllbGQiLCJwaG90b0FkZGVkIiwiJGFwcGx5Iiwic3VibWl0Rm9ybSIsImRlbGl2ZXJ5T2JqZWN0IiwicGF0aCIsImVycm9yIiwiJGluamVjdCIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwicmVwbGFjZSIsImxpbmsiLCJiaW5kVG9Db250cm9sbGVyIiwibWFya2V0UmVjaWVwdENvbnRyb2xsZXIiLCJsYW5kaW5nQ29udHJvbGxlciIsImZvcm1OYW1lIiwibmF2YmFyIiwibmF2YmFyQ29udHJvbGxlciIsInN1Y2Nlc3NDb250cm9sbGVyIiwiYW5ndWxhciIsIm1vZHVsZSIsImZhY3RvcnkiXSwibWFwcGluZ3MiOiJBQUlBLFFBQUFBLFFBQUFDLEdBQ0FBLEVBQ0FDLEtBQUEsS0FDQUMsWUFBQSwwQkFDQUMsV0FBQSxvQkFDQUMsYUFBQSxLQUNBQyxTQUNBQyxTQUFBQSxZQUdBTCxLQUFBLGtCQUNBQyxZQUFBLHNDQUNBQyxXQUFBLDBCQUNBQyxhQUFB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RkFzSCxRQUNBQyxPQUFBLGlCQUNBQyxRQUFBLGNBQUEvRyxhQUVBQSxZQUFBaUcsU0FBQSxPQUFBLFNFSkFZLFFBQ0FDLE9BQUEsaUJBQ0FaLFVBQUEsY0FBQWpFLGFDRkE0RSxRQUNBQyxPQUFBLGlCQUNBbkgsV0FBQSwwQkFBQTRHLHlCQUVBQSx3QkFBQU4sU0FBQSxPQUFBLGNBQUEsWUNKQVksUUFDQUMsT0FBQSxpQkFDQW5ILFdBQUEsb0JBQUE2RyxtQkFFQUEsa0JBQUFQLFNBQUEsT0FBQSxhQ0pBWSxRQUNBQyxPQUFBLGlCQUNBWixVQUFBLFNBQUFRLFFDRkFHLFFBQ0FDLE9BQUEsaUJBQ0FuSCxXQUFBLG9CQUFBaUgsbUJBRUFBLGtCQUFBWCxTQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXJcblx0Lm1vZHVsZSgnbWFya2V0UmVjaWVwdCcpXG5cdC5jb25maWcoY29uZmlnKTtcbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XG5cdCRyb3V0ZVByb3ZpZGVyXG4gICAgLndoZW4oJy8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2xhbmRpbmcvbGFuZGluZy5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnbGFuZGluZ0NvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHtcdC8qIEBuZ0luamVjdCAqL1xuICAgICAgICBcdGxvYWREYXRhOmxvYWREYXRhXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvbWFya2V0UmVjaWVwdCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvbWFya2V0UmVjaWVwdC9tYXJrZXRSZWNpZXB0Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdtYXJrZXRSZWNpZXB0Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgXHRmb3JtRGF0YTogZnVuY3Rpb24oYmFja2VuZFNydmMpIHtcbiAgICAgICAgXHRcdC8vcmV0dXJuIHsncmVzb2x2ZVRlc3QnOidnb29kIHRlc3QnfTtcbiAgICAgICAgXHRcdHJldHVybiBiYWNrZW5kU3J2Yy5nZXRGb3JtRGF0YSgnbWFya2V0UmVjaWVwdCcpO1xuICAgICAgICBcdH1cbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy9zdWNjZXNzJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9zdWNjZXNzL3N1Y2Nlc3MuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ3N1Y2Nlc3NDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGxvYWREYXRhKGJhY2tlbmRTcnZjKSB7XG5cdGJhY2tlbmRTcnZjLmxvYWRBbGxGb3JtcygpO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtYXJrZXRSZWNpZXB0JylcbiAgICAuZmFjdG9yeSgnYmFja2VuZFNydmMnLCBiYWNrZW5kU3J2Yyk7XG5cbmJhY2tlbmRTcnZjLiRpbmplY3QgPSBbJyRsb2cnLCAnJGh0dHAnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBiYWNrZW5kU3J2YygkbG9nLCAkaHR0cCkge1xuXHR2YXIgc2VydmljZSA9IHRoaXM7XG5cblx0dmFyIGJhY2tlbmRTcnZjID0ge1xuXHRcdF9nZXQ6X2dldCxcblx0XHRfcG9zdDpfcG9zdCxcblx0XHRnZXRGb3JtRGF0YTpnZXRGb3JtRGF0YSxcblx0XHRsb2FkQWxsRm9ybXM6bG9hZEFsbEZvcm1zLFxuXHRcdHN1Ym1pdEZvcm1EYXRhOnN1Ym1pdEZvcm1EYXRhXG5cdH07XG5cblx0ZnVuY3Rpb24gX2dldChmaWxlbmFtZSkge1xuXHRcdHZhciB0aGlzUmVzcG9uc2UgPSBudWxsO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHRcdHVybDogJ2Fzc2V0cy8nICsgZmlsZW5hbWVcblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRyZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHRcblx0XHRcdH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ0Vycm9yOicscmVzcG9uc2UpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gX3Bvc3QoZGF0YSkge1xuXG5cdFx0JGxvZy5pbmZvKCdnb3QgdGhpcyBpbiBfcG9zdCcsIGRhdGEpO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHR2YXIgcmVzdWx0ID0gJGh0dHAucG9zdCgnZm9ybXMvbWFya2V0UmVjaWVwdCcsIGRhdGEpXG5cdFx0XHQudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcblx0XHRcdFx0cmVzb2x2ZSgnc3VjY2VzcycpO1xuXHRcdFx0fSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRyZXNvbHZlKCdlcnJvcicpO1xuXHRcdFx0fSk7XG5cblx0XHRcdGNvbnNvbGUubG9nKHJlc3VsdCk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldEZvcm1EYXRhKGZvcm0pIHtcblx0XHR2YXIgc2VydmljZSA9IHRoaXM7XG5cblx0XHRzZXJ2aWNlLmFsbEZvcm1zID0ge1wibWFya2V0UmVjaWVwdFwiOidtYXJrZXRSZWNpZXB0Lmpzb24nfTtcblxuXHRcdHZhciB1cmwgPSBzZXJ2aWNlLmFsbEZvcm1zW2Zvcm1dO1xuXHRcdFxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWopIHtcblx0XHRcdC8vY2hlY2sgZm9yIGV4aXN0aW5nIHZhbHVlc1xuXHRcdFx0aWYodHlwZW9mIHNlcnZpY2VbZm9ybV0gIT09ICd1bmRlZmluZWQnKVxuXHRcdFx0XHRyZXNvbHZlKHNlcnZpY2VbZm9ybV0pO1xuXHRcdFx0ZWxzZSB7IFxuXHRcdFx0XHRzZXJ2aWNlLl9nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0c2VydmljZVtmb3JtXSA9IHJlc3BvbnNlO1xuXHRcdFx0XHRcdHJlc29sdmUoc2VydmljZVtmb3JtXSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0fSk7XG5cdFxuXHR9XG5cblx0ZnVuY3Rpb24gbG9hZEFsbEZvcm1zKCkge1xuXHRcdHZhciBzZXJ2aWNlID0gdGhpcztcblxuXHRcdHNlcnZpY2UuYWxsRm9ybXMgPSB7XCJtYXJrZXRSZWNpZXB0XCI6J21hcmtldFJlY2llcHQuanNvbid9O1xuXHRcblx0XHRjb25zb2xlLmxvZyhzZXJ2aWNlLmFsbEZvcm1zKTtcblxuXHRcdC8vcnVuIHRocm91Z2ggZWFjaCBmb3JtXG5cdFx0T2JqZWN0LmtleXMoc2VydmljZS5hbGxGb3JtcykuZm9yRWFjaChmdW5jdGlvbihmb3JtKSB7XG5cdFx0XHR2YXIgdXJsID0gc2VydmljZS5hbGxGb3Jtc1tmb3JtXTtcblxuXHRcdFx0c2VydmljZS5fZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0XHRzZXJ2aWNlW2Zvcm1dID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHN1Ym1pdEZvcm1EYXRhKGRhdGEpIHtcblx0XHR2YXIgc2VydmljZSA9IHRoaXM7XG5cblx0XHQvL25vdGlmeSB0aGUgdXNlclxuXHRcdCRsb2cuaW5mbygnZ290IHRoaXMnLCBkYXRhKTtcblxuXHRcdFxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9zdWJtaXQgZm9ybVxuXHRcdFx0c2VydmljZS5fcG9zdChkYXRhKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdC8vbm90aWZ5IHRoZSB1c2VyXG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ3Jlc3BvbnNlOicsIHJlc3BvbnNlKTtcblx0XHRcdFx0Ly93aGVuIHN1Y2Nlc3MgaXMgYWNoaWV2ZWQgcmVkaXJlY3Rcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZygnRXJyb3I6JywgZXJyKTtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRyZXR1cm4gYmFja2VuZFNydmM7XG59IiwiXG5jb25maWcuJGluamVjdCA9IFtcIiRyb3V0ZVByb3ZpZGVyXCJdO1xubG9hZERhdGEuJGluamVjdCA9IFtcImJhY2tlbmRTcnZjXCJdO2FuZ3VsYXJcblx0Lm1vZHVsZSgnbWFya2V0UmVjaWVwdCcsIFtcblx0XHQnbmdSb3V0ZSdcblx0XSk7XG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWFya2V0UmVjaWVwdCcpXG5cdC5jb25maWcoY29uZmlnKTtcbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XG5cdCRyb3V0ZVByb3ZpZGVyXG4gICAgLndoZW4oJy8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2xhbmRpbmcvbGFuZGluZy5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnbGFuZGluZ0NvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHtcdC8qIEBuZ0luamVjdCAqL1xuICAgICAgICBcdGxvYWREYXRhOmxvYWREYXRhXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvbWFya2V0UmVjaWVwdCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvbWFya2V0UmVjaWVwdC9tYXJrZXRSZWNpZXB0Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdtYXJrZXRSZWNpZXB0Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgXHRmb3JtRGF0YTogW1wiYmFja2VuZFNydmNcIiwgZnVuY3Rpb24oYmFja2VuZFNydmMpIHtcbiAgICAgICAgXHRcdC8vcmV0dXJuIHsncmVzb2x2ZVRlc3QnOidnb29kIHRlc3QnfTtcbiAgICAgICAgXHRcdHJldHVybiBiYWNrZW5kU3J2Yy5nZXRGb3JtRGF0YSgnbWFya2V0UmVjaWVwdCcpO1xuICAgICAgICBcdH1dXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvc3VjY2VzcycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvc3VjY2Vzcy9zdWNjZXNzLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdzdWNjZXNzQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBsb2FkRGF0YShiYWNrZW5kU3J2Yykge1xuXHRiYWNrZW5kU3J2Yy5sb2FkQWxsRm9ybXMoKTtcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtYXJrZXRSZWNpZXB0JylcbiAgICAuZmFjdG9yeSgnYmFja2VuZFNydmMnLCBiYWNrZW5kU3J2Yyk7XG5cbmJhY2tlbmRTcnZjLiRpbmplY3QgPSBbJyRsb2cnLCAnJGh0dHAnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBiYWNrZW5kU3J2YygkbG9nLCAkaHR0cCkge1xuXHR2YXIgc2VydmljZSA9IHRoaXM7XG5cblx0dmFyIGJhY2tlbmRTcnZjID0ge1xuXHRcdF9nZXQ6X2dldCxcblx0XHRfcG9zdDpfcG9zdCxcblx0XHRnZXRGb3JtRGF0YTpnZXRGb3JtRGF0YSxcblx0XHRsb2FkQWxsRm9ybXM6bG9hZEFsbEZvcm1zLFxuXHRcdHN1Ym1pdEZvcm1EYXRhOnN1Ym1pdEZvcm1EYXRhXG5cdH07XG5cblx0ZnVuY3Rpb24gX2dldChmaWxlbmFtZSkge1xuXHRcdHZhciB0aGlzUmVzcG9uc2UgPSBudWxsO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHRcdHVybDogJ2Fzc2V0cy8nICsgZmlsZW5hbWVcblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRyZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHRcblx0XHRcdH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ0Vycm9yOicscmVzcG9uc2UpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gX3Bvc3QoZGF0YSkge1xuXG5cdFx0JGxvZy5pbmZvKCdnb3QgdGhpcyBpbiBfcG9zdCcsIGRhdGEpO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHR2YXIgcmVzdWx0ID0gJGh0dHAucG9zdCgnZm9ybXMvbWFya2V0UmVjaWVwdCcsIGRhdGEpXG5cdFx0XHQudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcblx0XHRcdFx0cmVzb2x2ZSgnc3VjY2VzcycpO1xuXHRcdFx0fSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRyZXNvbHZlKCdlcnJvcicpO1xuXHRcdFx0fSk7XG5cblx0XHRcdGNvbnNvbGUubG9nKHJlc3VsdCk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldEZvcm1EYXRhKGZvcm0pIHtcblx0XHR2YXIgc2VydmljZSA9IHRoaXM7XG5cblx0XHRzZXJ2aWNlLmFsbEZvcm1zID0ge1wibWFya2V0UmVjaWVwdFwiOidtYXJrZXRSZWNpZXB0Lmpzb24nfTtcblxuXHRcdHZhciB1cmwgPSBzZXJ2aWNlLmFsbEZvcm1zW2Zvcm1dO1xuXHRcdFxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWopIHtcblx0XHRcdC8vY2hlY2sgZm9yIGV4aXN0aW5nIHZhbHVlc1xuXHRcdFx0aWYodHlwZW9mIHNlcnZpY2VbZm9ybV0gIT09ICd1bmRlZmluZWQnKVxuXHRcdFx0XHRyZXNvbHZlKHNlcnZpY2VbZm9ybV0pO1xuXHRcdFx0ZWxzZSB7IFxuXHRcdFx0XHRzZXJ2aWNlLl9nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0c2VydmljZVtmb3JtXSA9IHJlc3BvbnNlO1xuXHRcdFx0XHRcdHJlc29sdmUoc2VydmljZVtmb3JtXSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0fSk7XG5cdFxuXHR9XG5cblx0ZnVuY3Rpb24gbG9hZEFsbEZvcm1zKCkge1xuXHRcdHZhciBzZXJ2aWNlID0gdGhpcztcblxuXHRcdHNlcnZpY2UuYWxsRm9ybXMgPSB7XCJtYXJrZXRSZWNpZXB0XCI6J21hcmtldFJlY2llcHQuanNvbid9O1xuXHRcblx0XHRjb25zb2xlLmxvZyhzZXJ2aWNlLmFsbEZvcm1zKTtcblxuXHRcdC8vcnVuIHRocm91Z2ggZWFjaCBmb3JtXG5cdFx0T2JqZWN0LmtleXMoc2VydmljZS5hbGxGb3JtcykuZm9yRWFjaChmdW5jdGlvbihmb3JtKSB7XG5cdFx0XHR2YXIgdXJsID0gc2VydmljZS5hbGxGb3Jtc1tmb3JtXTtcblxuXHRcdFx0c2VydmljZS5fZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0XHRzZXJ2aWNlW2Zvcm1dID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHN1Ym1pdEZvcm1EYXRhKGRhdGEpIHtcblx0XHR2YXIgc2VydmljZSA9IHRoaXM7XG5cblx0XHQvL25vdGlmeSB0aGUgdXNlclxuXHRcdCRsb2cuaW5mbygnZ290IHRoaXMnLCBkYXRhKTtcblxuXHRcdFxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9zdWJtaXQgZm9ybVxuXHRcdFx0c2VydmljZS5fcG9zdChkYXRhKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdC8vbm90aWZ5IHRoZSB1c2VyXG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ3Jlc3BvbnNlOicsIHJlc3BvbnNlKTtcblx0XHRcdFx0Ly93aGVuIHN1Y2Nlc3MgaXMgYWNoaWV2ZWQgcmVkaXJlY3Rcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZygnRXJyb3I6JywgZXJyKTtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRyZXR1cm4gYmFja2VuZFNydmM7XG59XG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuXHQuZGlyZWN0aXZlKCdyZWNpZXB0Rm9ybScsIHJlY2llcHRGb3JtKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiByZWNpZXB0Rm9ybSgpIHtcbiAgICBsaW5rRnVuYy4kaW5qZWN0ID0gW1wic2NvcGVcIiwgXCJlbFwiLCBcImF0dHJcIiwgXCJjdHJsXCJdO1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICdhcHAvZm9ybS9mb3JtLmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGRhdGE6ICc9J1xuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogcmVjaWVwdEZvcm0sXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICByZWNpZXB0Rm9ybS4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnYmFja2VuZFNydmMnXTtcbiAgICBcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiByZWNpZXB0Rm9ybSgkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgYmFja2VuZFNydmMpIHtcblx0XHR2YXIgdm0gPSB0aGlzO1xuXG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgdG90YWxGaWVsZHMgPSAwO1xuXHRcdHZhciBmaWVsZHNIYXNoID0ge307XG5cblx0XHQvL3NldCB2aWV3IG1vZGVsIHZhbHVlc1xuXHRcdHZtLmN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblx0XHR2bS51cGxvYWRlZEltYWdlID0ge1xuXHRcdFx0c3JjOiAnTWFya2V0X0ltYWdlLmpwZycsXG5cdFx0XHRiaW5hcnk6IG51bGxcblx0XHR9O1xuXG5cdFx0dm1bJ2lucHV0cyddID0ge307XG5cdFx0dm1bJ2FwcHJvdmFscyddID0ge307XG5cdFx0dm1bJ3N1Ym1pdEJ0bkNsYXNzZXMnXSA9IHtcblx0XHRcdFwiYnRuXCI6dHJ1ZSxcblx0XHRcdFwiYnRuLWRhbmdlclwiOnRydWUsXG5cdFx0XHRcImJ0bi1zdWNjZXNzXCI6ZmFsc2UsXG5cdFx0XHRcImNvbC14cy0xMlwiOnRydWUsXG5cdFx0XHRcImNvbC1zbS0xMlwiOnRydWUsXG5cdFx0XHRcImNvbC1tZC0xMlwiOnRydWUsXG5cdFx0XHRcImNvbC1sZy0xMlwiOnRydWVcblx0XHR9XG5cblx0XHQvL2NyZWF0ZSB0aGUgbmVlZGVkIG9iamVjdHNcblx0XHRPYmplY3Qua2V5cyh2bS5kYXRhLnF1ZXN0aW9ucykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdHZhciBuYW1lID0gdm0uZGF0YS5xdWVzdGlvbnNba2V5XS5uYW1lO1xuXG5cdFx0XHQvL2FkZCBhcHByb3ZhbCB2YWx1ZXNcblx0XHRcdHZtLmFwcHJvdmFsc1tuYW1lXSA9IHtcblx0XHRcdFx0XCJhZGRyZXNzZWRcIjpmYWxzZSxcblx0XHRcdFx0XCJ2YWx1ZVwiOm51bGwsXG5cdFx0XHRcdFwidGV4dFwiOidPSz8nXG5cdFx0XHR9XG5cblx0XHRcdC8vYWRkIGlucHV0IHZhbHVlc1xuXHRcdFx0dm0uaW5wdXRzW25hbWVdID0ge307XG5cdFx0XHR2bS5pbnB1dHNbbmFtZV0udmFsdWUgPSAnJztcblx0XHRcdHZtLmlucHV0c1tuYW1lXS5zdWdnZXN0aW9uID0gJzQxNSc7XG5cblx0XHRcdC8vYnVpbGQgZmllbGRzIGhhc2hcblx0XHRcdGZpZWxkc0hhc2hbbmFtZV0gPSB0b3RhbEZpZWxkcztcblxuXHRcdFx0Ly9pbmNyaW1lbnQgZmllbGRzIGNvdW50XG5cdFx0XHR0b3RhbEZpZWxkcysrO1xuXG5cdFx0fSk7XG5cblx0XHQvL2dldCBzdWdnZXN0ZWQgdmFsdWVzXG5cdFx0dm0uaW5wdXRzWydNYXJrZXQnXS5zdWdnZXN0aW9uID0gJ1N1cmYgQ2l0eSc7XG5cdFx0dm0uaW5wdXRzWydOYW1lJ10uc3VnZ2VzdGlvbiA9ICdBaG1lZCc7XG5cdFx0dm0uaW5wdXRzWydHcm9zcyddLnN1Z2dlc3Rpb24gPSA0MTU7XG5cdFx0dm0uaW5wdXRzWydGZWUnXS5zdWdnZXN0aW9uID0gNDI7XG5cdFx0dm0uaW5wdXRzWydQYXknXS5zdWdnZXN0aW9uID0gODM7XG5cdFx0dm0uaW5wdXRzWydSZWNpZXB0cyddLnN1Z2dlc3Rpb24gPSAxMDtcblx0XHR2bS5pbnB1dHNbJ0JhbmsnXS5zdWdnZXN0aW9uID0gNjA7XG5cdFx0dm0uaW5wdXRzWydEdWUnXS5zdWdnZXN0aW9uID0gMjIwO1xuXG5cdFx0ZnVuY3Rpb24gdW5sb2NrU3VibWl0QnRuKCkge1xuXHRcdFx0Ly9cblx0XHRcdC8vJGxvZy5pbmZvKCdVbmxvY2tpbmcgYnRuJyk7XG5cdFx0XHR2bS5zdWJtaXRCdG5DbGFzc2VzWydidG4tZGFuZ2VyJ10gPSBmYWxzZTtcblx0XHRcdHZtLnN1Ym1pdEJ0bkNsYXNzZXNbJ2J0bi1zdWNjZXNzJ10gPSB0cnVlO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGxvY2tTdWJtaXRCdG4oKSB7XG5cdFx0XHQvL1xuXHRcdFx0Ly8kbG9nLmluZm8oJ0xvY2tpbmcgYnRuJyk7XG5cdFx0XHR2bS5zdWJtaXRCdG5DbGFzc2VzWydidG4tZGFuZ2VyJ10gPSB0cnVlO1xuXHRcdFx0dm0uc3VibWl0QnRuQ2xhc3Nlc1snYnRuLXN1Y2Nlc3MnXSA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNvdW50QXBwcm92ZWQoKSB7XG5cdFx0XHR2YXIgbnVtYmVyT2YgPSAwO1xuXG5cdFx0XHRPYmplY3Qua2V5cyh2bS5kYXRhLnF1ZXN0aW9ucykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0Ly9kZWZpbmUgdmFyaWFibGVcblx0XHRcdFx0dmFyIGlzQXBwcm92ZWQgPSB2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmFwcHJvdmFscy5hZGRyZXNzZWQ7XG5cdFx0XHRcdC8vY2hlY2sgdmFsdWVcblx0XHRcdFx0aWYoaXNBcHByb3ZlZCkgbnVtYmVyT2YrKztcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyRsb2cuaW5mbyhudW1iZXJPZiwgdG90YWxGaWVsZHMsIG51bWJlck9mPT10b3RhbEZpZWxkcyk7XG5cdFx0XHRpZihudW1iZXJPZj09dG90YWxGaWVsZHMpIHVubG9ja1N1Ym1pdEJ0bigpO1xuXHRcdFx0ZWxzZSBsb2NrU3VibWl0QnRuKCk7XG5cblx0XHRcdHJldHVybiBudW1iZXJPZjtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRQaG90bygpIHtcblx0XHRcdHZhciBwcmV2aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2llcHRJbWFnZScpXG5cdFx0XHR2YXIgZmlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdQaG90bycpLmZpbGVzWzBdO1xuXHRcdFx0dmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdFx0XHR2YXIgaW1hZ2ViaW5hcnkgPSBudWxsO1xuXG5cdFx0XHRyZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpbWFnZWJpbmFyeSA9IHJlYWRlci5yZXN1bHQ7XG5cdFx0XHRcdHByZXZpZXcuc3JjID0gaW1hZ2ViaW5hcnk7XG5cblx0XHRcdH0sIGZhbHNlKTtcblxuXHRcdFx0aWYgKGZpbGUpIHtcblx0XHRcdFx0Ly9wcmV2aWV3IHRoZSBpbWFnZVxuXHRcdFx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcblxuXHRcdFx0XHQvL3NhdmUgdGhlIHZhbHVlIHRvIHRoZSB2YXJpYWJsZVxuXHRcdFx0XHR2bS5pbnB1dHNbJ1Bob3RvJ10gPSB7XG5cdFx0XHRcdFx0c3JjOiAnTWFya2V0X1JlY2llcHQuanBnJyxcblx0XHRcdFx0XHRiaW5hcnk6IGltYWdlYmluYXJ5XG5cdFx0XHRcdH07XHRcdFx0XHRcblx0XHRcdH1cblxuXHRcdFx0LypyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0dmFyIGRhdGEgPSBlLnRhcmdldC5yZXN1bHQ7XG5cdFx0XHRcdFxuXHRcdFx0XHQkbG9nLmluZm8oJ2dvdCBoZXJlJyk7XG5cblx0XHRcdFx0Ly9zYXZlIHRoZSB2YWx1ZSB0byB0aGUgdmFyaWFibGVcblx0XHRcdFx0dm0uaW5wdXRzWydQaG90byddID0ge1xuXHRcdFx0XHRcdHNyYzogJ01hcmtldF9SZWNpZXB0LmpwZycsXG5cdFx0XHRcdFx0YmluYXJ5OiBkYXRhXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQkbG9nLmluZm8oJ2ZpbGUgbG9hZGVkJywgdm0uaW5wdXRzWydQaG90byddKTtcblx0XHRcdH1cblx0XHRcdCRsb2cuaW5mbygnZ290IGhlcmUnKTtcblx0XHRcdHIucmVhZEFzRGF0YVVSTChmaWxlKTsqL1xuXHRcdH1cblxuXHRcdHZtLnJlZnJlc2hBcHByb3ZhbHMgPSBmdW5jdGlvbigpIHtcblx0XHRcdC8vbG9vcCB0aHJvdWdoIGFsbCBxdWVzdGlvbnNcblx0XHRcdE9iamVjdC5rZXlzKHZtLmRhdGEucXVlc3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHR2YXIgcmVjb3JkTmFtZSA9IHZtLmRhdGEucXVlc3Rpb25zW2tleV0ubmFtZTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vcmVzZXQgc3VnZ2VzdGlvbnNcblxuXHRcdFx0XHQvL3Jlc2V0IHZhbHVlc1xuXHRcdFx0XHR2bS5pbnB1dHNbcmVjb3JkTmFtZV0udmFsdWUgPSAnJztcblxuXHRcdFx0XHQvL3NldCB2YWx1ZXNcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5hcHByb3ZhbHMuYWRkcmVzc2VkID0gZmFsc2U7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uYXBwcm92YWxzLnZhbHVlID0gbnVsbDtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5hcHByb3ZhbHMudGV4dCA9IFwiT0s/XCI7XG5cblx0XHRcdFx0Ly9zZXQgY2xhc3Nlc1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmNsYXNzZXMuYXBwcm92YWxEaXZbJ3JvdW5kLWJ1dHRvbi1jaXJjbGUtZnJlZSddID0gdHJ1ZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWFwcHJvdmVkJ10gPSBmYWxzZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLXJldmlzZWQnXSA9IGZhbHNlO1xuXHRcdFx0XHRcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmlucHV0RGl2WydoYXMtc3VjY2VzcyddID0gZmFsc2U7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uY2xhc3Nlcy5pbnB1dERpdlsnaGFzLXdhcm5pbmcnXSA9IGZhbHNlO1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmNsYXNzZXMuaW5wdXREaXZbJ2hhcy1kYW5nZXInXSA9IGZhbHNlO1xuXHRcdFx0fSk7XG5cblx0XHRcdGNvdW50QXBwcm92ZWQoKTtcblx0XHR9XG5cblx0XHR2bS5jaGFuZ2VkID0gZnVuY3Rpb24oZmllbGROYW1lKSB7XG5cdFx0XHR2YXIgcmVjb3JkTnVtID0gZmllbGRzSGFzaFtmaWVsZE5hbWVdO1xuXHRcdFx0Ly9ub3RpZnkgdGhlIHJlY29yZCBiZWluZyBjaGFuZ2VkXG5cdFx0XHQvLyRsb2cuaW5mbyhmaWVsZE5hbWUpO1xuXG5cdFx0XHQvL3VwZGF0ZSB0aGUgYXBwcm92YWwgYnV0dG9uXG5cdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy5hZGRyZXNzZWQgPSB0cnVlO1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMudmFsdWUgPSB0cnVlO1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMudGV4dCA9IFwiTk8hXCI7XG5cblx0XHRcdC8vY2hhbmdlIHRoZSBjbGFzc1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWZyZWUnXSA9IGZhbHNlO1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLXJldmlzZWQnXSA9IHRydWU7XG5cdFx0XHRcblx0XHRcdC8vY2hhbmdlIHRoZSBpbnB1dCBjbGFzc1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmlucHV0RGl2WydoYXMtZGFuZ2VyJ10gPSB0cnVlO1xuXG5cdFx0XHRjb3VudEFwcHJvdmVkKCk7XG5cdFx0fVxuXG5cdFx0dm0uYXBwcm92ZUZpZWxkID0gZnVuY3Rpb24oZmllbGROYW1lKSB7XG5cdFx0XHR2YXIgcmVjb3JkTnVtID0gZmllbGRzSGFzaFtmaWVsZE5hbWVdO1xuXHRcdFx0dmFyIGlzQXBwcm92ZWQgPSB2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy5hZGRyZXNzZWQ7XG5cdFx0XHRcdFxuXHRcdFx0aWYoIWlzQXBwcm92ZWQpIHtcblxuXHRcdFx0XHQvL3VwZGF0ZSB0aGUgdmFsdWVzXG5cdFx0XHRcdHZtLmlucHV0c1tmaWVsZE5hbWVdLnZhbHVlID0gdm0uaW5wdXRzW2ZpZWxkTmFtZV0uc3VnZ2VzdGlvbjtcblxuXHRcdFx0XHQvL3VwZGF0ZSB0aGUgYnV0dG9uXG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLmFkZHJlc3NlZCA9IHRydWU7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLnZhbHVlID0gdHJ1ZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMudGV4dCA9IFwiWUVTIVwiO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9jaGFuZ2UgdGhlIGNsYXNzXG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uY2xhc3Nlcy5hcHByb3ZhbERpdlsncm91bmQtYnV0dG9uLWNpcmNsZS1mcmVlJ10gPSBmYWxzZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWFwcHJvdmVkJ10gPSB0cnVlO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9jaGFuZ2UgdGhlIGlucHV0IGNsYXNzXG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uY2xhc3Nlcy5pbnB1dERpdlsnaGFzLXN1Y2Nlc3MnXSA9IHRydWU7XG5cblx0XHRcdFx0Y291bnRBcHByb3ZlZCgpO1xuXHRcdFx0XHRcblx0XHRcdH1cblxuXHRcdFx0Ly8kbG9nLmluZm8oZmllbGROYW1lKTtcblx0XHR9XG5cblx0XHQkc2NvcGUucGhvdG9BZGRlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHJlY29yZE51bSA9IGZpZWxkc0hhc2hbJ1Bob3RvJ107XG5cblx0XHRcdC8vZ2V0IHRoZSBwaG90b1xuXHRcdFx0Z2V0UGhvdG8oKTtcblxuXHRcdFx0Ly91cGRhdGUgdGhlIHZhbHVlc1xuXHRcdFx0JGxvZy5pbmZvKHZtLmlucHV0c1snUGhvdG8nXSk7XG5cblx0XHRcdC8vdXBkYXRlIHRoZSBidXR0b25cblx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLmFkZHJlc3NlZCA9IHRydWU7XG5cdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy52YWx1ZSA9IHRydWU7XG5cblx0XHRcdC8vY2hhbmdlIHRoZSBpbnB1dCBjbGFzc1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmlucHV0RGl2WydoYXMtc3VjY2VzcyddID0gdHJ1ZTtcblxuXHRcdFx0Y291bnRBcHByb3ZlZCgpO1xuXG5cdFx0XHQvL25vdGlmeSB0aGUgdXNlclxuXHRcdFx0Ly8kbG9nLmluZm8oJ2FkZGVkIGEgcGhvdG8nLCB2bS51cGxvYWRlZEltYWdlKTtcblxuXHRcdFx0Ly9hY2Nlc3NzZWQgdGhyb3VnaCBqcXVlcnkgc28gYXBwbHkgdGhlc2UgY2hhbmdlc1xuXHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdH1cblxuXHRcdHZtLnN1Ym1pdEZvcm0gPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0aWYoY291bnRBcHByb3ZlZCgpID09IHRvdGFsRmllbGRzKSB7XG5cdFx0XHRcdHZhciBkZWxpdmVyeU9iamVjdCA9IHt9O1xuXG5cdFx0XHRcdE9iamVjdC5rZXlzKHZtLmlucHV0cykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0XHRpZihrZXkgIT09ICdQaG90bycpIHtcblx0XHRcdFx0XHRcdC8vZm9yIG5vdCBwaG90b3MgYWRkIHZhbHVlc1xuXHRcdFx0XHRcdFx0aWYodHlwZW9mIHZtLmlucHV0c1trZXldLnZhbHVlID09ICdudW1iZXInKVxuXHRcdFx0XHRcdFx0XHRkZWxpdmVyeU9iamVjdFtrZXldID0gdm0uaW5wdXRzW2tleV0udmFsdWUgKiAxMDA7XG5cdFx0XHRcdFx0XHRlbHNlIGRlbGl2ZXJ5T2JqZWN0W2tleV0gPSB2bS5pbnB1dHNba2V5XS52YWx1ZTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly9pZiBpdCBpcyBhIHBob3RvLCBjb3B5IGRpcmVjdGx5XG5cdFx0XHRcdFx0XHRkZWxpdmVyeU9iamVjdFtrZXldID0gdm0uaW5wdXRzW2tleV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvL3NlbmQgdGhlIHZhbHVlc1xuXHRcdFx0XHRiYWNrZW5kU3J2Yy5zdWJtaXRGb3JtRGF0YShkZWxpdmVyeU9iamVjdClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0XHQvL25vdGlmeSB0aGUgdXNlclxuXHRcdFx0XHRcdCRsb2cuaW5mbygnc3VibWl0dGVkIScsIHJlc3BvbnNlKTtcblxuXHRcdFx0XHRcdC8vaWYgc3VjY2Vzc2Z1bCwgcmVkaXJlY3Rcblx0XHRcdFx0XHQkbG9jYXRpb24ucGF0aCgnL3N1Y2Nlc3MnKTtcblx0XHRcdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cblx0XHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yOicsIGVycm9yKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vbm90aWZ5IHRoZSB1c2VyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCduZWVkIHRvIGZpbmlzaCB0aGUgZmllbGRzJyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly9hdXRvbWF0aWNhbGx5IHJ1biB0aGUgcmVmcmVzaFxuXHRcdHZtLnJlZnJlc2hBcHByb3ZhbHMoKTtcblx0fVxuXG5cdHJldHVybiBkaXJlY3RpdmU7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWFya2V0UmVjaWVwdCcpXG4gICAgLmNvbnRyb2xsZXIoJ21hcmtldFJlY2llcHRDb250cm9sbGVyJywgbWFya2V0UmVjaWVwdENvbnRyb2xsZXIpO1xuXG5tYXJrZXRSZWNpZXB0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJ2JhY2tlbmRTcnZjJywgJ2Zvcm1EYXRhJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbWFya2V0UmVjaWVwdENvbnRyb2xsZXIoJGxvZywgYmFja2VuZFNydmMsIGZvcm1EYXRhKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZtLmRhdGEgPSBmb3JtRGF0YTtcblxuXHR2YXIgdGl0bGVDbGFzc2VzID0ge1xuXHRcdCdjb2wteHMtNSc6dHJ1ZSxcblx0XHQnY29sLXNtLTUnOnRydWUsXG5cdFx0J2NvbC1tZC01Jzp0cnVlLFxuXHRcdCdjb2wtbGctNSc6dHJ1ZVx0XHRcblx0fTtcblxuXHR2YXIgaW5wdXRDbGFzc2VzID0ge1xuXHRcdCdjb2wteHMtNyc6dHJ1ZSxcblx0XHQnY29sLXNtLTcnOnRydWUsXG5cdFx0J2NvbC1tZC03Jzp0cnVlLFxuXHRcdCdjb2wtbGctNyc6dHJ1ZVxuXHR9O1xuXG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWFya2V0UmVjaWVwdCcpXG4gICAgLmNvbnRyb2xsZXIoJ2xhbmRpbmdDb250cm9sbGVyJywgbGFuZGluZ0NvbnRyb2xsZXIpO1xuXG5sYW5kaW5nQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRsb2NhdGlvbiddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGxhbmRpbmdDb250cm9sbGVyKCRsb2csICRsb2NhdGlvbikge1xuXHR2YXIgdm0gPSB0aGlzO1xuXG5cdHZtLnJlZGlyZWN0VG8gPSBmdW5jdGlvbihmb3JtTmFtZSkge1xuXHRcdCRsb2cuaW5mbygnY2xpY2tlZCcsIGZvcm1OYW1lKTtcblx0XHQkbG9jYXRpb24ucGF0aCgnLycrZm9ybU5hbWUpO1xuXHR9XG59XG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuXHQuZGlyZWN0aXZlKCduYXZiYXInLCBuYXZiYXIpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIG5hdmJhcigpIHtcbiAgICBsaW5rRnVuYy4kaW5qZWN0ID0gW1wic2NvcGVcIiwgXCJlbFwiLCBcImF0dHJcIiwgXCJjdHJsXCJdO1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICdhcHAvbmF2YmFyL25hdmJhci5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBuYXZiYXJDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgbmF2YmFyQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZyddO1xuICAgIFxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIG5hdmJhckNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nKSB7XG4gICAgXHQvL3ZhciB2bSA9IHRoaXM7XG5cdH1cblxuXHRyZXR1cm4gZGlyZWN0aXZlO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuICAgIC5jb250cm9sbGVyKCdzdWNjZXNzQ29udHJvbGxlcicsIHN1Y2Nlc3NDb250cm9sbGVyKTtcblxuc3VjY2Vzc0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHN1Y2Nlc3NDb250cm9sbGVyKCRsb2cpIHtcblx0Ly92YXIgdm0gPSB0aGlzO1xuXHQkbG9nLmluZm8oJ3N1Y2Nlc3MgY29udHJvbGxlcicpO1xufSIsImFuZ3VsYXJcblx0Lm1vZHVsZSgnbWFya2V0UmVjaWVwdCcpXG5cdC5kaXJlY3RpdmUoJ3JlY2llcHRGb3JtJywgcmVjaWVwdEZvcm0pO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHJlY2llcHRGb3JtKCkge1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICdhcHAvZm9ybS9mb3JtLmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGRhdGE6ICc9J1xuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogcmVjaWVwdEZvcm0sXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICByZWNpZXB0Rm9ybS4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnYmFja2VuZFNydmMnXTtcbiAgICBcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiByZWNpZXB0Rm9ybSgkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgYmFja2VuZFNydmMpIHtcblx0XHR2YXIgdm0gPSB0aGlzO1xuXG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgdG90YWxGaWVsZHMgPSAwO1xuXHRcdHZhciBmaWVsZHNIYXNoID0ge307XG5cblx0XHQvL3NldCB2aWV3IG1vZGVsIHZhbHVlc1xuXHRcdHZtLmN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblx0XHR2bS51cGxvYWRlZEltYWdlID0ge1xuXHRcdFx0c3JjOiAnTWFya2V0X0ltYWdlLmpwZycsXG5cdFx0XHRiaW5hcnk6IG51bGxcblx0XHR9O1xuXG5cdFx0dm1bJ2lucHV0cyddID0ge307XG5cdFx0dm1bJ2FwcHJvdmFscyddID0ge307XG5cdFx0dm1bJ3N1Ym1pdEJ0bkNsYXNzZXMnXSA9IHtcblx0XHRcdFwiYnRuXCI6dHJ1ZSxcblx0XHRcdFwiYnRuLWRhbmdlclwiOnRydWUsXG5cdFx0XHRcImJ0bi1zdWNjZXNzXCI6ZmFsc2UsXG5cdFx0XHRcImNvbC14cy0xMlwiOnRydWUsXG5cdFx0XHRcImNvbC1zbS0xMlwiOnRydWUsXG5cdFx0XHRcImNvbC1tZC0xMlwiOnRydWUsXG5cdFx0XHRcImNvbC1sZy0xMlwiOnRydWVcblx0XHR9XG5cblx0XHQvL2NyZWF0ZSB0aGUgbmVlZGVkIG9iamVjdHNcblx0XHRPYmplY3Qua2V5cyh2bS5kYXRhLnF1ZXN0aW9ucykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdHZhciBuYW1lID0gdm0uZGF0YS5xdWVzdGlvbnNba2V5XS5uYW1lO1xuXG5cdFx0XHQvL2FkZCBhcHByb3ZhbCB2YWx1ZXNcblx0XHRcdHZtLmFwcHJvdmFsc1tuYW1lXSA9IHtcblx0XHRcdFx0XCJhZGRyZXNzZWRcIjpmYWxzZSxcblx0XHRcdFx0XCJ2YWx1ZVwiOm51bGwsXG5cdFx0XHRcdFwidGV4dFwiOidPSz8nXG5cdFx0XHR9XG5cblx0XHRcdC8vYWRkIGlucHV0IHZhbHVlc1xuXHRcdFx0dm0uaW5wdXRzW25hbWVdID0ge307XG5cdFx0XHR2bS5pbnB1dHNbbmFtZV0udmFsdWUgPSAnJztcblx0XHRcdHZtLmlucHV0c1tuYW1lXS5zdWdnZXN0aW9uID0gJzQxNSc7XG5cblx0XHRcdC8vYnVpbGQgZmllbGRzIGhhc2hcblx0XHRcdGZpZWxkc0hhc2hbbmFtZV0gPSB0b3RhbEZpZWxkcztcblxuXHRcdFx0Ly9pbmNyaW1lbnQgZmllbGRzIGNvdW50XG5cdFx0XHR0b3RhbEZpZWxkcysrO1xuXG5cdFx0fSk7XG5cblx0XHQvL2dldCBzdWdnZXN0ZWQgdmFsdWVzXG5cdFx0dm0uaW5wdXRzWydNYXJrZXQnXS5zdWdnZXN0aW9uID0gJ1N1cmYgQ2l0eSc7XG5cdFx0dm0uaW5wdXRzWydOYW1lJ10uc3VnZ2VzdGlvbiA9ICdBaG1lZCc7XG5cdFx0dm0uaW5wdXRzWydHcm9zcyddLnN1Z2dlc3Rpb24gPSA0MTU7XG5cdFx0dm0uaW5wdXRzWydGZWUnXS5zdWdnZXN0aW9uID0gNDI7XG5cdFx0dm0uaW5wdXRzWydQYXknXS5zdWdnZXN0aW9uID0gODM7XG5cdFx0dm0uaW5wdXRzWydSZWNpZXB0cyddLnN1Z2dlc3Rpb24gPSAxMDtcblx0XHR2bS5pbnB1dHNbJ0JhbmsnXS5zdWdnZXN0aW9uID0gNjA7XG5cdFx0dm0uaW5wdXRzWydEdWUnXS5zdWdnZXN0aW9uID0gMjIwO1xuXG5cdFx0ZnVuY3Rpb24gdW5sb2NrU3VibWl0QnRuKCkge1xuXHRcdFx0Ly9cblx0XHRcdC8vJGxvZy5pbmZvKCdVbmxvY2tpbmcgYnRuJyk7XG5cdFx0XHR2bS5zdWJtaXRCdG5DbGFzc2VzWydidG4tZGFuZ2VyJ10gPSBmYWxzZTtcblx0XHRcdHZtLnN1Ym1pdEJ0bkNsYXNzZXNbJ2J0bi1zdWNjZXNzJ10gPSB0cnVlO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGxvY2tTdWJtaXRCdG4oKSB7XG5cdFx0XHQvL1xuXHRcdFx0Ly8kbG9nLmluZm8oJ0xvY2tpbmcgYnRuJyk7XG5cdFx0XHR2bS5zdWJtaXRCdG5DbGFzc2VzWydidG4tZGFuZ2VyJ10gPSB0cnVlO1xuXHRcdFx0dm0uc3VibWl0QnRuQ2xhc3Nlc1snYnRuLXN1Y2Nlc3MnXSA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNvdW50QXBwcm92ZWQoKSB7XG5cdFx0XHR2YXIgbnVtYmVyT2YgPSAwO1xuXG5cdFx0XHRPYmplY3Qua2V5cyh2bS5kYXRhLnF1ZXN0aW9ucykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0Ly9kZWZpbmUgdmFyaWFibGVcblx0XHRcdFx0dmFyIGlzQXBwcm92ZWQgPSB2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmFwcHJvdmFscy5hZGRyZXNzZWQ7XG5cdFx0XHRcdC8vY2hlY2sgdmFsdWVcblx0XHRcdFx0aWYoaXNBcHByb3ZlZCkgbnVtYmVyT2YrKztcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyRsb2cuaW5mbyhudW1iZXJPZiwgdG90YWxGaWVsZHMsIG51bWJlck9mPT10b3RhbEZpZWxkcyk7XG5cdFx0XHRpZihudW1iZXJPZj09dG90YWxGaWVsZHMpIHVubG9ja1N1Ym1pdEJ0bigpO1xuXHRcdFx0ZWxzZSBsb2NrU3VibWl0QnRuKCk7XG5cblx0XHRcdHJldHVybiBudW1iZXJPZjtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRQaG90bygpIHtcblx0XHRcdHZhciBwcmV2aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2llcHRJbWFnZScpXG5cdFx0XHR2YXIgZmlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdQaG90bycpLmZpbGVzWzBdO1xuXHRcdFx0dmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdFx0XHR2YXIgaW1hZ2ViaW5hcnkgPSBudWxsO1xuXG5cdFx0XHRyZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpbWFnZWJpbmFyeSA9IHJlYWRlci5yZXN1bHQ7XG5cdFx0XHRcdHByZXZpZXcuc3JjID0gaW1hZ2ViaW5hcnk7XG5cblx0XHRcdH0sIGZhbHNlKTtcblxuXHRcdFx0aWYgKGZpbGUpIHtcblx0XHRcdFx0Ly9wcmV2aWV3IHRoZSBpbWFnZVxuXHRcdFx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcblxuXHRcdFx0XHQvL3NhdmUgdGhlIHZhbHVlIHRvIHRoZSB2YXJpYWJsZVxuXHRcdFx0XHR2bS5pbnB1dHNbJ1Bob3RvJ10gPSB7XG5cdFx0XHRcdFx0c3JjOiAnTWFya2V0X1JlY2llcHQuanBnJyxcblx0XHRcdFx0XHRiaW5hcnk6IGltYWdlYmluYXJ5XG5cdFx0XHRcdH07XHRcdFx0XHRcblx0XHRcdH1cblxuXHRcdFx0LypyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0dmFyIGRhdGEgPSBlLnRhcmdldC5yZXN1bHQ7XG5cdFx0XHRcdFxuXHRcdFx0XHQkbG9nLmluZm8oJ2dvdCBoZXJlJyk7XG5cblx0XHRcdFx0Ly9zYXZlIHRoZSB2YWx1ZSB0byB0aGUgdmFyaWFibGVcblx0XHRcdFx0dm0uaW5wdXRzWydQaG90byddID0ge1xuXHRcdFx0XHRcdHNyYzogJ01hcmtldF9SZWNpZXB0LmpwZycsXG5cdFx0XHRcdFx0YmluYXJ5OiBkYXRhXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQkbG9nLmluZm8oJ2ZpbGUgbG9hZGVkJywgdm0uaW5wdXRzWydQaG90byddKTtcblx0XHRcdH1cblx0XHRcdCRsb2cuaW5mbygnZ290IGhlcmUnKTtcblx0XHRcdHIucmVhZEFzRGF0YVVSTChmaWxlKTsqL1xuXHRcdH1cblxuXHRcdHZtLnJlZnJlc2hBcHByb3ZhbHMgPSBmdW5jdGlvbigpIHtcblx0XHRcdC8vbG9vcCB0aHJvdWdoIGFsbCBxdWVzdGlvbnNcblx0XHRcdE9iamVjdC5rZXlzKHZtLmRhdGEucXVlc3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHR2YXIgcmVjb3JkTmFtZSA9IHZtLmRhdGEucXVlc3Rpb25zW2tleV0ubmFtZTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vcmVzZXQgc3VnZ2VzdGlvbnNcblxuXHRcdFx0XHQvL3Jlc2V0IHZhbHVlc1xuXHRcdFx0XHR2bS5pbnB1dHNbcmVjb3JkTmFtZV0udmFsdWUgPSAnJztcblxuXHRcdFx0XHQvL3NldCB2YWx1ZXNcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5hcHByb3ZhbHMuYWRkcmVzc2VkID0gZmFsc2U7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uYXBwcm92YWxzLnZhbHVlID0gbnVsbDtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5hcHByb3ZhbHMudGV4dCA9IFwiT0s/XCI7XG5cblx0XHRcdFx0Ly9zZXQgY2xhc3Nlc1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmNsYXNzZXMuYXBwcm92YWxEaXZbJ3JvdW5kLWJ1dHRvbi1jaXJjbGUtZnJlZSddID0gdHJ1ZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWFwcHJvdmVkJ10gPSBmYWxzZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLXJldmlzZWQnXSA9IGZhbHNlO1xuXHRcdFx0XHRcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNba2V5XS5jbGFzc2VzLmlucHV0RGl2WydoYXMtc3VjY2VzcyddID0gZmFsc2U7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW2tleV0uY2xhc3Nlcy5pbnB1dERpdlsnaGFzLXdhcm5pbmcnXSA9IGZhbHNlO1xuXHRcdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1trZXldLmNsYXNzZXMuaW5wdXREaXZbJ2hhcy1kYW5nZXInXSA9IGZhbHNlO1xuXHRcdFx0fSk7XG5cblx0XHRcdGNvdW50QXBwcm92ZWQoKTtcblx0XHR9XG5cblx0XHR2bS5jaGFuZ2VkID0gZnVuY3Rpb24oZmllbGROYW1lKSB7XG5cdFx0XHR2YXIgcmVjb3JkTnVtID0gZmllbGRzSGFzaFtmaWVsZE5hbWVdO1xuXHRcdFx0Ly9ub3RpZnkgdGhlIHJlY29yZCBiZWluZyBjaGFuZ2VkXG5cdFx0XHQvLyRsb2cuaW5mbyhmaWVsZE5hbWUpO1xuXG5cdFx0XHQvL3VwZGF0ZSB0aGUgYXBwcm92YWwgYnV0dG9uXG5cdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy5hZGRyZXNzZWQgPSB0cnVlO1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMudmFsdWUgPSB0cnVlO1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMudGV4dCA9IFwiTk8hXCI7XG5cblx0XHRcdC8vY2hhbmdlIHRoZSBjbGFzc1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWZyZWUnXSA9IGZhbHNlO1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLXJldmlzZWQnXSA9IHRydWU7XG5cdFx0XHRcblx0XHRcdC8vY2hhbmdlIHRoZSBpbnB1dCBjbGFzc1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmlucHV0RGl2WydoYXMtZGFuZ2VyJ10gPSB0cnVlO1xuXG5cdFx0XHRjb3VudEFwcHJvdmVkKCk7XG5cdFx0fVxuXG5cdFx0dm0uYXBwcm92ZUZpZWxkID0gZnVuY3Rpb24oZmllbGROYW1lKSB7XG5cdFx0XHR2YXIgcmVjb3JkTnVtID0gZmllbGRzSGFzaFtmaWVsZE5hbWVdO1xuXHRcdFx0dmFyIGlzQXBwcm92ZWQgPSB2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy5hZGRyZXNzZWQ7XG5cdFx0XHRcdFxuXHRcdFx0aWYoIWlzQXBwcm92ZWQpIHtcblxuXHRcdFx0XHQvL3VwZGF0ZSB0aGUgdmFsdWVzXG5cdFx0XHRcdHZtLmlucHV0c1tmaWVsZE5hbWVdLnZhbHVlID0gdm0uaW5wdXRzW2ZpZWxkTmFtZV0uc3VnZ2VzdGlvbjtcblxuXHRcdFx0XHQvL3VwZGF0ZSB0aGUgYnV0dG9uXG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLmFkZHJlc3NlZCA9IHRydWU7XG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLnZhbHVlID0gdHJ1ZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5hcHByb3ZhbHMudGV4dCA9IFwiWUVTIVwiO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9jaGFuZ2UgdGhlIGNsYXNzXG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uY2xhc3Nlcy5hcHByb3ZhbERpdlsncm91bmQtYnV0dG9uLWNpcmNsZS1mcmVlJ10gPSBmYWxzZTtcblx0XHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmFwcHJvdmFsRGl2Wydyb3VuZC1idXR0b24tY2lyY2xlLWFwcHJvdmVkJ10gPSB0cnVlO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9jaGFuZ2UgdGhlIGlucHV0IGNsYXNzXG5cdFx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uY2xhc3Nlcy5pbnB1dERpdlsnaGFzLXN1Y2Nlc3MnXSA9IHRydWU7XG5cblx0XHRcdFx0Y291bnRBcHByb3ZlZCgpO1xuXHRcdFx0XHRcblx0XHRcdH1cblxuXHRcdFx0Ly8kbG9nLmluZm8oZmllbGROYW1lKTtcblx0XHR9XG5cblx0XHQkc2NvcGUucGhvdG9BZGRlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHJlY29yZE51bSA9IGZpZWxkc0hhc2hbJ1Bob3RvJ107XG5cblx0XHRcdC8vZ2V0IHRoZSBwaG90b1xuXHRcdFx0Z2V0UGhvdG8oKTtcblxuXHRcdFx0Ly91cGRhdGUgdGhlIHZhbHVlc1xuXHRcdFx0JGxvZy5pbmZvKHZtLmlucHV0c1snUGhvdG8nXSk7XG5cblx0XHRcdC8vdXBkYXRlIHRoZSBidXR0b25cblx0XHRcdHZtLmRhdGEucXVlc3Rpb25zW3JlY29yZE51bV0uYXBwcm92YWxzLmFkZHJlc3NlZCA9IHRydWU7XG5cdFx0XHR2bS5kYXRhLnF1ZXN0aW9uc1tyZWNvcmROdW1dLmFwcHJvdmFscy52YWx1ZSA9IHRydWU7XG5cblx0XHRcdC8vY2hhbmdlIHRoZSBpbnB1dCBjbGFzc1xuXHRcdFx0dm0uZGF0YS5xdWVzdGlvbnNbcmVjb3JkTnVtXS5jbGFzc2VzLmlucHV0RGl2WydoYXMtc3VjY2VzcyddID0gdHJ1ZTtcblxuXHRcdFx0Y291bnRBcHByb3ZlZCgpO1xuXG5cdFx0XHQvL25vdGlmeSB0aGUgdXNlclxuXHRcdFx0Ly8kbG9nLmluZm8oJ2FkZGVkIGEgcGhvdG8nLCB2bS51cGxvYWRlZEltYWdlKTtcblxuXHRcdFx0Ly9hY2Nlc3NzZWQgdGhyb3VnaCBqcXVlcnkgc28gYXBwbHkgdGhlc2UgY2hhbmdlc1xuXHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdH1cblxuXHRcdHZtLnN1Ym1pdEZvcm0gPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0aWYoY291bnRBcHByb3ZlZCgpID09IHRvdGFsRmllbGRzKSB7XG5cdFx0XHRcdHZhciBkZWxpdmVyeU9iamVjdCA9IHt9O1xuXG5cdFx0XHRcdE9iamVjdC5rZXlzKHZtLmlucHV0cykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0XHRpZihrZXkgIT09ICdQaG90bycpIHtcblx0XHRcdFx0XHRcdC8vZm9yIG5vdCBwaG90b3MgYWRkIHZhbHVlc1xuXHRcdFx0XHRcdFx0aWYodHlwZW9mIHZtLmlucHV0c1trZXldLnZhbHVlID09ICdudW1iZXInKVxuXHRcdFx0XHRcdFx0XHRkZWxpdmVyeU9iamVjdFtrZXldID0gdm0uaW5wdXRzW2tleV0udmFsdWUgKiAxMDA7XG5cdFx0XHRcdFx0XHRlbHNlIGRlbGl2ZXJ5T2JqZWN0W2tleV0gPSB2bS5pbnB1dHNba2V5XS52YWx1ZTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly9pZiBpdCBpcyBhIHBob3RvLCBjb3B5IGRpcmVjdGx5XG5cdFx0XHRcdFx0XHRkZWxpdmVyeU9iamVjdFtrZXldID0gdm0uaW5wdXRzW2tleV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvL3NlbmQgdGhlIHZhbHVlc1xuXHRcdFx0XHRiYWNrZW5kU3J2Yy5zdWJtaXRGb3JtRGF0YShkZWxpdmVyeU9iamVjdClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0XHQvL25vdGlmeSB0aGUgdXNlclxuXHRcdFx0XHRcdCRsb2cuaW5mbygnc3VibWl0dGVkIScsIHJlc3BvbnNlKTtcblxuXHRcdFx0XHRcdC8vaWYgc3VjY2Vzc2Z1bCwgcmVkaXJlY3Rcblx0XHRcdFx0XHQkbG9jYXRpb24ucGF0aCgnL3N1Y2Nlc3MnKTtcblx0XHRcdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cblx0XHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yOicsIGVycm9yKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vbm90aWZ5IHRoZSB1c2VyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCduZWVkIHRvIGZpbmlzaCB0aGUgZmllbGRzJyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly9hdXRvbWF0aWNhbGx5IHJ1biB0aGUgcmVmcmVzaFxuXHRcdHZtLnJlZnJlc2hBcHByb3ZhbHMoKTtcblx0fVxuXG5cdHJldHVybiBkaXJlY3RpdmU7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuICAgIC5jb250cm9sbGVyKCdtYXJrZXRSZWNpZXB0Q29udHJvbGxlcicsIG1hcmtldFJlY2llcHRDb250cm9sbGVyKTtcblxubWFya2V0UmVjaWVwdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICdiYWNrZW5kU3J2YycsICdmb3JtRGF0YSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIG1hcmtldFJlY2llcHRDb250cm9sbGVyKCRsb2csIGJhY2tlbmRTcnZjLCBmb3JtRGF0YSkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2bS5kYXRhID0gZm9ybURhdGE7XG5cblx0dmFyIHRpdGxlQ2xhc3NlcyA9IHtcblx0XHQnY29sLXhzLTUnOnRydWUsXG5cdFx0J2NvbC1zbS01Jzp0cnVlLFxuXHRcdCdjb2wtbWQtNSc6dHJ1ZSxcblx0XHQnY29sLWxnLTUnOnRydWVcdFx0XG5cdH07XG5cblx0dmFyIGlucHV0Q2xhc3NlcyA9IHtcblx0XHQnY29sLXhzLTcnOnRydWUsXG5cdFx0J2NvbC1zbS03Jzp0cnVlLFxuXHRcdCdjb2wtbWQtNyc6dHJ1ZSxcblx0XHQnY29sLWxnLTcnOnRydWVcblx0fTtcblxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtYXJrZXRSZWNpZXB0JylcbiAgICAuY29udHJvbGxlcignbGFuZGluZ0NvbnRyb2xsZXInLCBsYW5kaW5nQ29udHJvbGxlcik7XG5cbmxhbmRpbmdDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbGFuZGluZ0NvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cblx0dm0ucmVkaXJlY3RUbyA9IGZ1bmN0aW9uKGZvcm1OYW1lKSB7XG5cdFx0JGxvZy5pbmZvKCdjbGlja2VkJywgZm9ybU5hbWUpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvJytmb3JtTmFtZSk7XG5cdH1cbn0iLCJhbmd1bGFyXG5cdC5tb2R1bGUoJ21hcmtldFJlY2llcHQnKVxuXHQuZGlyZWN0aXZlKCduYXZiYXInLCBuYXZiYXIpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIG5hdmJhcigpIHtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnYXBwL25hdmJhci9uYXZiYXIuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge30sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogbmF2YmFyQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIG5hdmJhckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcbiAgICBcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBuYXZiYXJDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuICAgIFx0Ly92YXIgdm0gPSB0aGlzO1xuXHR9XG5cblx0cmV0dXJuIGRpcmVjdGl2ZTtcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWFya2V0UmVjaWVwdCcpXG4gICAgLmNvbnRyb2xsZXIoJ3N1Y2Nlc3NDb250cm9sbGVyJywgc3VjY2Vzc0NvbnRyb2xsZXIpO1xuXG5zdWNjZXNzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gc3VjY2Vzc0NvbnRyb2xsZXIoJGxvZykge1xuXHQvL3ZhciB2bSA9IHRoaXM7XG5cdCRsb2cuaW5mbygnc3VjY2VzcyBjb250cm9sbGVyJyk7XG59IiwiYW5ndWxhclxuXHQubW9kdWxlKCdtYXJrZXRSZWNpZXB0JywgW1xuXHRcdCduZ1JvdXRlJ1xuXHRdKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
